<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="about-install-sap-pattern-ansible"
 role="concept" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>About the <literal>sles_sap_automation</literal> pattern</title>
    <!-- can be changed via merge in the assembly -->
    <!--add author's email address-->
    <meta name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
    <abstract>
      <para>
      Using the &suse; package pattern is recommended because it is the simplest and most reliable method for installing all the required SAP automation components.
      </para>
    </abstract>
  </info>
 <para>By using the pattern, you ensure all required Ansible collections and the playbook packages are installed together, preventing dependency problems.
  For &sles4sap; 16, install the <literal>sles_sap_automation</literal> package pattern: </para>
  <screen>&prompt.sudo;<command>zypper install --type pattern sles_sap_automation</command></screen>
<para>This command installs the following packages:</para>
<itemizedlist>
<listitem><para><literal>ansible-sap-infrastructure</literal></para></listitem>
<listitem><para><literal>ansible-sap-install</literal></para></listitem>
<listitem><para><literal>ansible-sap-operations</literal></para></listitem>
<listitem><para><literal>ansible-sap-playbooks</literal></para></listitem>
</itemizedlist>
<important><para>Each package each contain an Ansible Collection with a curated list of supported Ansible roles.
 To call out each role in a collection , you must use it's Fully Qualified Collection Name (FQCN). This tells Ansible exactly where to find the role and prevent any naming conflicts with other collections.
For example:</para>
<screen>
  ---
  - name: Ansible Play to install SAP Product
    hosts: all
    tasks:
      - name: Install SAP Product
        ansible.builtin.include_role:
          name: suse.sap_install.sap_swpm</screen>
</important>
<section xml:id="sap-install-pack">
<title>The <literal>sap_install</literal> collection</title>
<para>The <literal>sap_install</literal> collection performs all SAP software provisioning, covering installation and configuration for a wide range of solutions and deployment scenarios.
</para>
<para>This role covers the following tasks:</para>
<itemizedlist><listitem><para>Ensure the operating system is configured and all required SAP installation media are staged prior to system setup.</para></listitem>
  <listitem><para>Install &hana; database.</para></listitem>
  <listitem><para>Install &sap; products such as &s4h;, &netweaver; etc.</para></listitem>
  <listitem><para>Configure the replication of &hana; and HA clusters, &hana; and &netweaver;.</para></listitem>
  </itemizedlist>
  <para>The key roles in this collection include: </para>
  <itemizedlist>
 <listitem><para><literal>sap_general_preconfigure</literal>: installs required packages and performs basic OS configuration steps according to applicable SAP notes for installing and running &hana;
 or &sap; ABAP Application Platform (formerly known as SAP NetWeaver).</para></listitem>
<listitem><para><literal>sap_hana_preconfigure</literal>: installs additional required packages and performs additional OS configuration steps according to applicable SAP notes for installing and running &hana; after the role <literal>sap_general_preconfigure</literal>.</para></listitem>
<listitem><para><literal>sap_netweaver_preconfigure</literal>:  installs additional required packages and performs additional OS configuration steps according to applicable SAP notes for installing and running &sap; ABAP Application Platform after the role <literal>sap_general_preconfigure</literal>.</para></listitem>
<listitem><para><literal>sap_storage_setup</literal>: prepares a host with the storage requirements of a &sap; system (prior to software installation).</para></listitem>
<listitem><para><literal>sap_install_media_detect</literal>: detects and extracts &sap; installation media.</para></listitem>
<listitem><para><literal>sap_hana_install</literal>: installs &hana; using the &hana; database lifecycle manager (HDBLCM).</para></listitem>
<listitem><para><literal>sap_ha_install_hana_hsr</literal>: configures and enables &hana; system replication between two nodes.</para></listitem>
<listitem><para><literal>sap_swpm</literal>: installs various &sap; systemd installable by SAP Software Provisioning Manager (SWPM).</para></listitem>
<listitem><para><literal>sap_ha_pacemaker_cluster</literal>: installs and configures Linux Pacemaker High Availability clusters for &hana; and &sap; &netweaver; systems on various infrastructure platforms.</para></listitem>
</itemizedlist>
  <para>List of all roles:</para>
  <screen>&prompt.user; /usr/share/ansible/collections/ansible_collections/suse/sap_install/roles ls
    sap_anydb_install_oracle  sap_ha_install_anydb_ibmdb2  sap_ha_pacemaker_cluster  sap_hana_preconfigure     sap_maintain_etc_hosts      sap_storage_setup
    sap_general_preconfigure  sap_ha_install_hana_hsr      sap_hana_install          sap_install_media_detect  sap_netweaver_preconfigure  sap_swpm</screen>
<para>For more details about the roles and role variables in the <literal>sap_install</literal> collection,  refer to the <literal>README.md</literal>, for example: </para>
<screen>&prompt.user; /usr/share/ansible/collections/ansible_collections/suse/sap_install/roles/sap_swpm ls
  README.md  defaults  meta  tasks  templates</screen>
  </section>
<section xml:id="sap-infra-pack">
  <title>The <literal>sap_infrastructure</literal> collection</title>
  <para>The <literal>sap_infrastructure</literal> collection provides a set of Ansible roles to automate various infrastructure-related tasks for &sap; systems.
    The core focus is on creating and configuring the necessary resources across diverse platforms, including cloud hyper scalers and hypervisors.</para>
    <para>This role covers the following tasks:</para>
    <itemizedlist><listitem><para>Provision virtual machines on target infrastructure platforms by using Ansible or Terraform. This includes
     provisioning of High Availability resources such as routing, load balancing etc. where applicable.
    </para></listitem>
      <listitem><para>Assign temporary Virtual IP Addresses (VIPs) for application installation before the cluster takes over management.</para></listitem>
      <listitem><para>Hypervisor nodes are pre-configured to host the virtual machines required for the &sap; systems.</para></listitem>
       </itemizedlist>
 <para>The key role in this collection is: </para>
 <itemizedlist>
 <listitem><para><literal>sap_vm_provision</literal>: executes end-to-end (i.e. Provision host/s, configure OS for &sap; software, install &sap; software, instantiate the &sap; system).
  For more information, refer to the Ansible Playbooks for  <link xlink:href="https://github.com/sap-linuxlab/ansible.playbooks_for_sap"></link>.
  </para></listitem> </itemizedlist>
  <para>The following infrastructure platforms are supported:</para>
  <itemizedlist>
 <listitem><para>AWS EC2 Virtual Server instance</para></listitem>
 <listitem><para>Google Cloud Compute Engine Virtual Machine</para></listitem>
 <listitem><para>IBM Cloud, Intel Virtual Server</para></listitem>
 <listitem><para>IBM Cloud, Power Virtual Server</para></listitem>
 <listitem><para>Microsoft Azure Virtual Machine</para></listitem>
 <listitem><para>IBM PowerVM Virtual Machine</para></listitem>
</itemizedlist>
  <para>List of all roles:</para>
 <screen>&prompt.user; /usr/share/ansible/collections/ansible_collections/suse/sap_infrastructure/roles ls
sap_vm_provision  sap_vm_temp_vip </screen>
<para>For more details about the roles and role variables in the <literal>sap_infrastructure</literal> collection,  refer to the <literal>README.md</literal>, for example: </para>
<screen>&prompt.user; /usr/share/ansible/collections/ansible_collections/suse/sap_infrastructure/roles/sap_vm_provision ls
  PLATFORM_GUIDANCE.md  README.md  defaults  meta  tasks</screen>
<important><para>Since this collection leverages native cloud automation tools, ensure you meet your target platform's specific prerequisites as detailed in
  <link xlink:href="https://github.com/sap-linuxlab/community.sap_infrastructure/tree/main/roles/sap_vm_provision"></link>.
</para></important>
  </section>
  <section xml:id="sap-operations-pack">
    <title>The <literal>sap_operations</literal> collection</title>
    <para> The <literal>sap_operations</literal>collection executes various day-to-day operation tasks for &sap; systems. </para>
    <para>This role covers the following tasks:</para>
    <itemizedlist>
      <listitem><para> OS configuration post installing of &sap; software.</para>
    <itemizedlist><listitem><para>Create an Ansible user for managing systems.</para></listitem>
      <listitem><para>Update the <filename>/etc/hosts</filename> file.</para></listitem>
      <listitem><para>Update the SSH authorized <literal>known hosts</literal> file.</para></listitem>
      <listitem><para>Update the <literal>fapolicyd</literal> entries based on &sap; system instance numbers.</para></listitem>
      <listitem><para>Update firewall port entries based on &sap; system instance numbers.</para></listitem>
      </itemizedlist>
    </listitem>
      <listitem><para>&sap; administration tasks</para>
        <itemizedlist><listitem><para>Create an Ansible user for managing systems.</para></listitem>
          <listitem><para>Start and stop of &hana; and &netweaver; in any configuration.</para></listitem>
          <listitem><para>Update &sap; profile files.</para></listitem>
          <listitem><para>Execute &sap; Remote Function Calls (RFC).</para></listitem>
           </itemizedlist>
      </listitem>
     </itemizedlist>
     <para>List of all roles:</para>
<screen>&prompt.user; /usr/share/ansible/collections/ansible_collections/suse/sap_operations/roles ls
sap_control  sap_profile_update </screen>
<para>For more details about the roles and role variables in the <literal>sap_operations</literal> collection,  refer to the <literal>README.md</literal>, for example: </para>
<screen>&prompt.user; /usr/share/ansible/collections/ansible_collections/suse/sap_operations/roles/sap_control ls
  README.md  defaults  tasks</screen>
  </section>    <section xml:id="sap-playbook-pack">
      <title>About the <package>ansible.playbooks_for_sap</package> package</title>
<para>
 The <package>ansible.playbooks_for_sap</package> package  contains Ansible playbooks for deployment of various &sap; software solution scenarios onto different Hyper-scaler Cloud Service Providers and Hypervisors platforms.
</para>
<para>To make the playbook easy to use and scalable, the following key principles are used in the design:</para>
<itemizedlist>
  <listitem><para><emphasis role="bold">Modular configuration</emphasis>: The playbooks use modular configuration, which is a variable system that lets you focus only on the specific values for your environment, eliminating the need to sift through hundreds of unused settings. </para></listitem>
  <listitem><para><emphasis role="bold">Brownfield and Greenfield Support</emphasis>: Flexible by design, the playbooks support both greenfield deployments (creating a landscape from scratch) and brownfield operations (running against existing servers).</para></listitem>
  <listitem><para><emphasis role="bold">Interactive mode</emphasis>: For quick setups or for users who prefer not to manage variable files, an interactive mode is available. This mode will prompt you for all the necessary information, guiding you step-by-step.</para></listitem>
  <listitem><para><emphasis role="bold">(Optional) Automated Media Downloads</emphasis>: If the <literal>community.sap_launchpad</literal> Ansible Collection is installed, the playbooks can automatically download the required &sap; installation media for you, saving significant manual effort.
    This feature requires a valid <literal>SAP S-User</literal>  with the necessary download privileges.</para></listitem>
</itemizedlist>
<para>The benefits of Ansible playbooks for &sap; are:</para>
<itemizedlist>
<listitem><para>The playbooks are designed for simplicity, making them accessible to users across all levels of Ansible experience.</para></listitem>
<listitem><para>Easily reconfigurable and extendable; they let you precisely tailor deployments to your needs. For instance, you can customize them for specific SAP versions, integrate monitoring tools, or adapt them to different network topologies.</para></listitem>
<listitem><para>Each playbook contains a complete deployment scenario, which ensures consistency and simplifies the process.</para></listitem>
<listitem><para>Deploy the same &sap; solution across diverse infrastructure—including Hyper-scaler cloud service providers and Hypervisor platforms—with guaranteed, predictable results.</para></listitem>
<listitem><para>You have the flexibility to choose either Ansible or Terraform for infrastructure provisioning.</para></listitem>
<listitem><para>Licensed for corporate use by &sap; customers, service and technology partners.</para></listitem>
</itemizedlist>
<para>For more details about the <package>ansible.playbooks_for_sap</package> package, refer to the <literal>README.md</literal>: </para>
<screen>&prompt.user; /usr/share/ansible/playbooks/ansible.playbooks_for_sap ls
  LICENSE  README.md  deploy_scenarios  docs  special_actions</screen>
  <para>and</para>
<screen>&prompt.user; /usr/share/ansible/playbooks/ansible.playbooks_for_sap/docs ls
  CONTRIBUTING.md  CONTRIBUTORS.md  DEV_EXECUTION_FLOW.md  FAQ.md  GET_STARTED_AZURE_DEVOPS.md  GET_STARTED_MACOS.md  GET_STARTED_WINDOWS.md  README.md  images  sample</screen>

  <important><para>It is recommended that the playbooks at <filename>/usr/share/ansible/playbooks</filename> should be used as templates. If you change them, there is a risk of losing your changes when the package is updated.</para></important>
      </section>
</topic>