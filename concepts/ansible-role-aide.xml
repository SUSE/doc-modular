<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="ansible-role-aide"
 role="concept" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>About the &aide; Linux system role</title>
    <meta name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
    <abstract>
      <para>
       The &aide; Linux system role in Ansible installs, configures and manages the Advanced Intrusion Detection Environment (AIDE) utility on &productname; 16.0 systems.
      </para>
    </abstract>
  </info>
  <para>You can use this role to:</para>
  <itemizedlist>
  <listitem><para>Ensure the &aide; package is installed on the managed node.</para></listitem>
  <listitem><para>Optionally generate and deploys a custom <filename>/etc/aide.conf</filename>file.</para></listitem>
  <listitem><para>Create the baseline AIDE database on the managed node.</para></listitem>
  <listitem><para>Run checks against the live system and reports any file additions, deletions, or modifications. This is used for daily intrusion detection.</para></listitem>
  <listitem><para>Securely fetch the AIDE database files from the remote host back to the control node.</para></listitem>
  </itemizedlist>
<example><title>AIDE role</title>
<screen>

  ---
  - name: Example aide role invocation
    hosts: targets
    tasks:
      - name: Include role aide
        vars:
          aide_db_fetch_dir: files
          aide_install: true
          aide_generate_config: true
          aide_init: true
          aide_check: false
          aide_update: false
        ansible.builtin.include_role:
          name: linux-system-roles.aide
</screen>
<itemizedlist>
 <listitem><para><literal>aide_db_fetch_dir: files</literal>: is a <literal>string</literal> variable that specifies the directory on control node, where the AIDE database files are fetched and stored from the remote managed nodes.
  The default is <literal>files</literal>, which means the role expects a directory named <literal>files</literal> to exist in the same directory as the playbook being executed.</para></listitem>
  <listitem><para><literal>aide_install: true</literal>: is a <literal>Boolean</literal> variable used to control whether AIDE package should be installed on the managed nodes.
The default is <literal>false</literal>.</para></listitem>
  <listitem><para><literal>aide_generate_config: true</literal>: is a <literal>Boolean</literal> variable that controls whether a new AIDE configuration file should be created and deployed to the managed nodes.
    The default is <literal>false</literal>. When set to <literal>true</literal>, a new AIDE configuration file is created and placed on the managed node.
  </para></listitem>
  <listitem><para><literal>aide_init: true</literal>: is a <literal>Boolean</literal> variable that controls whether a AIDE database should be initialized on a managed node.
    The default is <literal>false</literal>. When set to <literal>true</literal>, a AIDE database is created on the managed node, it is then fetched to the control node.
  </para></listitem>
  <listitem><para><literal>aide_check: false</literal>: is a <literal>Boolean</literal> variable that controls whether an integrity check should be immediately run on the managed nodes.
    The default is <literal>false</literal>. When set to <literal>true</literal>, the AIDE check is run, data is compared with the current state of the file system with the trusted baseline database and a report is generated.
  </para></listitem>
  <listitem><para><literal>aide_update: false</literal>: is a <literal>Boolean</literal> variable that controls the creation of a new AIDE database to replace the current trusted baseline.
    The default is <literal>false</literal>. When set to <literal>true</literal>, the AIDE update command is run on the managed system, which performs an integrity check, creates a new AIDE database reflecting the current system state and establishes this new file as the trusted baseline for future checks.
  </para></listitem>

</itemizedlist>
</example>
<para>For more details about all the variables in the <literal>aide</literal> Linux system role,
  refer to the specific <literal>REDADME.md</literal> file on the control node:</para>
  <screen>/usr/share/ansible/collections/ansible_collections/suse/linux_system_roles/docs</screen>
</topic>