<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="ansible-role-firewall"
 role="concept" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>firewall</title>
    <meta name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
    <abstract>
      <para>
    This role automates &firewalld; configuration, ensuring the service is active and managing network traffic.
    It installs, enables and unmasks the daemon if required, and can also disable conflicting firewall services.</para>
    </abstract>
  </info>
  <para>It is used to dynamically manage firewall rules on Linux systems by using zones, services and policies to control network traffic.
    </para>
    <section xml:id="firewall-role-variables">
      <title> firewall role variables</title>
      <para>firewall variables are: </para>
    <itemizedlist>
      <listitem>
        <para>
<literal>firewall_disable_conflicting_services </literal>: is a boolean variable that, when set to <literal>true</literal> tells a firewall automation role to automatically stop and disable other firewall services
such as <literal>iptables</literal>, <literal>nftables</literal> or <literal>ufw</literal> that could interfere with &firewalld;. This is a crucial step to prevent unintended network behavior and ensure a single, consistent firewall is in control.
</para> </listitem>
      <listitem>
        <para>
     <literal>firewall_transactional_update_reboot_ok</literal>: is a boolean that controls whether the firewall configuration role is allowed to trigger a reboot as part of a transactional update. It's a safety measure to prevent a system from rebooting unexpectedly during an automated configuration.
     The default value is <literal>false</literal>.
    </para>
      </listitem>
    </itemizedlist>
       <example><title>A firewall playbook example </title>
        <para>This playbook ensures &firewalld; is running and permanently allows incoming SSH and HTTP traffic on all managed nodes.
        </para>
<screen>
- name: Apply basic firewall configuration with services
  hosts: all
  become: yes

  # 1. Define variables for the firewall role
  vars:
    # This structure is specific to the linux-system-roles.firewall role
    firewall:
      - zone: public
        service:
          - name: ssh    # Allows SSH traffic (port 22)
            state: present
          - name: http   # Allows HTTP traffic (port 80)
            state: present

        # Optional: Set the default zone (useful for security)
        set_default: true
        state: present

  # 2. Include the firewall role
  roles:
    - linux-system-roles.firewall
</screen>
          </example>
                 </section>
    </topic>