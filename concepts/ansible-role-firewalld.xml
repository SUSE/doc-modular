<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="ansible-role-firewalld"
 role="concept" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>About the firewall Linux system role</title>
    <meta name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
    <abstract>
      <para>
       The firewall Linux system role in Ansible is a pre-packaged and reusable set of tasks and defaults designed to configure and manage the &firewalld; service
       on &productname; 16.0 systems.
      </para>
    </abstract>
  </info>
  <para>You can use this role to:</para>
  <itemizedlist>
  <listitem><para>Install and enable the &firewalld; service.</para></listitem>
  <listitem><para>Manage zones such as <literal>public</literal>, <literal>home</literal> or <literal>internal.</literal></para></listitem>
  <listitem><para>Add or remove services such as <literal>ssh</literal> to specific zones.</para></listitem>
  <listitem><para>Open or close ports, for example, <literal>8080</literal> or <literal>TCP</literal> for particular zones.</para></listitem>
  <listitem><para>Configure port forwarding and masquerading (NAT).</para></listitem>
  <listitem><para>Handle permanent and runtime configuration.</para></listitem>
    </itemizedlist>
<example><title>Reset firewall and enable SSH service</title>
<screen>
  ---
  - name: Erase existing config and enable ssh service
    hosts: managed_nodes
    become: true

    tasks:
      - name: reset firewall and enable SSH service
        vars:
          firewall:
            - previous: replaced
            - service: ssh
              state: enabled
        ansible.builtin.include_role:
          name: suse.linux_system_roles.firewall
        </screen>
<itemizedlist>
 <listitem><para><literal>previous: replaced</literal>: Resets the &firewalld; configuration by removing all existing user-defined settings.
<literal>previous</literal> is a <literal>string</literal> datatype and accepts value <literal>replaced</literal>.
 </para></listitem>
 <listitem><para><literal>service: ssh</literal>: Secure Shell (SSH) as the specific network traffic type to be managed.
<literal>service</literal> is a <literal>string</literal> datatype and accepts values <literal>ssh</literal>,<literal>http</literal>,<literal>tftp</literal>etc.
</para></listitem>
 <listitem><para><literal>state: enabled</literal>: Permanently opens the firewall for incoming SSH traffic.
  <literal>state</literal> is a <literal>string</literal> datatype and accepts values <literal>enabled</literal> or <literal>disabled</literal>.
</para></listitem>

</itemizedlist>
</example>
<example><title>Disable TFTP service</title>
<screen>
  ---
  - name: Disable TFTP service on managed nodes
    hosts: managed_nodes
    become: true

    tasks:
      - name: Configure firewall to disable TFTP service
        vars:
          firewall:
            - service: tftp
              state: disabled
        ansible.builtin.include_role:
          name: suse.linux_system_roles.firewall
</screen>
  <itemizedlist>
   <listitem><para><literal>service: tftp</literal>: Defines the Trivial File Transfer Protocol (TFTP) as the specific network service to be managed.
    <literal>service</literal> is a <literal>string</literal> datatype and accepts values <literal>ssh</literal>,<literal>http</literal><literal>tftp</literal>etc.
  </para></listitem>
   <listitem><para><literal>state: disabled</literal>: Permanently block all incoming network traffic related to <literal>tftp</literal>.
    <literal>state</literal> is a <literal>string</literal> datatype and accepts values <literal>enabled</literal> or <literal>disabled</literal>
  </para></listitem>

  </itemizedlist>
  </example>
<para>For more details about all the variables in the firewall Linux system role,
  refer to the specific <literal>README.md</literal> file on the control node:</para>
  <screen>/usr/share/ansible/collections/ansible_collections/suse/linux_system_roles/docs</screen>
</topic>