<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="ansible-role-ha-cluster"
 role="concept" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>hacluster</title>
    <meta name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
    <abstract>
      <para>
      This role automates the entire lifecycle of TLS or SSL certificates, including both issuance and renewal.
        </para>
    </abstract>
  </info>
  <section xml:id="hacluster-role-variables">
  <title> certificate role variables</title>
  <para>Instead of a single and a standardized set of variables, the role uses several distinct variable groups to handle different aspects of certificate management. </para>
<itemizedlist>
  <listitem>
    <para>
<literal>certificate_requests</literal>: is the most important variable group. It is a list of dictionaries, where each dictionary defines the details for a single certificate you want to create or manage.
This is where you specify the domain, subject alternative names, key size, and other core certificate details.
The default is <literal>[]</literal>.
</para>
  </listitem>
  <listitem>
    <para>
 <literal>certificate_wait</literal>: controls whether an Ansible task should pause and wait for a certificate to be successfully issued by a Certificate Authority (CA) before proceeding.
  The default value is <literal>true</literal>, which means that that subsequent tasks in your playbook like configuring a web server does not run until the certificate is available, preventing errors caused by missing files.
</para>
  </listitem>
    </itemizedlist>
   <example><title>A hacluster playbook example </title>
    <para> This playbook:</para>
    <itemizedlist>
     <listitem>
      <para>Sets up a two-node Pacemaker cluster using the <literal>ha_cluster</literal> role.</para>
     </listitem>
     <listitem>
      <para>Defines a cluster with a unique name.</para>
     </listitem>
     <listitem>
      <para>Adds the two specified nodes to the cluster.</para>
     </listitem>
     <listitem>
      <para>Configure the cluster to manage fencing and resource promotion.</para>
     </listitem>
    </itemizedlist>
  <screen>
    - name: Configure a two-node Pacemaker cluster
    hosts: node1, node2
    become: true
    gather_facts: false

    vars:
      ha_cluster_cluster_name: my-cluster
      ha_cluster_nodes:
        - name: node1
          ha_cluster_node_id: 1
        - name: node2
          ha_cluster_node_id: 2
      ha_cluster_manage_fencing: true
      ha_cluster_resource_defaults:
        - parameter: resource-stickiness
          value: 1
        - parameter: migration-threshold
          value: 1

    roles:
      - name: linux-system-roles.ha_cluster  </screen>
</example>
</section>
</topic>
