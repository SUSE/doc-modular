<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="ansible-role-mssql"
 role="concept" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>mssql</title>
    <meta name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
    <abstract>
      <para>
     This role automates the installation and configuration of Microsoft SQL Server, ensuring it is ready for use.
     It also optimizes the underlying operating system by applying the<literal>mssql</literal> tuned profile to enhance performance.
        </para>
    </abstract>
  </info>
  <section xml:id="mssql-role-variables">
  <title> mssql role variables</title>
  <para>These variables apply to general SQL Server configuration. </para>
<itemizedlist>
  <listitem>
    <para>
<literal>mssql_accept_microsoft_odbc_driver_for_sql_server_eula</literal>: is a boolean when set to <literal>true</literal>,  automatically accepts the End-User License Agreement (EULA) for the Microsoft Open Database Connectivity (ODBC) Driver for SQL Server.
 The default is <literal>false</literal>.
</para>
  </listitem>
  <listitem>
    <para>
 <literal>mssql_accept_microsoft_cli_utilities_for_sql_server_eula</literal>: is a boolean when set to <literal>true</literal>, automatically accepts the EULA for the Microsoft command-line utilities for SQL Server.
 The default value is <literal>false</literal>.
</para>
  </listitem>
  <listitem>
    <para>
 <literal>mssql_accept_microsoft_sql_server_standard_eula</literal>: is a boolean when set to <literal>true</literal>, automatically accepts the EULA for the Microsoft SQL Server Standard Edition.
 The default value is <literal>false</literal>.
</para>
  </listitem>
  <listitem>
    <para>
 <literal>mssql_password</literal>: is a <literal>string</literal>variable used to set the strong system administrator password for a new Microsoft SQL Server instance during a non-interactive installation.
 This variable is crucial because a password for the system administrator user is required for the installation to complete successfully.
The default value is <literal>null</literal>.
</para>
  </listitem>
  <listitem>
    <para>
 <literal>mssql_edition</literal>:is a <literal>string</literal>variable used to specify which edition of Microsoft SQL Server to install.
 The default value is <literal>null</literal>. You can use any of the following values:</para>
 <itemizedlist><listitem><para><literal>Enterprise</literal></para></listitem>
  <listitem><para><literal>Standard</literal></para></listitem>
  <listitem><para><literal>Web</literal></para></listitem>
  <listitem><para><literal>Developer</literal></para></listitem>
  <listitem><para><literal>Express</literal></para></listitem>
  <listitem><para><literal>Valuation</literal></para></listitem>
  <listitem><para>A product key in the form <literal>#####-#####-#####-#####-#####</literal> , where <literal>#</literal> is a number or a letter.</para></listitem>
   </itemizedlist>
  </listitem>
  <listitem>
    <para>
 <literal>mssql_tools_versions</literal>: is a dictionary or map that defines the specific versions of command-line tools and related utilities to be installed alongside Microsoft SQL Server.
 It allows for precise control over the versions of tools like <literal>sqlcmd</literal>, <literal>bcp</literal> and the ODBC driver
</para>
  </listitem>
  </itemizedlist>
   <example><title>A mssql playbook example </title>
    <para> This playbook accept the necessary EULAs for SQL Server, installs the specified edition of SQL Server,
      sets the administrator <literal>sa</literal> password and ensures the mssql-server service is running.
    </para>
  <screen>
    - name: Configure MSSQL Server with minimum variables
    hosts: mssql_servers  # Targets hosts in your inventory
    become: true          # Use sudo for privileged tasks

    vars:
      # A strong password for the 'sa' administrator user is required
      mssql_password: "YourStrongPassword123!"

    roles:
      - name: mssql
        vars:
          # Accept the SQL Server EULA (required)
          mssql_accept_eula: true
          # Accept the EULAs for the CLI and ODBC driver (required)
          mssql_accept_microsoft_cli_utilities_for_sql_server_eula: true
          mssql_accept_microsoft_odbc_driver_for_sql_server_eula: true
          # Set the server edition to the free developer edition
          mssql_edition: Developer
  </screen>
      </example>
             </section>
</topic>