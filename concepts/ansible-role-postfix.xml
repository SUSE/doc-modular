<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="ansible-role-postfix"
 role="concept" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>postfix</title>
    <meta name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
    <abstract>
      <para>
      The postfix role is a collection of files and tasks designed to automate the installation and configuration of the Postfix Mail Transfer Agent (MTA) on a system.</para>
    </abstract>
  </info>
      <section xml:id="postfix-role-variables">
      <title> postfix role variables</title>
      <para> Some postfix variables include:
      </para>
    <itemizedlist>
      <listitem>
        <para>
<literal>postfix_conf</literal>: A dictionary that allows you to directly specify key-value pairs for the <literal>main.cf</literal> configuration file.
Instead of having a separate variable for every possible postfix setting, <literal>postfix_conf</literal>  provides a flexible way to manage any parameter you need to change.
Keys not supported by the installed postfix are ignored. The default is empty <literal>{}</literal>.
</para>
      </listitem>
      <listitem>
        <para>
     <literal>postfix_files</literal>: Is a list of dictionaries used to manage various files required by postfix such as,lookup tables and configuration files that are separate from <literal>main.cf</literal>.
       </para>
      </listitem>
      <listitem>
        <para>
          <literal>postfix_check</literal>: Is a boolean that controls whether the postfix check command runs to validate configuration changes before the postfix service starts or reloads.
          This is a safety measure to prevent the service from failing due to a syntax error in the configuration.
          The default value is <literal>true</literal>.
          </para>
      </listitem>
      <listitem>
        <para>
          <literal>postfix_backup</literal>: Is a boolean that controls whether the Ansible role creates a single backup copy of the <literal>main.cf</literal>
          configuration file before making any changes. This backup is typically named something like <literal>main.cf.backup</literal>.
          The default value is <literal>false</literal>.
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>postfix_backup_multiple</literal>:Is a boolean that determines whether the Ansible role creates a timestamped backup of the <literal>main.cf</literal> configuration file before making changes.
          Unlike a simple single backup, this method keeps multiple historical copies. The default value is <literal>true</literal>.
          This setting overrides the <literal>postfix_backup</literal> variable. If you want to create a single, non-timestamped backup, you must set <literal>postfix_backup_timestamped</literal> to <literal>false</literal>.
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>postfix_manage_firewall</literal>: Is a boolean that controls whether the Ansible role should automatically manage firewall rules for the postfix service.
          The default value is <literal>false</literal>.
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>postfix_manage_selinux</literal>: Is a boolean that determines whether an Ansible role should manage &selnx; booleans to allow postfix to function properly.
          The default value is <literal>false</literal>.
        </para>
      </listitem>
         </itemizedlist>
        </section>
         <section xml:id="postfix-playbook-examples">
          <title>Postfix playbook examples</title>
            <example>
            <title>Install and enable postfix to configure <literal>relay_domains=$mydestination</literal></title>
                <screen>
                  - name: Manage postfix
                    hosts: all
                    vars:
                      postfix_conf:
                        relay_domains: $mydestination
                    roles:
                      - linux-system-roles.postfix
          </screen>
          </example>
          <example>
            <title>Install and enable postfix to not run <literal>postfix_check</literal> before restarting postfix</title>
           <screen>
            - name: Manage postfix with no check
            hosts: all
            vars:
              postfix_check: false
            roles:
              - linux-system-roles.postfix
          </screen>
          </example>
         </section>

    </topic>