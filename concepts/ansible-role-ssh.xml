<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="ansible-role-ssh"
 role="concept" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>About the SSH Linux system role</title>
    <meta name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
    <abstract>
      <para>
       The SSH Linux system role in Ansible automates the configuration and management of the Secure Shell (SSH) service on &productname; 16.0 systems.
      </para>
    </abstract>
  </info>
  <para>You can use this role to:</para>
  <itemizedlist>
  <listitem><para>Enforce security best practices on the SSH daemon.</para></listitem>
  <listitem><para>Set default client options for all managed users.</para></listitem>
  <listitem><para>Deploy public keys for specific users to enable passwordless access.</para></listitem>
  <listitem><para>Define which users or groups are permitted to log in via SSH.</para></listitem>
   </itemizedlist>
<example><title>Manage SSH clients</title>
<screen>
---
- name: Manage ssh clients
  hosts: managed_nodes
  become: true

  vars:
      ssh_user: root
      ssh:
        Compression: true
        # wokeignore:rule=master
        ControlMaster: auto
        ControlPath: ~/.ssh/.cm%C
        Match:
          - Condition: "final all"
            GSSAPIAuthentication: true
        Host:
          - Condition: example
            Hostname: example.com
            User: user1
      ssh_ForwardX11: false

  tasks:
    - name: manage SSH clients
      ansible.builtin.include_role:
        name: suse.linux_system_roles.ssh
</screen>
<itemizedlist>
 <listitem><para><literal>ssh_user</literal>: is a role specific variable used to determine the scope of the SSH client configuration being deployed.
  The default value is <literal>null</literal> or undefined, which means the role is configured to manage the global, system-wide SSH client configuration, which is located at <filename>/etc/ssh/ssh_config</filename> on the managed node.</para></listitem>
    <listitem><para><literal>ssh_ForwardX11</literal>: controls whether X11 forwarding should be automatically enabled when establishing an SSH connection to a remote host.
It determines if the graphical interface environment (X Window System) of the remote host should be tunneled securely back to the local client machine, allowing the user to run remote graphical applications.
It is a <literal>Boolean</literal> datatype with values <literal>yes</literal> and <literal>no</literal>.</para></listitem>
</itemizedlist>
</example>

<para>For more details about all the variables in the SSH Linux system role,
  refer to the specific <literal>README.md</literal> file on the control node:</para>
  <screen>/usr/share/ansible/collections/ansible_collections/suse/linux_system_roles/docs</screen>
</topic>