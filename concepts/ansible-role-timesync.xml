<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="ansible-role-timesync"
 role="concept" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>About the time synchronization Linux system role</title>
    <meta name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
    <abstract>
      <para>
       The time synchronization Linux system role in Ansible automates the configuration and enforcement of system time synchronization on managed Linux hosts.
       NTP and PTP are essential standards used to synchronize computer clocks across a network. Accurate time synchronization is crucial because many critical network services rely on precise time to function correctly.
      </para>
    </abstract>
  </info>
  <para>You can use this role to:</para>
  <itemizedlist>
  <listitem><para>Install and configure the preferred time synchronization service such as Chrony or NTPD.</para></listitem>
  <listitem><para>Set the list of reliable time servers like NTP peers and servers the system should synchronize with.</para></listitem>
  <listitem><para>Ensure the system uses the desired synchronization method.</para></listitem>
  <listitem><para>Helps ensure that systems are compliant with security requirements that mandate accurate logging and synchronized authentication, for example, Kerberos.</para></listitem>
  </itemizedlist>
<example><title>Install and configure NTP to synchronize the system clock with managed nodes</title>
<screen>
---
- name: Manage timesync
  hosts: managed_nodes
  become: true
  gather_facts: true

  vars:
    timesync_ntp_servers:
      - hostname: ntp.example.com
        iburst: true
      - hostname: time.example.com
        iburst: true
      - hostname: sync.example.com
        iburst: true

  tasks:
    - name: Manage timesync
        ansible.builtin.include_role:
        name: suse.linux_system_roles.timesync
</screen>
<itemizedlist>
 <listitem><para><literal>timesync_ntp_servers</literal>: is a primary mechanism for an administrator to specify which external network time sources (NTP servers) the managed Linux host should use for clock synchronization.
It is a list of dictionaries.The default is an empty list<literal>[]</literal>.
 Each dictionary entry within the <literal>timesync_ntp_servers</literal>list defines a single time source and its desired configuration options. In this example, <literal>hostname</literal> is a
required <literal>string</literal> datatype and <literal>iburst</literal> is an optional <literal>Boolean</literal> datatype.
</para></listitem>
</itemizedlist>
</example>
<example><title>Install and configure linuxptp</title>
<screen>
---
- name: Manage timesync in PTP domain 0, interface eth0
  hosts: managed_nodes
  become: true
  gather_facts: true

  vars:
    timesync_ptp_domains:
      - number: 0
        interfaces: [eth0]

  tasks:
    - name: Manage linuxptp
        ansible.builtin.include_role:
        name: suse.linux_system_roles.timesync
</screen>
  <itemizedlist>
   <listitem><para><literal>timesync_ptp_domains</literal>: configures Precision Time Protocol (PTP) synchronization
It is a list of dictionaries. Default is an empty list <literal>[]</literal>. In this example, <literal>number</literal>
is a required <literal>string</literal> datatype and <literal>interfaces</literal> are optional <literal>list of strings</literal> data types.</para></listitem>
     </itemizedlist>
  </example>
<para>For more details about all the variables in the time synchronization Linux system role,
  refer to the specific <literal>README.md</literal> file on the control node:</para>
  <screen>/usr/share/ansible/collections/ansible_collections/suse/linux_system_roles/docs</screen>
</topic>