<?xml version='1.0' encoding='UTF-8'?><article xmlns="http://docbook.org/ns/docbook" version="5.2" xml:id="sles-pxe-server-setup" xml:lang="de">
  <info>
    <title xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude">Einrichten eines PXE-Startservers unter <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase></title>
    <revhistory xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="rh-sles-pxe-server-setup">
      <revision>
        <date>2025-11-04</date>
        <revdescription>
          <para>
              Erste Version
            </para>
        </revdescription>
      </revision>
    </revhistory>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/> <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" name="architecture">
      <phrase>AMD64/Intel 64</phrase>
      <phrase>AArch64</phrase>
    </meta> <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" name="productname" its:translate="no">
      <productname version="16.0">
        <phrase>
          <phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase>
        </phrase>
      </productname>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" name="title" its:translate="yes">Einrichten eines PXE-Startservers unter <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase></meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" name="description" its:translate="yes">Konfigurieren eines PXE-Startservers mit GRUB 2-, nginx- und Agama-Installationsprogramm-Images</meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" name="social-descr" its:translate="yes">Einrichten eines PXE-Startservers mit GRUB 2 und Agama ein</meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" name="category" its:translate="no">
      <phrase>Deployment &amp; Upgrade</phrase>
    </meta> <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" name="task" its:translate="no">
      <phrase>Configuration</phrase>
      <phrase>Installation</phrase>
    </meta> <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" name="series" its:translate="no">Products &amp; Solutions</meta>
    <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude">
      <dm:bugtracker>
        <dm:url>https://bugzilla.suse.com/enter_bug.cgi</dm:url>
        <dm:component>Documentation</dm:component>
        <dm:product>SUSE Linux Enterprise Server 16.0</dm:product>
        <dm:assignee>souvik.sarkar@suse.com</dm:assignee>
      </dm:bugtracker>
      <dm:translation>yes</dm:translation>
    </dm:docmanager>
    <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude">
      <variablelist>
        <varlistentry>
          <term>WAS?</term>
          <listitem>
            <para>
                Richten Sie einen PXE-Startserver mit Unterstützung für UEFI Secure Boot und das Agama-Installationsprogramm ein.
              </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>WARUM?</term>
          <listitem>
            <para>
                Automatisieren und optimieren Sie die Installation mehrerer <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Systeme über das Netzwerk.
              </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>AUFWAND</term>
          <listitem>
            <para>
                Ein System- oder Netzwerkadministrator benötigt in der Regel 30 bis 45 Minuten, um diesen Artikel zu lesen und zu verstehen.
              </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>ZIEL</term>
          <listitem>
            <para>
                Ein funktionierender PXE-Server, der mehrere Architekturen im Agama-Installationsprogramm starten kann.
              </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>ANFORDERUNGEN</term>
          <listitem>
            <itemizedlist>
              <listitem>
                <para>
                    Ein <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-System mit Administratorrechten
                  </para>
              </listitem>
              <listitem>
                <para>
                    Internetverbindung zum Abrufen von ISO-Images
                  </para>
              </listitem>
              <listitem>
                <para>
                    Konfiguration statischer IP-Adressen für den PXE-Server
                  </para>
              </listitem>
            </itemizedlist>
          </listitem>
        </varlistentry>
      </variablelist>
    </abstract>
  </info>
  <section role="concept" xml:lang="de" version="5.2" xml:id="sles-pxe-server-introduction">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Übersicht über den PXE-Start mit <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase></title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        Der PXE-Start ermöglicht es Rechnern, über das Netzwerk in einer Installations- oder Laufzeitumgebung ohne lokalen Speicher zu starten. In diesem Abschnitt wird erklärt, wie PXE in <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> Agama und Live-Installationsprogramm-Images funktioniert, wobei der Fokus auf GRUB 2 liegt.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-what-is">
      <title>Was ist der PXE-Start?</title>
      <para>
      PXE (Preboot Execution Environment) ist eine Methode, mit der Systeme Bootloader und Betriebssystem-Installationsprogramme mithilfe von DHCP und TFTP oder HTTP auf einem Netzwerkserver abrufen können. Es wird häufig für die Bereitstellung von Rechnern ohne physische Medien oder vorinstallierte Betriebssysteme verwendet.
    </para>
    </section>
    <section xml:id="sles-pxe-server-benefits">
      <title>Vorteile des PXE-Starts</title>
      <para>
      Der PXE-Start vereinfacht die Bereitstellung, da kein lokales Installationsmedium oder keine manuelle Einrichtung erforderlich sind. Er ermöglicht Folgendes:
    </para>
      <itemizedlist>
        <listitem>
          <para>
          Unbeaufsichtigte Installation vieler Systeme über das Netzwerk
        </para>
        </listitem>
        <listitem>
          <para>
          Zentralisierte Verwaltung von Installationsprogrammversionen und Startkonfigurationen
        </para>
        </listitem>
        <listitem>
          <para>
          Unterstützung für verschiedene Architekturen und Firmware-Typen, einschließlich UEFI Secure Boot
        </para>
        </listitem>
        <listitem>
          <para>
          Dynamische Auswahl von Installationsprogrammen oder Installationsparametern mithilfe der GRUB 2-Menüs
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-how-it-works">
      <title>Funktionsweise des PXE-Starts in <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase></title>
      <para>
      Beim PXE-Start in <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> wird GRUB 2 als Bootloader und das Agama-Installationsprogramm als Installationsoberfläche verwendet. Bootloader und Installationsdateien werden über das Netzwerk mithilfe von HTTP oder TFTP bereitgestellt, wobei GRUB 2 den Kernel, Initrd und das Live-Image abruft. PXE-Clients können eine Vielzahl an Firmware (einschließlich der gängigsten wie BIOS oder UEFI), ausführbaren Bootloader-Dateien oder Image-Formaten verwenden, je nach den Anforderungen ihrer Architekturen wie AMD64/Intel 64, AArch64, ppc64le und s390x. Darüber hinaus müssen sie sowohl in IPv4- als auch in IPv6-Netzwerken funktionieren.
    </para>
      <para>
      Der Bootloader übergibt Kernel-Parameter wie <literal>root=live:</literal>, um das squashfs-basierte Root-Dateisystem aus einem Live-ISO-Image zu laden, wodurch die Agama-Oberfläche entweder lokal oder als Webservice für eine Remote-Web-Benutzeroberfläche gestartet wird.
    </para>
      <section xml:id="sles-pxe-server-backward-compatibility-with-sle-15">
        <title>Abwärtskompatibilität mit <phrase><phrase os="sles">SLES</phrase></phrase> 15.x</title>
        <para>
        Die Informationen in diesem Artikel beziehen sich hauptsächlich auf <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> 16.0 und höher. Er konzentriert sich auf PXE-Start-Workflows, die in das Agama-Installationsprogramm integriert werden und auf Live-Installations-Images basieren. Im Kontext und Umfang dieses Artikels unterscheiden sich <phrase><phrase os="sles">SLES</phrase></phrase> 16.0 und höhere Versionen in den folgenden Punkten von <phrase><phrase os="sles">SLES</phrase></phrase> 15.x:
      </para>
        <variablelist>
          <varlistentry>
            <term>Installationsprogramm</term>
            <listitem>
              <para>
              Verwendet <literal>dracut</literal> und Agama anstelle von <literal>linuxrc</literal> und YaST.
            </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>DHCP-Server</term>
            <listitem>
              <para>
              Die Verwendung von ISC-DHCP wird eingestellt (Ende der Lebensdauer 2022). Verwenden Sie für einen DHCP-Server stattdessen entweder Kea oder dnsmasq.
            </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Boot-Parameter</term>
            <listitem>
              <para>
              Verwendet den Parameter <literal>root=live:</literal>, um das Agama-Installationsprogramm-Image und den optionalen Parameter <literal>inst.install_url=</literal> für das nicht standardmäßige Installations-Repository anstelle des Parameters <literal>install=</literal> zu laden.
            </para>
            </listitem>
          </varlistentry>
        </variablelist>
        <para>
        Die Bootloader-Auswahl (GRUB 2, pxelinux usw.) bleibt flexibel und ist nicht versionsabhängig.
      </para>
      </section>
      <section xml:id="sles-pxe-server-different-possible-setups">
        <title>Verschiedene mögliche Einrichtungen und Schritte</title>
        <para>
        Dieser Artikel enthält obligatorische Einrichtungsschritte und optionale oder alternative Konfigurationen. Befolgen Sie nur die Abschnitten, die für Ihre Bereitstellung relevant sind, und überspringen Sie alle Alternativen, die nicht für Ihre Bereitstellung gelten.
      </para>
        <variablelist>
          <varlistentry>
            <term>Obligatorisch</term>
            <listitem>
              <para>
              Aufgaben wie das Installieren von Komponenten, das Vorbereiten des Installationsprogramm-Images, das Konfigurieren von GRUB 2 und das Validieren des Servers müssen bei allen Einrichtungen abgeschlossen werden.
            </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Dateizustellungsmethode</term>
            <listitem>
              <para>
              Ein HTTP-Server (mit Agama empfohlen) wie <literal>nginx</literal> und/oder ein TFTP-Server wie <literal>tftp</literal> oder. <literal>dnsmasq</literal>
            </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>DHCP-Server</term>
            <listitem>
              <para>
              Wählen Sie entweder Kea oder dnsmasq aus.
            </para>
              <note>
                <title>Einschränkungen und Funktionen der von Ihnen ausgewählten Methode</title>
                <itemizedlist>
                  <listitem>
                    <para>
                    Verwenden Sie <emphasis role="strong">Kea</emphasis> – den neuen DHCP-Server von ISC – als modernen Ersatz für ISC DHCP. Weitere Informationen zu Kea finden Sie unter <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.isc.org/kea/"></link>. Den Hinweis zum Ende der Lebensdauer von ISC-DHCP finden Sie unter.<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.isc.org/dhcp/"></link> Kea ist ein DHCP-Server und benötigt eine separate TFTP-Serversoftware. Der Kea-DHCP-Server unterstützt Optionen für TFTP bzw. den PXE-Start über IPv4 und IPv6 sowie für den HTTP-Start über IPv4. Der HTTP-Start über IPv6 setzt voraus, dass der DHCPv6-Server die <literal>Vendor Class Option</literal> (siehe <literal>RFC3315, Section 22.16</literal>), bei der angenommen wird, dass sie <quote>von einem Client zur Identifizierung des Herstellers</quote> verwendet wird, wieder an den Client senden kann und wird derzeit nicht unterstützt.
                  </para>
                  </listitem>
                  <listitem>
                    <para><emphasis role="strong">dnsmasq</emphasis> als Kombination aus einem DNS-Server, einem DHCP-Server und einem TFTP-Server. Sie können es verwenden, um den Bootloader, den Kernel, initrd (und andere Dateien) per TFTP bereitzustellen. Weitere Informationen zu dnsmasq finden Sie unter <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://thekelleys.org.uk/dnsmasq/doc.html"></link>. Der dnsmasq-DHCP-Server unterstützt Optionen für TFTP bzw. den PXE-Start über IPv4 und IPv6 sowie für den HTTP-Start über IPv4. Der HTTP-Start über IPv6 setzt voraus, dass der DHCPv6-Server die <literal>Vendor Class Option</literal> (siehe <literal>RFC3315, Section 22.16</literal>), bei der angenommen wird, dass sie <quote>von einem Client zur Identifizierung des Herstellers</quote> verwendet wird, wieder an den Client senden kann und wird derzeit nicht unterstützt.
                  </para>
                  </listitem>
                </itemizedlist>
              </note>
            </listitem>
          </varlistentry>
        </variablelist>
        <figure xml:id="sles-pxe-server-setup-workflow">
          <title>Beispiel für einen Workflow zur Einrichtung eines PXE-Servers</title>
          <mediaobject>
            <imageobject role="html">
              <imagedata fileref="sles-pxe-server-setup-workflow.svg"/>
            </imageobject>
            <imageobject role="fo">
              <imagedata fileref="sles-pxe-server-setup-workflow.svg" width="85%"/>
            </imageobject>
            <textobject role="description">
              <phrase>Workflow-Diagramm der Einrichtung eines PXE-Startservers</phrase>
            </textobject>
          </mediaobject>
        </figure>
      </section>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-prepare-network">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Vorbereiten des Netzwerks für PXE-Startdienste</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        Dieses Modul beschreibt die Anforderungen an die Netzwerkinfrastruktur für die Bereitstellung von PXE-Startdiensten unter <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-network-configuration-introduction">
      <title>Einführung</title>
      <para>
      Ein PXE-Server besteht aus drei Servern: einem DHCP-Server, der die Adresse und den Speicherort der Startdatei (Bootloader) bereitstellt, und einem TFTP- und/oder HTTP-Server zum Abrufen der Dateien. Darüber hinaus kann es einen DNS-Server, einen NTP-Server und einen Router mit IPv6-Unterstützung geben. Diese sind in der Regel in einem Produktionsnetzwerk vom PXE-Server getrennt. Ein PXE-Server, auf dem <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> ausgeführt wird, benötigt möglicherweise auch eine spezielle Netzwerkschnittstellen-Einrichtung, bestimmte dauerhafte Regeln, die der Firewall hinzugefügt wurden, und einige Berechtigungen in <systemitem>SELinux</systemitem>. Dieser Abschnitt zeigt ein Beispielnetzwerk mit geeigneten IP-Bereichen und den notwendigen Regeln für die Firewall und SELinux.
    </para>
    </section>
    <section xml:id="sles-pxe-server-network-configuration">
      <title>Annahmen und Beispielkonfiguration eines Netzwerks</title>
      <para>
      In diesem Artikel wird von Folgendem ausgegangen:
    </para>
      <itemizedlist>
        <listitem>
          <para>
          Der PXE-Server wird auf der <literal>eno1</literal>-Netzwerkschnittstelle mit der folgenden Netzwerkkonfiguration ausgeführt:
        </para>
          <table frame="all">
            <title>Beispielkonfiguration eines PXE-Netzwerks</title>
            <tgroup cols="4">
              <colspec colname="c1"/>
              <colspec colname="c2"/>
              <colspec colname="c3"/>
              <colspec colname="c4"/>
              <thead>
                <row>
                  <entry/>
                  <entry>IPv4</entry>
                  <entry>IPv6</entry>
                  <entry>DNS-Name</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>PXE-Netzwerk</entry>
                  <entry>192.168.1.0/24</entry>
                  <entry>2001:db8:0:1::/64</entry>
                  <entry>example.net</entry>
                </row>
                <row>
                  <entry>PXE-Server</entry>
                  <entry>192.168.1.200</entry>
                  <entry>2001:db8:0:1::200</entry>
                  <entry>pxe.example.net</entry>
                </row>
                <row>
                  <entry>PXE-Gateway</entry>
                  <entry>192.168.1.1</entry>
                  <entry>2001:db8:0:1::1</entry>
                  <entry/>
                </row>
                <row>
                  <entry>DNS-Server</entry>
                  <entry>192.168.1.200</entry>
                  <entry>2001:db8:0:1::200</entry>
                  <entry/>
                </row>
                <row>
                  <entry>NTP-Server</entry>
                  <entry>192.168.1.1</entry>
                  <entry>2001:db8:0:1::1</entry>
                  <entry/>
                </row>
              </tbody>
            </tgroup>
          </table>
        </listitem>
        <listitem>
          <para>
          Standardmäßig sind Router, NTP- und DNS-Server extern und werden auf einem anderen Computer ausgeführt. Dieser Artikel enthält einige Hinweise, behandelt jedoch nicht deren vollständige Konfiguration.
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-firewall-selinux">
      <title>Konfigurieren der Netzwerkschnittstelle, der Firewall und von <systemitem>SELinux</systemitem> für PXE-Dienste</title>
      <para>
      Konfigurieren Sie die Netzwerkschnittstelle und die Firewall so, dass die vom PXE-Server benötigten Netzwerkdienste zugelassen werden. Passen Sie die <systemitem>SELinux</systemitem>-Einstellungen an, um Installationstests zu ermöglichen und dauerhafte lokale Richtlinien zu definieren.
    </para>
      <procedure>
        <step>
          <para>
          Überprüfen Sie die PXE-Netzwerkschnittstelle und weisen Sie sie der entsprechenden firewalld-Zone zu.
        </para>
          <substeps>
            <step>
              <para>
              Überprüfen Sie die aktuell aktiven Zonen und die ihnen zugewiesenen Schnittstellen:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --get-active-zones</command>
              </screen>
            </step>
            <step>
              <para>
              Wenn <literal>eno1</literal> der Zone <literal>public</literal> nicht zugewiesen ist, weisen Sie es zu:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --zone=public --change-interface=eno1</command>
              </screen>
            </step>
            <step>
              <para>
              Stellen Sie sicher, dass die Schnittstellenzuweisung auch bei Neustarts beibehalten wird:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --permanent --zone=public --add-interface=eno1</command>
              </screen>
            </step>
          </substeps>
        </step>
        <step>
          <para>
          Konfigurieren Sie die Firewall für den DNS-Dienstzugriff.
        </para>
          <substeps>
            <step>
              <para>
              Lassen Sie den DNS-Dienst für die aktuelle Sitzung zu:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --zone=public --add-service=dns</command>
              </screen>
            </step>
            <step>
              <para>
              Stellen Sie sicher, dass die Änderung dauerhaft ist.
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --permanent --zone=public --add-service=dns</command>
              </screen>
            </step>
          </substeps>
        </step>
        <step>
          <para>
          Konfigurieren Sie die Firewall für den NTP-Dienstzugriff.
        </para>
          <substeps>
            <step>
              <para>
              Lassen Sie den NTP-Dienst für die aktuelle Sitzung zu:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --zone=public --add-service=ntp</command>
              </screen>
            </step>
            <step>
              <para>
              Stellen Sie sicher, dass die Änderung dauerhaft ist.
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --permanent --zone=public --add-service=ntp</command>
              </screen>
            </step>
          </substeps>
        </step>
        <step>
          <para>
          Konfigurieren Sie die Firewall für den DHCP-Dienstzugriff (IPv4).
        </para>
          <substeps>
            <step>
              <para>
              Lassen Sie den DHCP-Dienst für die aktuelle Sitzung zu:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --zone=public --add-service=dhcp</command>
              </screen>
            </step>
            <step>
              <para>
              Stellen Sie sicher, dass die Änderung dauerhaft ist.
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --permanent --zone=public --add-service=dhcp</command>
              </screen>
            </step>
          </substeps>
        </step>
        <step>
          <para>
          Konfigurieren Sie die Firewall für den DHCPv6-Dienstzugriff.
        </para>
          <substeps>
            <step>
              <para>
              Lassen Sie den DHCPv6-Dienst für die aktuelle Sitzung zu:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --zone=public --add-service=dhcpv6</command>
              </screen>
            </step>
            <step>
              <para>
              Stellen Sie sicher, dass die Änderung dauerhaft ist.
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --permanent --zone=public --add-service=dhcpv6</command>
              </screen>
            </step>
          </substeps>
        </step>
        <step>
          <para>
          Konfigurieren Sie die Firewall für den TFTP-Dienstzugriff.
        </para>
          <substeps>
            <step>
              <para>
              Lassen Sie den TFTP-Dienst für die aktuelle Sitzung zu:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --zone=public --add-service=tftp</command>
              </screen>
            </step>
            <step>
              <para>
              Stellen Sie sicher, dass die Änderung dauerhaft ist.
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --permanent --zone=public --add-service=tftp</command>
              </screen>
            </step>
          </substeps>
        </step>
        <step>
          <para>
          Konfigurieren Sie die Firewall für den HTTP-Dienstzugriff.
        </para>
          <substeps>
            <step>
              <para>
              Lassen Sie den HTTP-Dienst für die aktuelle Sitzung zu:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --zone=public --add-service=http</command>
              </screen>
            </step>
            <step>
              <para>
              Stellen Sie sicher, dass die Änderung dauerhaft ist.
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --permanent --zone=public --add-service=http</command>
              </screen>
            </step>
          </substeps>
        </step>
        <step>
          <para>
          Konfigurieren Sie die Firewall für den HTTPS-Dienstzugriff.
        </para>
          <substeps>
            <step>
              <para>
              Lassen Sie den HTTPS-Dienst für die aktuelle Sitzung zu:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --zone=public --add-service=https</command>
              </screen>
            </step>
            <step>
              <para>
              Stellen Sie sicher, dass die Änderung dauerhaft ist.
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>firewall-cmd --permanent --zone=public --add-service=https</command>
              </screen>
            </step>
          </substeps>
        </step>
        <step>
          <para>
          Deaktivieren Sie <systemitem>SELinux</systemitem> vorübergehend für Einrichtungstests.
        </para>
          <substeps>
            <step>
              <para>
              Legen Sie für <systemitem>SELinux</systemitem> den permissiven Modus fest:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>setenforce 0</command>
              </screen>
            </step>
            <step>
              <para>
              Überprüfen Sie den <systemitem>SELinux</systemitem>-Status:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>sestatus</command>
              </screen>
            </step>
          </substeps>
        </step>
        <step>
          <para>
          Generieren und installieren Sie lokale <systemitem>SELinux</systemitem>-Richtlinienmodule für PXE-bezogene Dienste.
        </para>
          <substeps>
            <step>
              <para>
              Erstellen und installieren Sie ein Modul für <literal>nginx</literal>:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>if test `ausearch -c 'nginx' --raw | wc -l` -gt 0 ; then</command>
              </screen> <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>  ausearch -c 'nginx' --raw | audit2allow -a -M local-nginx</command>
              </screen> <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>  semodule -i local-nginx.pp</command>
              </screen> <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>fi</command>
              </screen>
            </step>
            <step>
              <para>
              Erstellen und installieren Sie ein Modul für <literal>dnsmasq</literal>:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>if test `ausearch -c 'dnsmasq' --raw | wc -l` -gt 0 ; then</command>
              </screen> <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>  ausearch -c 'dnsmasq' --raw | audit2allow -a -M local-dnsmasq</command>
              </screen> <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>  semodule -i local-dnsmasq.pp</command>
              </screen> <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>fi</command>
              </screen>
            </step>
            <step>
              <para>
              Erstellen und installieren Sie ein Modul für <literal>in.tftpd</literal>:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>if test `ausearch -c 'in.tftpd' --raw | wc -l` -gt 0 ; then</command>
              </screen> <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>  ausearch -c 'in.tftpd' --raw | audit2allow -a -M local-tftpd</command>
              </screen> <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>  semodule -i local-tftpd.pp</command>
              </screen> <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>fi</command>
              </screen>
            </step>
          </substeps>
        </step>
        <step>
          <para>
          Aktivieren Sie den <systemitem>SELinux</systemitem>-Durchsetzungsmodus erneut.
        </para>
          <substeps>
            <step>
              <para>
              Legen Sie für <systemitem>SELinux</systemitem> den Durchsetzungsmodus fest:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>setenforce 1</command>
              </screen>
            </step>
            <step>
              <para>
              Überprüfen Sie den <systemitem>SELinux</systemitem>-Status:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>sestatus</command>
              </screen>
            </step>
          </substeps>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-firewall-selinux-summary">
      <title>Zusammenfassung</title>
      <para>
      Dieses Verfahren stellte sicher, dass die Netzwerkschnittstelle, die Firewall und die <systemitem>SELinux</systemitem>-Richtlinie des PXE-Servers für einen sicheren und funktionsfähigen Betrieb ordnungsgemäß konfiguriert wurden.
    </para>
      <itemizedlist>
        <listitem>
          <para>
          Die PXE-Bereitstellungsschnittstelle (in diesem Beispiel <filename>eno1</filename>) wurde überprüft und der firewalld-Zone <literal>public</literal> zugewiesen.
        </para>
        </listitem>
        <listitem>
          <para>
          Die erforderlichen Firewall-Dienste für den PXE-Betrieb, einschließlich <literal>dns</literal><literal>ntp</literal>, einschließlich<literal>dhcp</literal>,<literal>dhcpv6</literal>, <literal>tftp</literal><literal>http</literal> und<literal>https</literal>, wurden geöffnet.
        </para>
        </listitem>
        <listitem>
          <para>
          Legen Sie <systemitem>SELinux</systemitem> vorübergehend auf den Modus <literal>permissive</literal> fest, um das Testen von Diensten zu erleichtern und AVC-Verweigerungen zu protokollieren.
        </para>
        </listitem>
        <listitem>
          <para>
          Mit <command>ausearch</command> und<command>audit2allow</command> wurden benutzerdefinierte SELinux-Richtlinienmodule für Dienste wie <systemitem>nginx</systemitem>, <systemitem>dnsmasq</systemitem> und <systemitem>in.tftpd</systemitem> generiert und installiert.
        </para>
        </listitem>
        <listitem>
          <para>
          <systemitem>SELinux</systemitem> wurde wieder auf den Modus <literal>enforcing</literal> festgelegt, um das System für die Produktion zu schützen.
        </para>
        </listitem>
      </itemizedlist>
      <para>
      Nach Abschluss dieser Schritte ist der PXE-Server sicher konfiguriert und bereit, Client-Computer über das Netzwerk mit IPv4 oder IPv6 bereitzustellen.
    </para>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-install-components">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Installieren der erforderlichen PXE-Serverkomponenten</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird erklärt, wie Sie die erforderlichen Pakete installieren, um den PXE-Start unter <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> zu unterstützen, einschließlich GRUB 2-, DHCP-, TFTP- und/oder HTTP-Komponenten.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-install-components-intro">
      <title>Einführung</title>
      <para>
      Um einen PXE-Startserver unter <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> zu konfigurieren, müssen Sie mehrere Dienste und Werkzeuge installieren. In Abhängigkeit von Ihrer Einrichtung benötigen Sie möglicherweise Folgendes:
    </para>
      <itemizedlist>
        <listitem>
          <para>
          Das <package>dnsmasq</package>-Paket bietet eine Kombination aus einem DNS-Server, einem TFTP-Server und einem DHCP-Server (DHCPv4 und DHCPv6) mit eingeschränkter Unterstützung für IPv6-Router Advertisement (RA). Es bietet Folgendes:
        </para>
          <itemizedlist>
            <listitem>
              <para>
              dnsmasq-DHCP-Server: Unterstützt die bedingte Bereitstellung von DHCP-Optionen je nach Anfrage und Client-Architektur für:
            </para>
              <itemizedlist>
                <listitem>
                  <para>
                  PXE-Startanforderungen mit DHCPv4 und DHCPv6
                </para>
                </listitem>
                <listitem>
                  <para>
                  HTTP-Startanforderungen mit DHCPv4
                </para>
                  <note>
                    <title>Beschränkungen von dnsmasq für den HTTP-Start über DHCPv6</title>
                    <para>
                    Derzeit unterstützt dnsmasq das Senden der erforderlichen DHCPv6-Option <literal>vendor-class</literal> nicht.
                  </para>
                  </note>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para>
              dnsmasq-TFTP-Server: Stellt Bootloader-Dateien, Kernel und initrd per TFTP beim PXE-Start bereit.
            </para>
            </listitem>
            <listitem>
              <para>
              dnsmasq-DNS-Server: Ermöglicht die rekursive Auflösung von Domainnamen und IP-Adressen für die Client-Firmware und <filename>/etc/resolv.conf</filename> im Installalationsprogramm/Betriebssystem.
            </para>
            </listitem>
            <listitem>
              <para>
              dnsmasq-IPv6-RA: Unterstützt das Senden von IPv6-RA, wenn der PXE-Server auch als Router fungiert (die Konfigurierbarkeit ist auf ein <quote>häufiges RA-Muster</quote> beschränkt).
            </para>
            </listitem>
          </itemizedlist>
        </listitem>
        <listitem>
          <para>
          Das <package>kea</package>-Paket ist ein DHCP-Server und ein Nachfolger des ISC-DHCP-Servers. Es unterstützt die bedingte Bereitstellung von DHCP-Optionen je nach Anfrage und Client-Architektur für:
        </para>
          <itemizedlist>
            <listitem>
              <para>
              PXE-Startanforderungen mit DHCPv4 und DHCPv6
            </para>
            </listitem>
            <listitem>
              <para>
              HTTP-Startanforderungen mit DHCPv4
            </para>
              <note>
                <title>Beschränkungen von Kea für den HTTP-Start über DHCPv6</title>
                <para>
                Derzeit unterstützt Kea das Senden der erforderlichen DHCPv6-Option <literal>vendor-class</literal> nicht. Weitere Informationen finden Sie unter <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://kea.readthedocs.io/en/latest/arm/dhcp6-srv.html#id4"></link>.
              </para>
              </note>
            </listitem>
          </itemizedlist>
        </listitem>
        <listitem>
          <para>
          Ein TFTP-Server bietet die Bootloader-Dateien, den Kernel und initrd per TFTP, während der PXE-Start mit Kea vom <package>tftp</package>-Paket bereitgestellt wird und für den HTTP-Start nicht erforderlich ist. Wenn Sie <package>dnsmasq</package> verwenden, benötigen Sie das <package>tftp</package>-Paket nicht.
        </para>
        </listitem>
        <listitem>
          <para>
          Ein Webserver wie das <package>nginx</package>-Paket, um Installationsprogramm-Images per HTTP bereitzustellen.
        </para>
          <note>
            <title>Notwendigkeit für HTTP-Server</title>
            <para>
            Ein HTTP/HTTPS-Server wie nginx ist fast immer erforderlich. Seine Verwendung geht über den reinen HTTP-Start hinaus. Sie benötigen ihn möglicherweise insbesondere bei den folgenden Szenarien:
          </para>
            <itemizedlist>
              <listitem>
                <para>
                Er ist eine Grundvoraussetzung für den HTTP-Start.
              </para>
              </listitem>
              <listitem>
                <para>
                Er wird für die Bereitstellung von <filename>squashfs.img</filename> empfohlen. Sie können <literal>root=live:tftp://.../squashfs.img</literal> in der Startbefehlszeile verwenden.
              </para>
              </listitem>
              <listitem>
                <para>
                Es wird auch für die Bereitstellung von RPMs für Agama im Startbefehlszeilen-Parameter <literal>inst.install_url=http://.../install/</literal> in einer Datei <filename>SLES-16.0-Full-*.inline.iso</filename> zusammen mit Installationsprofilen und anderen Dateien für die unbeaufsichtigte Installation empfohlen.
              </para>
              </listitem>
            </itemizedlist>
          </note>
        </listitem>
        <listitem>
          <para>
          Die GRUB 2-Bootloader-Pakete bieten einen Netzwerkstart für unterstützte Architekturen und Methoden. Die AMD64/Intel 64-Architektur bietet beispielsweise zwei Methoden für den Netzwerkstart: BIOS und UEFI. Zusätzlich unterstützt UEFI im Allgemeinen den PXE-Start (TFTP) und den HTTP-Start. Andere Bootloader wie pxelinux unterstützen UEFI und den HTTP-Start nicht.
        </para>
        </listitem>
        <listitem>
          <para>
          Optional ein RA-Daemon für IPv6, z. B. das <package>radvd</package>-Paket. Es ist unter <phrase><phrase os="sles">SLES</phrase></phrase> erforderlich, wenn es auch als Router für ein Installationsprogramm-Netzwerk fungiert, um Folgendes auszuführen:
        </para>
          <itemizedlist>
            <listitem>
              <para>
              Konfigurieren von Routing in einem Netzwerk für PXE- oder HTTP-Start-Clients
            </para>
            </listitem>
            <listitem>
              <para>
              Ermöglichen der Verwendung von DHCPv6 in einem Netzwerk für PXE- oder HTTP-Start-Clients
            </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-install-components-reqs">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Ein System, auf dem <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> mit Administratorrechten ausgeführt wird, das beim SUSE Customer Center registriert und mit SUSEConnect für den Zugriff auf die entsprechenden Online-Repositorys konfiguriert wurde.
        </para>
        </listitem>
        <listitem>
          <para>
          Aktivierte SLE-Module: Serveranwendungsmodul, Legacy-Modul und Basissystemmodul.
        </para>
        </listitem>
        <listitem>
          <para>
          Zugriff auf die SLE-Modul-Repositorys für Netzwerkdienste und Bootloader.
        </para>
        </listitem>
        <listitem>
          <para>
          Eine funktionierende Internetverbindung zum Abrufen von Paketen
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-install-components-exec">
      <title>Installieren der Pakete</title>
      <para>
      Führen Sie die folgenden Schritte aus, um die für den PXE-Startserver erforderlichen Kernpakete zu installieren.
    </para>
      <procedure>
        <title>Installieren der erforderlichen Pakete für einen PXE-Startserver</title>
        <step>
          <para>
          Installieren Sie den GRUB 2-Bootloader und den nginx-HTTP-Server als allgemeine Anforderungen.
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>zypper install grub2 nginx</command>
          </screen>
        </step>
        <step>
          <para>
          Führen Sie einen der folgenden Befehle aus, um die für Ihren Ansatz unerlässlichen Pakete zu installieren:
        </para>
          <stepalternatives>
            <step>
              <para><package>kea</package> für den DHCP-Server, <package>tftp</package> für den TFTP-Server
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>zypper install kea tftp</command>
              </screen>
            </step>
            <step>
              <para><package>dnsmasq</package> als allgemeiner Anbieter für DHCP-, DNS- und TFTP-Server
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>zypper install dnsmasq</command>
              </screen>
            </step>
          </stepalternatives>
          <note>
            <title>Beschränkungen für die von Kea und dnsmasq bereitgestellten DHCP-Server</title>
            <para>
            Der HTTP-Start per IPv6 wird <emphasis>derzeit</emphasis> von DHCP-Servern, die von den Paketen <package>kea</package> und <package>dnsmasq</package> bereitgestellt werden, nicht unterstützt. Das Zurücksenden einer <literal>vendor-class</literal>-Option an den HTTP-Client, wie es die UEFI-Spezifikation vorschreibt, wird dadurch nicht unterstützt.
          </para>
          </note>
        </step>
        <step>
          <para>
          Installieren Sie optional zusätzliche architekturspezifische GRUB 2-Ziele, wenn Sie andere Plattformen unterstützen möchten.
        </para>
          <stepalternatives>
            <step>
              <para>
              Für die AMD64/Intel 64-Architektur:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>zypper install grub2-x86_64-efi grub2-i386-pc</command>
              </screen>
            </step>
            <step>
              <para>
              Für die AArch64-Architektur:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>zypper install grub2-aarch64-efi</command>
              </screen>
            </step>
            <step>
              <para>
              Für die ppc64le-Architektur:
            </para>
              <screen>
                <prompt>&gt; </prompt>
                <command>sudo</command>
                <command>zypper install grub2-ppc64le-ieee1275</command>
              </screen>
            </step>
          </stepalternatives>
          <note>
            <title>Art und Weise der Bereitstellung von GRUB 2-Paketen durch den PXE-Server an Clients, die sich von der Architektur des Servercomputers unterscheiden</title>
            <para>
            Die für die architekturspezifischen <package>noarch.rpm</package>-Pakete von GRUB 2 sind unabhängig von der Architektur des Computers, auf dem der PXE-Server eingerichtet ist, im Unterverzeichnis <filename>noarch</filename> des Installationsmediums/Repositorys enthalten. Das heißt, Sie können auf einem PXE-Server, der auf einem AMD64/Intel 64-Computer ausgeführt wird, die Pakete <package>grub2-arm64-efi</package> und <package>grub2-powerpc-ieee1275</package> installieren, um Clients mit anderen Architekturen zu unterstützen.
          </para>
          </note>
        </step>
        <step>
          <para>
          Optional können Sie das <package>shim</package>-Paket installieren, wenn Sie UEFI Secure Boot für AMD64/Intel 64 oder AArch64 benötigen, aber die Dateien aus dem ISO-Image des Installationsmediums nicht verwenden möchten.
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>zypper install shim</command>
          </screen>
        </step>
        <step>
          <para>
          Installieren Sie optional den Router Advertisement-Daemon <package>radvd</package>, wenn Sie den PXE-Server als Router verwenden möchten (für Produktionsnetzwerke nicht empfohlen).
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>zypper install radvd</command>
          </screen>
        </step>
        <step>
          <para>
          Installieren Sie das Dienstprogramm <package>rsync</package>, um das ISO-Image und den Verzeichnisbaum bequem zu kopieren oder zu synchronisieren.
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>zypper install rsync</command>
          </screen>
        </step>
        <step>
          <para>
          Stellen Sie sicher, dass die Dienste installiert, aber noch nicht gestartet wurden. Die Konfiguration wird in späteren Abschnitten behandelt.
        </para>
        </step>
      </procedure>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-netboot-directories-uefi-secure-boot">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Erstellen von GRUB 2-NetBoot-Verzeichnissen für den PXE-Server</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird das Erstellen von GRUB 2-NetBoot-Verzeichnissen für PXE-Server mit <command>grub2-mknetdir</command> erklärt, womit für die Architektur spezifische Verzeichnisse für AMD64/Intel 64- (UEFI und BIOS), AArch64- und ppc64le-Systeme generiert werden. Für die Unterstützung von UEFI Secure Boot müssen Administratoren signierte EFI-Dateien vom Installationsmedium kopieren oder das <package>shim</package>-Paket verwenden, um die standardmäßigen nicht signierten Bootloader-Dateien zu ersetzen.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-netboot-directories-uefi-secure-boot-introduction">
      <title>Einführung</title>
      <para>
      In diesem Abschnitt wird die Einrichtung von GRUB 2-NetBoot-Verzeichnissen für die PXE-Serverbereitstellung auf mehreren Architekturen beschrieben. Der Befehl <command>grub2-mknetdir</command> erstellt architekturspezifische Verzeichnisse unter <filename>/srv/tftpboot/boot/grub2/</filename> für verschiedene Plattformen. AMD64/Intel 64-Systeme generieren beispielsweise sowohl UEFI-Verzeichnisse (<filename>x86_64-efi</filename>) als auch Legacy-BIOS-Verzeichnisse (<filename>i386-pc</filename>), während AArch64- und ppc64le-Systeme ihre jeweiligen UEFI-Verzeichnisse (<filename>arm64-efi</filename> und <filename>powerpc-ieee1275</filename>) erstellen.
    </para>
      <para>
      Zur Unterstützung von UEFI Secure Boot, das von den standardmäßigen nicht signierten <filename>core.efi</filename>-Dateien nicht bereitgestellt wird, können Administratoren entweder signierte EFI-Dateien vom Installationsmedium kopieren oder das <package>shim</package>-Paket installieren und die erforderlichen Bootloader-Dateien (<filename>shim.efi</filename>, <filename>grub.efi</filename>, <filename>MokManager.efi</filename>) manuell in die entsprechenden Architekturverzeichnisse kopieren, um eine ordnungsgemäße Auflösung symbolischer Links sicherzustellen, damit alle Dateien im TFTP-Stammverzeichnis verbleiben.
    </para>
    </section>
    <section xml:id="sles-pxe-server-netboot-directories-uefi-secure-boot-requirements">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Stellen Sie sicher, dass Sie die folgenden Pakete installiert haben:<package>grub2</package>,<package>tftp</package> und alle anderen architekturspezifischen GRUB 2-Paket wie <package>grub2-x86_64-efi</package> und <package>grub2-i386-pc</package>.
        </para>
        </listitem>
        <listitem>
          <para>
          Stellen Sie sicher, dass entweder das Installationsmedium (ISO) zum Einbinden verfügbar ist oder dass das <package>shim</package>-Paket auf dem System installiert ist. Sie können das Installationsmedium (ISO) für Ihre Zielarchitektur aus dem SUSE Customer Center herunterladen.
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-netboot-directories-uefi-secure-boot-executing">
      <title>Vorbereiten der NetBoot-Verzeichnisse und von UEFI Secure Boot</title>
      <para>
      Dieses Verfahren erstellt die erforderliche GRUB 2-Verzeichnisstruktur für den PXE-Netzwerkstart und konfiguriert optional die Unterstützung von UEFI Secure Boot für mehrere Architekturen.
    </para>
      <procedure>
        <step>
          <para>
          Erstellen Sie eine GRUB 2-NetBoot-Verzeichnisstruktur.
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>grub2-mknetdir --net-directory=/srv/tftpboot
--subdir=/boot/grub2</command>
          </screen>
          <para>
          Hiermit werden architekturspezifische Verzeichnisse erstellt:
        </para>
          <itemizedlist>
            <listitem>
              <para>
              AMD64/Intel 64: <filename>/srv/tftpboot/boot/grub2/x86_64-efi</filename> und <filename>/srv/tftpboot/boot/grub2/i386-pc </filename>
            </para>
            </listitem>
            <listitem>
              <para>
              AArch64: <filename>/srv/tftpboot/boot/grub2/arm64-efi</filename>
            </para>
            </listitem>
            <listitem>
              <para>
              ppc64le: <filename>/srv/tftpboot/boot/grub2/powerpc-ieee1275</filename>
            </para>
            </listitem>
          </itemizedlist>
          <warning>
            <para>
            Überschreiben Sie die von <command>grub2-mknetdir</command> erstellte <filename>grub.cfg</filename>-Datei nicht manuell.
          </para>
          </warning>
        </step>
        <step>
          <para>
          Kopieren Sie andere von der Architektur unabhängige Verzeichnisse wie <filename>fonts/</filename> und <filename>locale/</filename>, die unter dem Verzeichnis <filename>/srv/tftpboot/boot/grub2/</filename> verfügbar sind, auf den TFTP-Server.
        </para>
        </step>
        <step>
          <para>
          Sie können die mit dem Befehl <command>grub2-mknetdir</command> installierte Datei <filename>/srv/tftpboot/boot/grub2/<replaceable>ARCH</replaceable>-efi/core.efi</filename> auch für AMD64/Intel 64- oder AArch64-Architekturen für UEFI-PXE verwenden. Sie sind jedoch <emphasis>nicht signiert</emphasis> und unterstützen UEFI Secure Boot nicht. Um UEFI Secure Boot optional für die unterstützten AMD64/Intel 64- und AArch64-Architekturen zu aktivieren, führen Sie einen der folgenden Schritte aus:
        </para>
          <stepalternatives>
            <step>
              <para>
              Kopieren Sie die erforderlichen Dateien aus dem ISO-Image des Installationsmediums:
            </para>
              <substeps>
                <step>
                  <para>
                  Binden Sie das ISO-Image ein:
                </para>
                  <screen>
                    <prompt>&gt; </prompt>
                    <command>sudo</command>
                    <command>mount -o loop /PATH/TO/SLES.ISO /mnt</command>
                  </screen>
                </step>
                <step>
                  <para>
                  Kopieren Sie die EFI-Dateien.
                </para>
                  <screen>
                    <prompt>&gt; </prompt>
                    <command>sudo</command>
                    <command>cp -v /mnt/EFI/BOOT/*.efi
/srv/tftpboot/boot/grub2/<replaceable>ARCH</replaceable>-efi/</command>
                    <co xml:id="copy-efi-files"/>
                  </screen>
                  <calloutlist>
                    <callout arearefs="copy-efi-files">
                      <para>
                      Ersetzen Sie <filename><replaceable>ARCH</replaceable>-efi</filename> durch <filename>x86_64-efi</filename> oder <filename>arm64-efi</filename> - die unterstützten Architekturen für UEFI Secure Boot.
                    </para>
                    </callout>
                  </calloutlist>
                </step>
                <step>
                  <para>
                  Heben Sie die Einbindung des ISO-Images auf.
                </para>
                  <screen>
                    <prompt>&gt; </prompt>
                    <command>sudo</command>
                    <command>umount /mnt</command>
                  </screen>
                </step>
              </substeps>
            </step>
            <step>
              <para>
              Verwenden Sie das <package>shim</package>-Paket, wenn Sie die Dateien aus dem ISO-Image des Installationsmediums nicht verwenden möchten:
            </para>
              <substeps>
                <step>
                  <para>
                  Installieren Sie das <package>shim</package>-Paket, falls es nicht bereits installiert ist
                </para>
                  <screen>
                    <prompt>&gt; </prompt>
                    <command>sudo</command>
                    <command>zypper install shim</command>
                  </screen>
                </step>
                <step>
                  <para>
                  Kopieren Sie die signierten Bootloader-Dateien für die erforderliche Architektur:
                </para>
                  <substeps>
                    <step>
                      <para>
                      Kopieren Sie die Datei <filename>shim.efi</filename>.
                    </para>
                      <stepalternatives>
                        <step>
                          <para>
                          Für die AMD64/Intel 64-Architektur:
                        </para>
                          <screen>
                            <prompt>&gt; </prompt>
                            <command>sudo</command>
                            <command>cp -v -p -L /usr/share/efi/x86_64/shim.efi /srv/tftpboot/boot/grub2/x86_64-efi/bootx64.efi</command>
                          </screen>
                        </step>
                        <step>
                          <para>
                          Für die AArch64-Architektur:
                        </para>
                          <screen>
                            <prompt>&gt; </prompt>
                            <command>sudo</command>
                            <command>cp -v -p -L /usr/share/efi/aarch64/shim.efi /srv/tftpboot/boot/grub2/arm64-efi/bootaa64.efi</command>
                          </screen>
                        </step>
                      </stepalternatives>
                    </step>
                    <step>
                      <para>
                      Kopieren Sie die Datei <filename>grub.efi</filename>.
                    </para>
                      <stepalternatives>
                        <step>
                          <para>
                          Für die AMD64/Intel 64-Architektur:
                        </para>
                          <screen>
                            <prompt>&gt; </prompt>
                            <command>sudo</command>
                            <command>cp -v -p -L /usr/share/efi/x86_64/grub.efi /srv/tftpboot/boot/grub2/x86_64-efi/</command>
                          </screen>
                        </step>
                        <step>
                          <para>
                          Für die AArch64-Architektur:
                        </para>
                          <screen>
                            <prompt>&gt; </prompt>
                            <command>sudo</command>
                            <command>cp -v -p -L /usr/share/efi/aarch64/grub.efi /srv/tftpboot/boot/grub2/arm64-efi/</command>
                          </screen>
                        </step>
                      </stepalternatives>
                    </step>
                    <step>
                      <para>
                      Kopieren Sie die Datei <filename>MokManager.efi</filename>.
                    </para>
                      <stepalternatives>
                        <step>
                          <para>
                          Für die AMD64/Intel 64-Architektur:
                        </para>
                          <screen>
                            <prompt>&gt; </prompt>
                            <command>sudo</command>
                            <command>cp -v -p -L /usr/share/efi/x86_64/MokManager.efi /srv/tftpboot/boot/grub2/x86_64-efi/</command>
                          </screen>
                        </step>
                        <step>
                          <para>
                          Für die AArch64-Architektur:
                        </para>
                          <screen>
                            <prompt>&gt; </prompt>
                            <command>sudo</command>
                            <command>cp -v -p -L /usr/share/efi/aarch64/MokManager.efi /srv/tftpboot/boot/grub2/arm64-efi/</command>
                          </screen>
                        </step>
                      </stepalternatives>
                    </step>
                  </substeps>
                  <note>
                    <para>
                    Das Flag <literal>-L</literal> löst symbolische Links auf, um sicherzustellen, dass die Dateien im TFTP-Stammverzeichnis verbleiben.
                  </para>
                  </note>
                </step>
              </substeps>
            </step>
          </stepalternatives>
        </step>
      </procedure>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-prepare-installer">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Vorbereiten des Installationsprogramm-Image-Inhalts</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird beschrieben, wie Sie Installationsprogrammdateien von <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Installationsmedien für PXE-Startumgebungen extrahieren und organisieren. Er deckt sowohl <literal>.install.iso</literal>-Images als auch RPM-Pakete ab und enthält spezifische Anweisungen für verschiedene Architekturen und Installationstypen.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-prepare-installer-intro">
      <title>Einführung</title>
      <para><phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> bietet Installationsprogrammdateien in mehreren Formaten, damit verschiedene PXE-Startszenarien unterstützt werden. Das Agama-Installationsprogramm benötigt drei wichtige Dateien: das Kernel-Image (<filename>linux</filename>), das ursprüngliche RAM-Laufwerk (<filename>initrd</filename>) und das komprimierte Root-Dateisystem (<filename>squashfs.img</filename>). Diese Dateien müssen vom Installationsmedium extrahiert und in einer Verzeichnisstruktur organisiert werden, auf die über TFTP und HTTP zugegriffen werden kann.
    </para>
      <para>
      In diesem Abschnitt werden Vorbereitungsmethoden für <literal>.install.iso</literal>-Images und RPM-Pakete behandelt, um die Kompatibilität mit den verschiedenen Architekturen und Installationstypen sicherzustellen, die von <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> unterstützt werden.
    </para>
    </section>
    <section xml:id="sles-pxe-server-prepare-installer-reqs">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para><phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Installationsmedien, wie im SUSE Customer Center erhältlich. Folgende Möglichkeiten stehen zur Auswahl:
        </para>
          <itemizedlist>
            <listitem>
              <para>
              Online-ISO-Image: Reines Installationsprogramm für Netzwerkinstallationen (<filename>SLES-16.0-Online-<replaceable>ARCH</replaceable>-<replaceable>BUILD</replaceable>.install.iso</filename>)
            </para>
            </listitem>
            <listitem>
              <para>
              Vollständiges ISO-Image: Installationsprogramm mit Installations-Repository (<filename>SLES-16.0-Full-<replaceable>ARCH</replaceable>-<replaceable>BUILD</replaceable>.install.iso</filename>)
            </para>
            </listitem>
            <listitem>
              <para>
              RPM-Pakete: <package>tftpboot-agama-installer-SUSE_SLE_16_PXE-<replaceable>ARCH</replaceable></package>
            </para>
            </listitem>
          </itemizedlist>
        </listitem>
        <listitem>
          <para>
          Ein vorübergehender Einhängepunkt wie <filename>/mnt</filename>.
        </para>
        </listitem>
        <listitem>
          <para>
          Genügend Speicherplatz unter <filename>/srv/tftpboot</filename> und <filename>/srv/install</filename> für die von Ihnen gewählte Installationsmethode.
        </para>
        </listitem>
        <listitem>
          <para>
          Administratorrechte zum Erstellen von Verzeichnissen und Kopieren von Dateien.
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-prepare-installer-iso">
      <title>Vorbereiten von Installationsprogrammdateien aus ISO-Images</title>
      <para>
      ISO-Images bieten eine einfache Methode zum Extrahieren von Installationsprogrammdateien. Die folgenden Verfahren decken die Typen "Online-ISO-Image" und "Vollständiges ISO-Image" für verschiedene Architekturen ab.
    </para>
      <section xml:id="sles-pxe-server-prepare-installer-iso-online">
        <title>Verwenden von Online-ISO-Images</title>
        <para>
        Online-ISO-Images enthalten nur die Installationsprogrammkomponenten und erfordern während der Systeminstallation Netzwerkzugriff auf die Installations-Repositorys. Dies entspricht dem Startmenüeintrag der <literal>SLES-16.0 Online Installation</literal> in GRUB.
       </para>
        <procedure xml:id="proc-prepare-online-iso-x86-aarch64">
          <title>Extrahieren von Dateien aus dem Online-ISO-Image (x86_64 und aarch64)</title>
          <step>
            <para>
            Erstellen Sie die Verzeichnisstruktur für Installationsprogrammdateien:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>mkdir -p /srv/tftpboot/boot/images/SLES-16.0/<replaceable>ARCH</replaceable>/</command>
            </screen>
          </step>
          <step>
            <para>
            Binden Sie das Online-ISO-Image ein:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>mount -oro,loop /srv/install/iso/SLES-16.0-Online-<replaceable>ARCH</replaceable>-<replaceable>BUILD</replaceable>.install.iso /mnt</command>
            </screen>
          </step>
          <step>
            <para>
            Kopieren Sie die Kernel- und initrd-Dateien:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp /mnt/boot/<replaceable>ARCH</replaceable>/loader/linux  /srv/tftpboot/boot/images/SLES-16.0/<replaceable>ARCH</replaceable>/</command>
            </screen> <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp /mnt/boot/<replaceable>ARCH</replaceable>/loader/initrd /srv/tftpboot/boot/images/SLES-16.0/<replaceable>ARCH</replaceable>/</command>
            </screen>
          </step>
          <step>
            <para>
            Kopieren Sie das komprimierte Root-Dateisystem:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp /mnt/LiveOS/squashfs.img /srv/tftpboot/boot/images/SLES-16.0/<replaceable>ARCH</replaceable>/</command>
            </screen>
          </step>
          <step>
            <para>
            Heben Sie das Einbinden des ISO-Images auf:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>umount /mnt</command>
            </screen>
          </step>
        </procedure>
        <procedure xml:id="proc-prepare-online-iso-ppc64le">
          <title>Extrahieren von Dateien aus dem Online-ISO-Image (ppc64le)</title>
          <step>
            <para>
            Erstellen Sie folgende Verzeichnisstruktur:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>mkdir -p /srv/tftpboot/boot/images/SLES-16.0/ppc64le/</command>
            </screen>
          </step>
          <step>
            <para>
            Hängen Sie das ISO-Image ein:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>mount -oro,loop /srv/install/iso/SLES-16.0-Online-ppc64le-<replaceable>BUILD</replaceable>.install.iso /mnt</command>
            </screen>
          </step>
          <step>
            <para>
            Kopieren Sie die Kernel- und Initrd-Dateien (beachten Sie die andere Pfadstruktur für ppc64le):
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp /mnt/boot/ppc64le/linux /srv/tftpboot/boot/images/SLES-16.0/ppc64le/</command>
            </screen> <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp /mnt/boot/ppc64le/initrd /srv/tftpboot/boot/images/SLES-16.0/ppc64le/</command>
            </screen>
          </step>
          <step>
            <para>
            Kopieren Sie das komprimierte Root-Dateisystem:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp /mnt/LiveOS/squashfs.img /srv/tftpboot/boot/images/SLES-16.0/ppc64le/</command>
            </screen>
          </step>
          <step>
            <para>
            Heben Sie das Einbinden des ISO-Images auf:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>umount /mnt</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-prepare-installer-iso-full">
        <title>Verwenden vollständiger ISO-Images</title>
        <para>
        Vollständige ISO-Images enthalten sowohl das Installationsprogramm als auch die Installations-Repositorys und ermöglichen so lokale Installationen ohne Abhängigkeiten von externen Netzwerken. Dies entspricht dem Startmenüeintrag der <literal>SLES-16.0 Local Installation</literal> in GRUB mit dem zusätzlichen Parameter <literal>inst.install_url=http://pxe.example.net/install/SLES-16.0/${arch}</literal>.
      </para>
        <procedure xml:id="proc-prepare-full-iso">
          <title>Extrahieren von Dateien aus dem vollständigen ISO-Image</title>
          <step>
            <para>
            Erstellen Sie Verzeichnisse für die Installationsprogrammdateien und das Installations-Repository:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>mkdir -p /srv/tftpboot/boot/images/SLES-16.0/<replaceable>ARCH</replaceable>/</command>
            </screen> <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>mkdir -p /srv/install/SLES-16.0</command>
            </screen>
          </step>
          <step>
            <para>
            Binden Sie das vollständige ISO-Image ein:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>mount -oro,loop /srv/install/iso/SLES-16.0-Full-<replaceable>ARCH</replaceable>-<replaceable>BUILD</replaceable>.install.iso /mnt</command>
            </screen>
          </step>
          <step>
            <para>
            Kopieren Sie die Kernel- und Initrd-Dateien (passen Sie die Pfade für ppc64le wie in den vorherigen Verfahren gezeigt an):
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp /mnt/boot/<replaceable>ARCH</replaceable>/loader/linux  /srv/tftpboot/boot/images/SLES-16.0/<replaceable>ARCH</replaceable>/</command>
            </screen> <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp /mnt/boot/<replaceable>ARCH</replaceable>/loader/initrd /srv/tftpboot/boot/images/SLES-16.0/<replaceable>ARCH</replaceable>/</command>
            </screen>
          </step>
          <step>
            <para>
            Kopieren Sie das komprimierte Root-Dateisystem:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp /mnt/LiveOS/squashfs.img /srv/tftpboot/boot/images/SLES-16.0/<replaceable>ARCH</replaceable>/</command>
            </screen>
          </step>
          <step>
            <para>
            Kopieren Sie das Installations-Repository für den lokalen HTTP-Serverzugriff:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>rsync -avP /mnt/install/ /srv/install/SLES-16.0/<replaceable>ARCH</replaceable>/</command>
            </screen>
          </step>
          <step>
            <para>
            Heben Sie das Einbinden des ISO-Images auf:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>umount /mnt</command>
            </screen>
          </step>
        </procedure>
      </section>
    </section>
    <section xml:id="sles-pxe-server-prepare-installer-rpm">
      <title>Vorbereiten von Installationsprogrammdateien aus RPM-Paketen</title>
      <para>
      RPM-Pakete bieten eine alternative Methode zum Abrufen von Online-Installationsprogrammdateien.
    </para>
      <procedure xml:id="proc-prepare-rpm-packages">
        <title>Installieren und Verwenden von RPM-Paketen</title>
        <step>
          <para>
          Installieren Sie die erforderlichen Pakete:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>zypper in tftpboot-agama-installer-SUSE_SLE_16-<replaceable>ARCH</replaceable></command>
          </screen>
        </step>
        <step>
          <para>
          Kopieren Sie Linux, initrd, squashfs.img nach tftpboot:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>mkdir -p
/srv/tftpboot/boot/images/SLES-16.0/<replaceable>ARCH</replaceable></command>
          </screen> <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>cd
/srv/tftpboot/boot/images/SLES-16.0/<replaceable>ARCH</replaceable></command>
          </screen> <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>cp -v /usr/share/tftpboot-installation/agama-installer-SUSE_SLE_16/<replaceable>ARCH</replaceable>/loader/linux .</command>
          </screen> <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>cp -v /usr/share/tftpboot-installation/agama-installer-SUSE_SLE_16/<replaceable>ARCH</replaceable>/loader/initrd .</command>
          </screen> <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>cp -v /usr/share/tftpboot-installation/agama-installer-SUSE_SLE_16/<replaceable>ARCH</replaceable>/loader/squashfs.img .</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-prepare-installer-dir-structure">
      <title>Empfohlene Verzeichnisstruktur</title>
      <para>
      Organisieren Sie die extrahierten Dateien gemäß dem folgenden Verzeichnislayout, um Konsistenz und eine einfache Wartung sicherzustellen. Diese Struktur unterstützt mehrere Architekturen und Installationstypen.
    </para>
      <example xml:id="ex-pxe-directory-layout">
        <title>Vollständiges PXE-Serververzeichnislayout</title>
        <screen>/srv/tftpboot/
├── boot/
│   ├── grub2/
│   │   ├── x86_64-efi/
│   │   │   ├── bootx64.efi
│   │   │   └── grub.cfg
│   │   ├── i386-pc/
│   │   │   └── core.0
│   │   ├── arm64-efi/
│   │   │   └── bootaa64.efi
│   │   └── powerpc-ieee1275/
│   │       └── core.elf
│   └── images/
│       └── SLES-16.0/
│           ├── x86_64/
│           │   ├── linux <co xml:id="co-kernel"/>
│           │   ├── initrd <co xml:id="co-initrd"/>
│           │   └── squashfs.img <co xml:id="co-squashfs"/>
│           ├── aarch64/
│           └── ppc64le/
/srv/install/
└── SLES-16.0/
    ├── x86_64/ <co xml:id="co-install-repo"/>
    ├── aarch64/
    └── ppc64le/</screen>
      </example>
      <calloutlist>
        <callout arearefs="co-kernel">
          <para>
          Vom Installationsmedium extrahiertes Kernel-Image
        </para>
        </callout>
        <callout arearefs="co-initrd">
          <para>
          Image des ursprünglichen RAM-Laufwerks
        </para>
        </callout>
        <callout arearefs="co-squashfs">
          <para>
          Komprimiertes Root-Dateisystem für das Agama-Installationsprogramm
        </para>
        </callout>
        <callout arearefs="co-install-repo">
          <para>
          Installations-Repository aus dem Verzeichnis <filename>install</filename> des vollständigen ISO-Images (optional)
        </para>
        </callout>
      </calloutlist>
    </section>
    <section xml:id="sles-pxe-server-prepare-installer-verify">
      <title>Überprüfen der Installation</title>
      <para>
      Stellen Sie nach dem Extrahieren und Organisieren der Installationsprogrammdateien sicher, dass alle erforderlichen Komponenten vorhanden und aufrufbar sind.
    </para>
      <procedure xml:id="proc-verify-installer-files">
        <title>Überprüfungsschritte</title>
        <step>
          <para>
          Überprüfen Sie, ob wichtige Dateien vorhanden sind:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>ls -la /srv/tftpboot/boot/images/SLES-16.0/<replaceable>ARCH</replaceable>/*</command>
          </screen>
        </step>
        <step>
          <para>
          Stellen Sie sicher, dass die Dateiberechtigungen richtig sind:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>find /srv/tftpboot/boot/images/ -type d -exec chmod 0755 {} \;</command>
          </screen> <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>find /srv/tftpboot/boot/images/ -type f -exec chmod 0644 {} \;</command>
          </screen>
        </step>
      </procedure>
      <important>
        <title>Aufrufbarkeit von Dateien</title>
        <para>
        Stellen Sie sicher, dass alle extrahierten Dateien für die TFTP- und HTTP-Dienste lesbar sind. PXE-Clients greifen während des Startvorgangs auf die Dateien zu. Daher sind die richtigen Berechtigungen und die Dienstkonfiguration für erfolgreiche Bereitstellungen unerlässlich.
      </para>
      </important>
    </section>
    <section xml:id="sles-pxe-server-prepare-installer-next">
      <title>Nächste Schritte</title>
      <para>
      Wenn die Installationsdateien ordnungsgemäß vorbereitet und organisiert wurden, können Sie mit folgenden Aktionen fortfahren:
    </para>
      <itemizedlist>
        <listitem>
          <para>
          Konfigurieren von GRUB 2 für den PXE-Start mit Menüeinträgen, die auf diese Dateien verweisen
        </para>
        </listitem>
        <listitem>
          <para>
          Einrichten von HTTP- und TFTP-Diensten, um den extrahierten Inhalt bereitzustellen
        </para>
        </listitem>
        <listitem>
          <para>
          Konfigurieren von DHCP, sodass PXE-Clients zu den entsprechenden Bootloadern weitergeleitet werden
        </para>
        </listitem>
      </itemizedlist>
      <para>
      Auf die extrahierten Dateien wird in der GRUB 2-Konfiguration mit Pfaden wie <literal>root=live:http://pxe.example.net/boot/images/SLES-16.0/<replaceable>ARCH</replaceable>/squashfs.img</literal> verwiesen.
    </para>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-configure-grub2">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Konfigurieren von GRUB 2 für den PXE-Start</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird beschrieben, wie Sie den GRUB 2-Bootloader für PXE-basiertes Starten unter <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> konfigurieren. Es umfasst die Erstellung der Netzwerk-Startverzeichnisstruktur, die Einrichtung architekturspezifischer Bootloader und die Implementierung eines flexiblen Konfigurationssystems, das mehrere Architekturen und Installationsszenarien unterstützt.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-configure-grub2-intro">
      <title>Einführung</title>
      <para>
      GRUB 2 dient als Netzwerk-Bootloader für PXE-Clients und lädt Kernel- und initrd-Dateien, um das Agama-Installationsprogramm zu starten. In diesem Abschnitt wird gezeigt, wie Sie eine komplexe GRUB 2-Konfiguration erstellen, die die Client-Architektur automatisch erkennt, die Auswahl der Netzwerkschnittstelle verwaltet und ein einheitliches Startmenü bietet, das mehrere Installationstypen und Zielarchitekturen unterstützt.
    </para>
      <para>
      Der Konfigurationsansatz verwendet ein modulares Design mit separaten Dateien für die Architekturerkennung, Variablendefinitionen und Startmenüeinträge. Dies ermöglicht die Unterstützung computerspezifischer Konfigurationen und automatisierter Installationsprofile und stellt gleichzeitig die Konsistenz auf verschiedenen Hardwareplattformen sicher.
    </para>
    </section>
    <section xml:id="sles-pxe-server-configure-grub2-reqs">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Stellen Sie sicher, dass die GRUB 2-Netzwerk-Startverzeichnisstruktur vorhanden ist, wie in den vorherigen Abschnitten beschrieben ist.
        </para>
        </listitem>
        <listitem>
          <para>
          Stellen Sie sicher, dass die Installationsprogrammdateien ordnungsgemäß organisiert wurden, wie in den vorherigen Abschnitten beschrieben ist.
        </para>
        </listitem>
        <listitem>
          <para>
          GRUB 2-Pakete für alle Zielarchitekturen müssen installiert sein:<package>grub2-x86_64-efi</package>,<package>grub2-i386-pc</package> und <package>grub2-aarch64-efi</package> <package>grub2-ppc64le-ieee1275</package>
        </para>
        </listitem>
        <listitem>
          <para>
          Das <package>shim</package>-Paket zur Unterstützung von UEFI Secure Boot (optional).
        </para>
        </listitem>
        <listitem>
          <para>
          Administratorzugriff auf <filename>/srv/tftpboot</filename> oder einen gleichwertigen PXE-Root.
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-configure-grub2-main-config">
      <title>Erstellen der GRUB 2-Konfiguration</title>
      <para>
      Die GRUB 2-Konfigurationsdatei übernimmt drei Hauptaufgaben: die Erkennung der Architektur des Clients, die Verwaltung der Netzwerkschnittstellen und das Laden anderer Konfigurationsdateien. Dieser modulare Ansatz bietet Flexibilität für verschiedene Einsatzszenarien.
    </para>
      <procedure xml:id="proc-create-main-grub-config">
        <title>Einrichten der Hauptdatei <filename>grub.cfg</filename></title>
        <step>
          <para>
          Erstellen Sie die GRUB 2-Hauptkonfigurationsdatei unter<filename>/srv/tftpboot/boot/grub2/grub.cfg</filename>:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /srv/tftpboot/boot/grub2/grub.cfg &lt;&lt; 'EOF'</command>
# Architecture detection and mapping
if [ "$grub_cpu" == "i386" ]; then
  set arch='x86_64'
elif [ "$grub_cpu" == "x86_64" ]; then
  set arch='x86_64'
elif [ "$grub_cpu" == "arm64" ]; then
  set arch='aarch64'
elif [ "$grub_cpu" == "powerpc" ]; then
  set arch='ppc64le'
fi

if [ "X$arch" == "X" ]; then
  echo "ERROR: No architecture found for ${grub_cpu}"
  exit
else
  echo "Running on $arch CPU architecture"
fi
export arch


# Network interface configuration for PXE-selected NIC
# - dracut based images on SLE-16:
set ipcfg="ifname=pxe0:${net_default_mac} ip=pxe0:dhcp"
export ipcfg
# - linuxrc installer on SLE-15:
set ifcfg="ifcfg=${net_default_mac}=dhcp"
export ifcfg

# Define typical serial console kernel parameter
#set sconsole="console=tty0 console=ttyS0,115200n8"
#export sconsole

# Load machine-specific configuration if available
if [ -s "${config}/${net_default_mac}/grub.cfg" ]; then
  ## Source a host specific configuration of grub menu:
  source "${config}/${net_default_mac}/grub.cfg"
else
  ## Source default grub boot menu:
  source "${prefix}/menu.cfg"
fi
EOF
</screen>
        </step>
      </procedure>
      <variablelist>
        <title>Wichtige Konfigurationselemente</title>
        <varlistentry>
          <term>Architekturerkennung</term>
          <listitem>
            <para>
            Ordnet GRUB 2-CPU-Typen Distributionsarchitekturen zu und ermöglicht so einheitliche Menüeinträge, die auf verschiedenen Hardwareplattformen verwendet werden können
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Netzwerkschnittstellenverwaltung</term>
          <listitem>
            <para>
            Definiert eine Variable <varname>${ipcfg}</varname>, die die grub2-Variable <varname>${net_default_mac}</varname> verwendet, um DHCP nur für die angegebenen PXE-Startschnittstelle mit dem Namen <literal>pxe0</literal> zu aktivieren, wodurch Netzwerkprüfungsprobleme auf Systemen mit mehreren Schnittstellen vermieden werden.
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Dienstprogrammdefinitionen</term>
          <listitem>
            <para>
            Definiert eine typische Variable <varname>${sconsole}</varname> mit seriellen Konsolenparametern.
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Computerspezifische Konfiguration</term>
          <listitem>
            <para>
            Lädt optionale Konfigurationsdateien pro Computer anhand der MAC-Adresse und ermöglicht so angepasste Startparameter pro Computer und automatische Installationsprofile
          </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section xml:id="sles-pxe-server-configure-grub2-menu">
      <title>Erstellen des einheitlichen Startmenüs</title>
      <para>
      Das Startmenü verwendet Variablen aus der Hauptkonfiguration, um architekturunabhängige Menüeinträge bereitzustellen, die sich automatisch an verschiedene Hardwareplattformen und Installationstypen anpassen.
    </para>
      <procedure xml:id="proc-create-grub-menu">
        <title>Einrichten der Datei „menu.cfg“</title>
        <step>
          <para>
          Erstellen Sie ein einheitliches Startmenü unter <filename>/srv/tftpboot/boot/grub2/menu.cfg</filename>:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /srv/tftpboot/boot/grub2/menu.cfg &lt;&lt; 'EOF'</command>
menuentry 'SLES-16.0 Online Installation' {
  linux  /boot/images/SLES-16.0/${arch}/linux showopts root=live:http://pxe.example.net/boot/images/SLES-16.0/${arch}/squashfs.img ${ipcfg} ${sconsole} ${autoinstall}
  initrd /boot/images/SLES-16.0/${arch}/initrd
}

menuentry 'SLES-16.0 Local Installation' {
  linux  /boot/images/SLES-16.0/${arch}/linux showopts root=live:http://pxe.example.net/boot/images/SLES-16.0/${arch}/squashfs.img inst.install_url=http://pxe.example.net/install/SLES-16.0/${arch} ${ipcfg} ${sconsole} ${autoinstall}
  initrd /boot/images/SLES-16.0/${arch}/initrd
}
EOF
</screen>
        </step>
      </procedure>
      <note>
        <title>Flexibilität bei Menüeinträgen</title>
        <para>
        Die Menüeinträge verwenden Variablen, die basierend auf der Client-Architektur und -Konfiguration automatisch ausgefüllt werden. Die Variable <varname>${arch}</varname> stellt sicher, dass die richtigen Dateien geladen werden.
       </para>
        <para>
        Die optionale Variable <varname>${ipcfg}</varname> bewirkt, dass nur die von PXE ausgewählte Netzwerkschnittstelle eingerichtet wird.
       </para>
        <para>
        Die optionale Variable <varname>${sconsole}</varname> aktiviert eine serielle Konsole im Installationsprogrammsystem.
       </para>
      </note>
    </section>
    <section xml:id="sles-pxe-server-configure-grub2-machine-specific">
      <title>Computerspezifische Konfigurationen</title>
      <para>
      Für erweiterte Bereitstellungen können Sie computerspezifische Konfigurationsdateien erstellen, die Standardeinstellungen überschreiben oder automatische Installationsparameter bereitstellen.
    </para>
      <procedure xml:id="proc-machine-specific-config">
        <title>Erstellen der computerspezifischen Konfiguration</title>
        <step>
          <para>
          Erstellen Sie ein Verzeichnis für computerspezifische Konfigurationen:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>mkdir -p /srv/tftpboot/boot/config</command>
          </screen>
        </step>
        <step>
          <para>
          Erstellen Sie für einen Computer mit einer MAC-Adresse <literal>aa:bb:cc:dd:ee:ff</literal> eine bestimmte Konfiguration:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>mkdir -p /srv/tftpboot/boot/config/aa:bb:cc:dd:ee:ff</command>
          </screen>
        </step>
        <step>
          <para>
          Erstellen Sie die computerspezifische Datei <filename>grub.cfg</filename>:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /srv/tftpboot/boot/config/aa:bb:cc:dd:ee:ff/grub.cfg &lt;&lt; 'EOF'</command>
# Machine-specific configuration for aa:bb:cc:dd:ee:ff
set default='SLES-16.0 Full Installation'

# Activate the menu-entry after 5sec timeout
set timeout=5

# Use know predictable network interface name
set ipcfg="ip=eno1:dhcp"

# Set the autoinstall variable for this machine
set autoinstall="inst.auto=http://pxe.example.net/install/profiles/aa:bb:cc:dd:ee:ff/sles16.json"
export autoinstall

# Load the default menu
source "/boot/grub2/menu.cfg"
EOF
</screen>
          <para>
          Geben Sie alternativ einen eigenen Menüeintrag in der Host-spezifischen Datei <filename>grub.cfg</filename> an (z. B. für einen bestimmten Startversuch generiert):
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /srv/tftpboot/boot/config/aa:bb:cc:dd:ee:ff/grub.cfg &lt;&lt; 'EOF'</command>
set default='SLES-16.0 Auto-Installation'
set timeout=5

menuentry 'SLES-16.0 Auto-Installation' {
  linux  /boot/images/SLES-16.0/${arch}/linux showopts root=live:http://pxe.example.net/boot/images/SLES-16.0/${arch}/squashfs.img inst.install_url=http://pxe.example.net/install/SLES-16.0/${arch} inst.auto=http://pxe.example.net/install/profiles/${net_default_mac}/sles16.json ip=eno1:dhcp
  initrd /boot/images/SLES-16.0/${arch}/initrd
}
EOF
</screen>
        </step>
      </procedure>
      <example xml:id="ex-machine-specific-parameters">
        <title>Allgemeine computerspezifische Parameter</title>
        <variablelist>
          <varlistentry>
            <term>
              <varname>default</varname>
            </term>
            <listitem>
              <para>
              Gibt an, welcher Menüeintrag automatisch gestartet werden soll
            </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <varname>timeout</varname>
            </term>
            <listitem>
              <para>
              Legt die Startzeitüberschreitung in Sekunden fest
            </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <varname>ipcfg</varname>
            </term>
            <listitem>
              <para>
              Überschreibt die Netzwerkschnittstellenkonfiguration für bestimmte Hardware
            </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <varname>autoinstall</varname>
            </term>
            <listitem>
              <para>
              Stellt computerspezifische URLs für automatische Installationsprofile bereit
            </para>
            </listitem>
          </varlistentry>
        </variablelist>
      </example>
    </section>
    <section xml:id="sles-pxe-server-configure-grub2-verify">
      <title>Überprüfen der GRUB 2-Konfiguration</title>
      <para>
      Überprüfen Sie nach dem Erstellen der Konfigurationsdateien sicher, ob die Einrichtung richtig ist und alle erforderlichen Dateien vorhanden sind.
    </para>
      <procedure xml:id="proc-verify-grub-config">
        <title>Überprüfungsschritte</title>
        <step>
          <para>
          Überprüfen Sie die GRUB 2-Verzeichnisstruktur:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>find /srv/tftpboot/boot/grub2 -type f -name "*.cfg" -o -name "*.efi" -o -name "core.*"</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie die Syntax der Konfigurationsdatei, indem Sie sie mit GRUB 2-Werkzeugen testen:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>grub2-script-check /srv/tftpboot/boot/grub2/grub.cfg</command>
          </screen> <screen>
            <prompt>&gt; </prompt>
            <command>grub2-script-check /srv/tftpboot/boot/grub2/menu.cfg</command>
          </screen>
        </step>
        <step>
          <para>
          Stellen Sie sicher, dass die Dateiberechtigungen richtig sind:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>chmod -R 644 /srv/tftpboot/boot/grub2/*.cfg</command>
          </screen> <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>find /srv/tftpboot/boot/grub2 -type d -exec chmod 0755 {} \;</command>
          </screen>
        </step>
      </procedure>
      <important>
        <title>Konfigurationstests</title>
        <para>
        Testen Sie die GRUB 2-Konfiguration mit tatsächlichen PXE-Clients, um eine ordnungsgemäße Architekturerkennung und Menüfunktionalität sicherzustellen. Die Variable <varname>${net_default_mac}</varname> ist nur in tatsächlichen Netzwerk-Startszenarien verfügbar.
      </para>
      </important>
    </section>
    <section xml:id="sles-pxe-server-configure-grub2-troubleshooting">
      <title>Beheben von Fehlern bei der GRUB 2-Konfiguration</title>
      <para>
      Häufige Probleme und ihre Lösungen beim Verwenden von GRUB 2-PXE-Konfigurationen. Jedes Problem umfasst Diagnoseschritte und spezifische Befehle zum Beheben des Problems.
    </para>
      <section xml:id="sles-pxe-server-grub2-troubleshoot-arch">
        <title>Fehler bei der Architekturerkennung</title>
        <para>
        Wenn GRUB 2 nicht die richtige Architektur erkennt, starten Clients möglicherweise mit falschen Binärdateien oder können überhaupt nicht geladen werden.
      </para>
        <procedure xml:id="proc-debug-arch-detection">
          <title>Debugging der Architekturerkennung</title>
          <step>
            <para>
            Fügen Sie der GRUB 2-Konfiguration eine Debug-Ausgabe hinzu, um die erkannten Werte anzuzeigen:
          </para>
            <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt;&gt; /srv/tftpboot/boot/grub2/grub.cfg &lt;&lt; 'EOF'</command>
# Debug architecture detection
echo "Detected grub_cpu: ${grub_cpu}"
echo "Mapped arch: ${arch}"
sleep 3
EOF</screen>
          </step>
          <step>
            <para>
            Testen Sie die Konfigurationssyntax:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grub2-script-check /srv/tftpboot/boot/grub2/grub.cfg</command>
            </screen>
          </step>
          <step>
            <para>
            Wenn die Architekturzuordnung unvollständig ist, erweitern Sie die Erkennungslogik:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>sed -i '/elif \[ "$grub_cpu" == "powerpc" \]/a\\nelif [ "$grub_cpu" == "riscv64" ]; then\n  set arch='\''riscv64'\''\\' /srv/tftpboot/boot/grub2/grub.cfg</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, ob die architekturspezifischen Verzeichnisse vorhanden sind:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ls -la /srv/tftpboot/boot/grub2/</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-grub2-troubleshoot-network">
        <title>Netzwerkschnittstelle nicht gefunden</title>
        <para>
        Bei einigen Firmware-Implementierungen wird die Variable <varname>${net_default_mac}</varname> möglicherweise nicht richtig festgelegt, was zu Fehlern bei der Netzwerkkonfiguration führt.
      </para>
        <procedure xml:id="proc-debug-network-interface">
          <title>Diagnose von Problemen mit der Netzwerkschnittstelle</title>
          <step>
            <para>
            Fügen Sie eine Debug-Ausgabe hinzu, um Netzwerkvariablen zu überprüfen:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>sed -i '/set ipcfg=/i\\necho "Default MAC: ${net_default_mac}"\necho "Network variables set"\nsleep 2' /srv/tftpboot/boot/grub2/grub.cfg</command>
            </screen>
          </step>
          <step>
            <para>
            Erstellen Sie eine Fallback-Netzwerkkonfiguration:
          </para>
            <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt;&gt; /srv/tftpboot/boot/grub2/grub.cfg &lt;&lt; 'EOF'</command>

# Fallback network configuration if net_default_mac is empty
if [ "X${net_default_mac}" == "X" ]; then
  set ipcfg="ip=dhcp"
  set ifcfg="ifcfg=*=dhcp"
  echo "WARNING: Using fallback network configuration"
  sleep 2
fi
EOF
</screen>
          </step>
          <step>
            <para>
            Testen Sie die Netzwerkkonfiguration mit einer bestimmten Schnittstelle:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>echo 'set ipcfg="ip=eno1:dhcp"' &gt; /srv/tftpboot/boot/config/test-network.cfg</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Namen der Netzwerkschnittstellen auf dem Zielsystem:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ip link show</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-grub2-troubleshoot-file-paths">
        <title>Dateipfade nicht gefunden</title>
        <para>
        Falsche Dateipfade verhindern, dass GRUB 2 Kernel- und initrd-Dateien lädt, was zu Fehlern beim Starten führt.
      </para>
        <procedure xml:id="proc-debug-file-paths">
          <title>Überprüfen der Aufrufbarkeit von Dateipfaden</title>
          <step>
            <para>
            Überprüfen Sie, ob die Installationsprogrammdateien an den erwarteten Speicherorten vorhanden sind:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>find /srv/tftpboot/boot/images -name "linux" -o -name "initrd" -o -name "squashfs.img"</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie den TFTP-Zugriff auf Startdateien:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tftp localhost -c get /boot/grub2/grub.cfg /tmp/test-grub.cfg</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie den HTTP-Zugriff auf die Installationsprogrammdateien:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>curl -I http://localhost/boot/images/SLES-16.0/x86_64/linux</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Dateiberechtigungen und die Eigentümerschaft:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ls -la /srv/tftpboot/boot/images/SLES-16.0/*/</command>
            </screen>
          </step>
          <step>
            <para>
            Korrigieren Sie Berechtigungen bei Bedarf:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>chmod -R 644 /srv/tftpboot/boot/images/</command>
            </screen> <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>find /srv/tftpboot/boot/images/ -type d -exec chmod 755 {} \;</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, dass die symbolischen Links nicht beschädigt sind:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>find /srv/tftpboot/boot/images/ -type l -exec ls -la {} \;</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-grub2-troubleshoot-efi">
        <title>Fehler beim EFI-Start</title>
        <para>
        EFI- und Secure Boot-Probleme können eine ordnungsgemäße Initialisierung des Bootloaders verhindern oder zu Authentifizierungsfehlern führen.
      </para>
        <procedure xml:id="proc-debug-efi-boot">
          <title>Diagnose von Problemen beim EFI-Start</title>
          <step>
            <para>
            Überprüfen Sie, ob die Secure Boot-Dateien vorhanden sind:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ls -la /srv/tftpboot/boot/grub2/x86_64-efi/*.efi</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, ob die Dateien „shim“ („bootx64.efi“ oder „shim.ef“i), „grub.efi“ und „MokManager.efi“ ordnungsgemäß kopiert wurden:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>file /srv/tftpboot/boot/grub2/x86_64-efi/bootx64.efi</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Integrität der EFI-Dateien:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sha256sum /srv/tftpboot/boot/grub2/x86_64-efi/*.efi</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie, ob Dateien über TFTP aufgerufen werden können:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tftp localhost -c get /boot/grub2/x86_64-efi/bootx64.efi /tmp/test-shim.efi</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie bei aarch64-Systemen die ARM64-EFI-Dateien:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ls -la /srv/tftpboot/boot/grub2/arm64-efi/*.efi</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, ob die DHCP-Konfiguration die richtigen Bootloader-Pfade bereitstellt:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep -n "bootx64.efi\|shim.efi\|bootaa64.efi"
/etc/dnsmasq.d/dhcp.conf /etc/kea/kea-dhcp?.conf /etc/dhcpd?.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Wenn Dateien fehlen, kopieren Sie sie erneut aus dem unter /mnt eingebundenen ISO-Image oder aus den shim-Paketdateien:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp -v /mnt/EFI/BOOT/*.efi /srv/tftpboot/boot/grub2/x86_64-efi/</command>
            </screen> <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp -pL /usr/share/efi/x86_64/*.efi /srv/tftpboot/boot/grub2/x86_64-efi/</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-grub2-troubleshoot-menu">
        <title>Menüeinträge werden nicht geladen</title>
        <para>
        Wenn GRUB 2 geladen wird, Menüeinträge aber fehlschlagen oder Fehler angezeigt werden, ist das Problem häufig mit Variablenerweiterungen oder Dateiverweisen verbunden.
      </para>
        <procedure xml:id="proc-debug-menu-entries">
          <title>Debuggen von Problemen bei Menüeinträgen</title>
          <step>
            <para>
            Testen Sie die Syntax der Menükonfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grub2-script-check /srv/tftpboot/boot/grub2/menu.cfg</command>
            </screen>
          </step>
          <step>
            <para>
            Fügen Sie die Debug-Ausgabe den Menüeinträgen hinzu:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>sed -i '/linux_kernel.*{images}/i\\necho "Loading: ${images}/SLES-16.0/${arch}/linux"\necho "Architecture: ${arch}"' /srv/tftpboot/boot/grub2/menu.cfg</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, ob die Variablenerweiterung ordnungsgemäß funktioniert:
          </para>
            <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /srv/tftpboot/boot/grub2/debug-menu.cfg &lt;&lt; 'EOF'</command>
menuentry 'Debug Variables' {
  echo "arch = ${arch}"
  echo "images = ${images}"
  echo "ipcfg = ${ipcfg}"
  sleep 5
}
EOF
</screen>
          </step>
          <step>
            <para>
            Testen Sie dies mit einem vereinfachten Menüeintrag:
          </para>
            <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /srv/tftpboot/boot/grub2/simple-menu.cfg &lt;&lt; 'EOF'</command>
menuentry 'Simple Test' {
  linux /boot/images/SLES-16.0/x86_64/linux
  initrd /boot/images/SLES-16.0/x86_64/initrd
}
EOF
</screen>
          </step>
          <step>
            <para>
            Laden Sie das Testmenü vorübergehend:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>sed -i 's|source "${prefix}/menu.cfg"|source "${prefix}/simple-menu.cfg"|' /srv/tftpboot/boot/grub2/grub.cfg</command>
            </screen>
          </step>
          <step>
            <para>
            Stellen Sie das ursprüngliche Menü nach dem Testen wieder her:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>sed -i 's|source "${prefix}/simple-menu.cfg"|source "${prefix}/menu.cfg"|' /srv/tftpboot/boot/grub2/grub.cfg</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-grub2-troubleshoot-logging">
        <title>Aktivieren der detaillierten Protokollierung</title>
        <para>
        Wenn die Probleme weiterhin bestehen, aktivieren Sie die umfassende Protokollierung, um detaillierte Informationen zum Startvorgang zu erfassen.
      </para>
        <procedure xml:id="proc-enable-grub-logging">
          <title>Einrichten der GRUB 2-Debug-Protokollierung</title>
          <step>
            <para>
            Erstellen Sie eine Debug-Version der Hauptkonfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>cp /srv/tftpboot/boot/grub2/grub.cfg /srv/tftpboot/boot/grub2/grub.cfg.backup</command>
            </screen>
          </step>
          <step>
            <para>
            Fügen Sie eine umfassende Debug-Ausgabe hinzu:
          </para>
            <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /srv/tftpboot/boot/grub2/debug.cfg &lt;&lt; 'EOF'</command>
# Debug configuration for GRUB troubleshooting
set debug=all
set pager=1

echo "=== GRUB Debug Information ==="
echo "grub_cpu: ${grub_cpu}"
echo "grub_platform: ${grub_platform}"
echo "net_default_mac: ${net_default_mac}"
echo "net_default_server: ${net_default_server}"
echo "============================="
sleep 5
EOF
</screen>
          </step>
          <step>
            <para>
            Fügen Sie die Debug-Konfiguration in die Hauptdatei ein:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>sed -i '1i\source "${prefix}/debug.cfg"' /srv/tftpboot/boot/grub2/grub.cfg</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie die TFTP-Protokolle bei Startversuchen:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo journalctl -f -u tftp.socket</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie die DHCP-Protokolle auf PXE-Anforderungen:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo journalctl -f -u dhcpd</command>
            </screen>
          </step>
          <step>
            <para>
            Deaktivieren Sie den Debug-Modus nach der Fehlerbehebung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>sed -i '/source "${prefix}\/debug.cfg"/d' /srv/tftpboot/boot/grub2/grub.cfg</command>
            </screen>
          </step>
        </procedure>
      </section>
    </section>
    <section xml:id="sles-pxe-server-configure-grub2-next-steps">
      <title>Nächste Schritte</title>
      <para>
      Wenn GRUB 2 ordnungsgemäß konfiguriert wurde, können Sie mit folgenden Aktionen fortfahren:
    </para>
      <itemizedlist>
        <listitem>
          <para>
          Konfigurieren von HTTP- und TFTP-Diensten, um die Startdateien und den Inhalt des Installationsprogramms bereitzustellen
        </para>
        </listitem>
        <listitem>
          <para>
          Einrichten von DHCP-Diensten, sodass PXE-Clients zu den entsprechenden Bootloadern weitergeleitet werden
        </para>
        </listitem>
        <listitem>
          <para>
          Testen des kompletten PXE-Startvorgangs auf der Zielhardware
        </para>
        </listitem>
      </itemizedlist>
      <para>
      Das flexible GRUB 2-Konfigurationssystem bietet eine Grundlage für komplexe PXE-Bereitstellungsszenarien und unterstützt mehrere Architekturen und Installationstypen über eine einheitliche Oberfläche.
    </para>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-configure-tftp">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Konfigurieren von TFTP für den PXE-Start</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird erklärt, wie TFTP-Dienste so konfiguriert werden, dass GRUB 2-Bootloader und PXE-Startinhalt für <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Installationen bereitgestellt werden. Es deckt den traditionellen <systemitem>in.tftpd</systemitem>-Server und die integrierte TFTP-Funktionalität ab, die von <systemitem>dnsmasq</systemitem> bereitgestellt wird.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-configure-tftp-intro">
      <title>Einführung</title>
      <para>
      TFTP stellt PXE-Clients während des Netzwerk-Startvorgangs Bootloader-Dateien bereit. <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> unterstützt zwei TFTP-Serverimplementierungen: den traditionellen <systemitem>in.tftpd</systemitem>-Server aus dem <package>tftp</package>-Paket und die in <systemitem>dnsmasq</systemitem> integrierte TFTP-Funktionalität.
    </para>
    </section>
    <section xml:id="sles-pxe-server-configure-tftp-reqs">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Entweder ist das <package>tftp</package>-Paket oder das <package>dnsmasq</package>-Paket installiert
        </para>
        </listitem>
        <listitem>
          <para>
          Unter <filename>/srv/tftpboot</filename> organisierte PXE-Startdateien
        </para>
        </listitem>
        <listitem>
          <para>
          Administratorrechte zum Konfigurieren von Diensten
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-configure-tftp-intftpd">
      <title>Konfigurieren des in.tftpd-Servers</title>
      <para>
      Der <systemitem>in.tftpd</systemitem>-Server verwendet die Konfigurationsdatei <filename>/etc/sysconfig/tftp</filename>, um das TFTP-Stammverzeichnis und die Serveroptionen zu definieren.
    </para>
      <procedure xml:id="proc-configure-intftpd">
        <title>Einrichten des in.tftpd TFTP-Servers</title>
        <step>
          <para>
          Aktivieren Sie optional die ausführliche Protokollierung, indem Sie die TFTP-Optionen festlegen:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>sed -i 's/^TFTP_OPTIONS=.*/TFTP_OPTIONS="-v"/' /etc/sysconfig/tftp</command>
          </screen>
          <para>
          Die Option <option>-v</option> ermöglicht eine ausführliche Protokollierung, um die über TFTP abgerufenen Dateinamen anzuzeigen.
        </para>
        </step>
        <step>
          <para>
          Aktivieren und starten Sie den TFTP-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>systemctl enable --now tftp.service</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-configure-tftp-dnsmasq">
      <title>Konfigurieren des dnsmasq-TFTP-Servers</title>
      <para><systemitem>dnsmasq</systemitem> bietet einen integrierten TFTP-Server, der für die Verwendung des Verzeichnisses <filename>/srv/tftpboot</filename> aktiviert und konfiguriert werden kann.
    </para>
      <procedure xml:id="proc-configure-dnsmasq-tftp">
        <title>Einrichten der dnsmasq-TFTP-Funktionalität</title>
        <step>
          <para>
          Erstellen Sie die TFTP-Konfigurationsdatei:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /etc/dnsmasq.d/tftp.conf &lt;&lt; 'EOF'</command>
enable-tftp
tftp-root=/srv/tftpboot
EOF
</screen>
        </step>
        <step>
          <para>
          Aktivieren und starten Sie den dnsmasq-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>systemctl enable --now dnsmasq</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-configure-tftp-verify">
      <title>Überprüfen der TFTP-Konfiguration</title>
      <para>
      Testen Sie die Funktionalität des TFTP-Servers, um sicherzustellen, dass er Dateien für PXE-Clients bereitstellen kann.
    </para>
      <procedure xml:id="proc-verify-tftp">
        <title>Testen der Funktionalität des TFTP-Servers</title>
        <step>
          <para>
          Erstellen Sie eine Testdatei:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>echo "test file" | sudo tee /srv/tftpboot/test.txt</command>
          </screen>
        </step>
        <step>
          <para>
          Rufen Sie die Testdatei per TFTP ab:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>tftp localhost -c get test.txt /tmp/tftp-test.txt</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie, ob die Datei erfolgreich abgerufen wurde:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>cat /tmp/tftp-test.txt</command>
          </screen>
        </step>
        <step>
          <para>
          Bereinigen Sie die Testdateien:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>rm /srv/tftpboot/test.txt /tmp/tftp-test.txt</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-configure-tftp-troubleshooting">
      <title>Beheben von Fehlern bei der TFTP-Konfiguration</title>
      <para>
      Häufige Probleme beim Konfigurieren von TFTP-Diensten für PXE-Startumgebungen.
    </para>
      <section xml:id="sles-pxe-server-tftp-troubleshoot-service-conflicts">
        <title>Dienstkonflikte bei Port 69</title>
        <para>
        Sowohl <systemitem>dnsmasq</systemitem> als auch <systemitem>in.tftpd</systemitem> verwenden den UDP-Port 69 für TFTP-Dienste und können nicht gleichzeitig ausgeführt werden.
      </para>
        <procedure xml:id="proc-resolve-tftp-conflicts">
          <title>Lösen von Konflikten beim TFTP-Dienst</title>
          <step>
            <para>
            Überprüfen Sie, welche Dienste ausgeführt werden:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>systemctl status tftp.service dnsmasq</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, wovon Port 69 verwendet wird:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ss -ulnp | grep :69</command>
            </screen>
          </step>
          <step>
            <para>
            Halten Sie den in Konflikt stehenden Dienst (beispielsweise dnsmasq) an:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl stop dnsmasq</command>
            </screen>
          </step>
          <step>
            <para>
            Starten Sie Ihren bevorzugten TFTP-Dienst:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl start tftp.service</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-tftp-troubleshoot-directory">
        <title>Probleme mit dem TFTP-Verzeichnis</title>
        <para>
        Probleme beim Zugriff auf das TFTP-Stammverzeichnis können die Dateibereitstellung verhindern.
      </para>
        <procedure xml:id="proc-debug-tftp-directory">
          <title>Überprüfen der Konfiguration des TFTP-Verzeichnisses</title>
          <step>
            <para>
            Überprüfen Sie die TFTP-Verzeichniseinstellung für in.tftpd:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep TFTP_DIRECTORY /etc/sysconfig/tftp</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die TFTP-Verzeichniseinstellung für dnsmasq:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep tftp-root /etc/dnsmasq.d/tftp.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, ob das Verzeichnis vorhanden ist:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ls -la /srv/tftpboot/</command>
            </screen>
          </step>
          <step>
            <para>
            Erstellen Sie das Verzeichnis, wenn es fehlt:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>mkdir -p /srv/tftpboot</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-tftp-troubleshoot-verbose">
        <title>Aktivieren der TFTP-Protokollierung</title>
        <para>
        Die ausführliche Protokollierung hilft beim Identifizieren von Dateizugriffsproblemen bei TFTP-Übertragungen.
      </para>
        <procedure xml:id="proc-enable-tftp-verbose">
          <title>Aktivieren der ausführlichen TFTP-Protokollierung</title>
          <step>
            <para>
            Überprüfen Sie die aktuellen TFTP-Optionen:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep TFTP_OPTIONS /etc/sysconfig/tftp</command>
            </screen>
          </step>
          <step>
            <para>
            Aktivieren Sie die ausführliche Protokollierung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>sed -i 's/^TFTP_OPTIONS=.*/TFTP_OPTIONS="-v"/' /etc/sysconfig/tftp</command>
            </screen>
          </step>
          <step>
            <para>
            Starten Sie den TFTP-Service neu:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl restart tftp.service</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie TFTP-Protokolle:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u tftp.service -f</command>
            </screen>
          </step>
        </procedure>
      </section>
    </section>
    <section xml:id="sles-pxe-server-configure-tftp-next-steps">
      <title>Nächste Schritte</title>
      <para>
      Wenn TFTP konfiguriert ist, können Sie mit der Konfiguration von HTTP-Diensten für die Bereitstellung von Installationsdateien und von DHCP-Diensten zur Weiterleitung von PXE-Clients an die entsprechenden Bootloader fortfahren.
    </para>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-configure-nginx">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Konfigurieren von nginx für die HTTP-Bereitstellung</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird erklärt, wie nginx so konfiguriert wird, dass PXE-Startinhalte per HTTP bereitgestellt werden, sodass Clients Installationsprogrammdateien wie Kernel-, initrd- und squashfs-Images von einem zentralen Ort aus laden können. Die HTTP-Bereitstellung bietet bei großen Dateien eine bessere Leistung als TFTP und ist für <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Agama-Installationen erforderlich.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-configure-nginx-intro">
      <title>Einführung</title>
      <para>
      nginx fungiert als HTTP-Server für PXE-Startumgebungen und bietet über eine webbasierte Bereitstellung Zugriff auf Installationsprogrammdateien. Der HTTP-Server macht das TFTP-Startverzeichnis und die Installations-Repositorys verfügbar, sodass PXE-Clients Kernel-Images, initrd-Dateien und die Komponenten des Agama-Installationsprogramms über HTTP herunterladen können anstatt über das langsamere TFTP-Protokoll.
    </para>
    </section>
    <section xml:id="sles-pxe-server-configure-nginx-reqs">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Das installierte <package>nginx</package>-Paket
        </para>
        </listitem>
        <listitem>
          <para>
          Unter <filename>/srv/tftpboot/boot</filename> organisierte PXE-Startdateien
        </para>
        </listitem>
        <listitem>
          <para>
          Unter <filename>/srv/install</filename> verfügbare Installations-Repositorys
        </para>
        </listitem>
        <listitem>
          <para>
          Administratorrechte zum Ändern der nginx-Konfiguration
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-configure-nginx-setup">
      <title>Konfigurieren von nginx für den PXE-Start</title>
      <para>
      Die nginx-Konfiguration definiert Standortaliase, die das TFTP-Startverzeichnis und die Installations-Repositorys über HTTP-URLs verfügbar machen.
    </para>
      <procedure xml:id="proc-configure-nginx">
        <title>Einrichten des nginx-HTTP-Servers</title>
        <step>
          <para>
          Bearbeiten Sie die Konfigurationsdatei:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>vim /etc/nginx/nginx.conf</command>
          </screen>
        </step>
        <step>
          <para>
          Konfigurieren Sie den HTTP-Serverblock in Abschnitt <literal>http</literal>:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /etc/nginx/nginx.conf &lt;&lt; 'EOF'</command>
http {

    include             mime.types;
    default_type        application/octet-stream;

    charset             utf-8;
    sendfile            on;
    keepalive_timeout   65;

    server {
        listen          80  default_server;
        listen     [::]:80  default_server;

        location / {
            root   /srv/www/htdocs/;
            index  index.html index.htm;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   /srv/www/htdocs/;
        }

        # Expose TFTP boot directory for HTTP boot
        location /boot {
            alias      /srv/tftpboot/boot;
            autoindex  on;
        }

        # Expose installation repositories and profiles
        location /install {
            alias      /srv/install;
            autoindex  on;
        }
    }
}

events {
    worker_connections  1024;
}
EOF
</screen>
        </step>
        <step>
          <para>
          Testen Sie die Syntax der nginx-Konfiguration:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>nginx -t</command>
          </screen>
        </step>
        <step>
          <para>
          Aktivieren und starten Sie den nginx-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>systemctl enable --now nginx.service</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-configure-nginx-verify">
      <title>Überprüfen der nginx-Konfiguration</title>
      <para>
      Testen Sie die Funktionalität des HTTP-Servers, um sicherzustellen, dass er PXE-Startdateien und Installationsinhalte für Clients bereitstellen kann.
    </para>
      <procedure xml:id="proc-verify-nginx">
        <title>Testen des nginx-HTTP-Servers</title>
        <step>
          <para>
          Testen Sie den HTTP-Zugriff auf Startdateien:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>curl -I http://localhost/boot/</command>
          </screen>
        </step>
        <step>
          <para>
          Testen Sie den Zugriff auf das Installationsverzeichnis:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>curl -I http://localhost/install/</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie, ob auf eine bestimmte Installationsprogrammdatei zugegriffen werden kann:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>curl -I http://localhost/boot/images/SLES-16.0/x86_64/liveiso/LiveOS/squashfs.img</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-configure-nginx-troubleshooting">
      <title>Beheben von Fehlern bei der nginx-Konfiguration</title>
      <para>
      Häufige Probleme beim Konfigurieren von nginx für die HTTP-Bereitstellung beim PXE-Start.
    </para>
      <section xml:id="sles-pxe-server-nginx-troubleshoot-config">
        <title>Fehler bei der Konfigurationssyntax</title>
        <para>
        Eine falsche nginx-Konfigurationssyntax verhindert, dass der Dienst ordnungsgemäß gestartet oder neu geladen wird.
      </para>
        <procedure xml:id="proc-debug-nginx-config">
          <title>Beheben von Problemen bei der nginx-Konfiguration</title>
          <step>
            <para>
            Testen Sie die Konfigurationssyntax:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>nginx -t</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie den nginx-Dienststatus, ob beim Start ein Fehler auftritt:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>systemctl status nginx.service</command>
            </screen>
          </step>
          <step>
            <para>
            Zeigen Sie detaillierte Fehlerprotokolle an:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u nginx.service -f</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die nginx-Fehlerprotokolldatei:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tail -f /var/log/nginx/error.log</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-nginx-troubleshoot-permissions">
        <title>Probleme beim Dateizugriff und bei Berechtigungen</title>
        <para>
        nginx kann aufgrund falscher Berechtigungen oder fehlender Verzeichnisse möglicherweise keine Dateien bereitstellen.
      </para>
        <procedure xml:id="proc-debug-nginx-permissions">
          <title>Beheben von Problemen beim Dateizugriff</title>
          <step>
            <para>
            Überprüfen Sie, ob das Startverzeichnis vorhanden und aufrufbar ist:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ls -la /srv/tftpboot/boot/</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, ob das Installationsverzeichnis vorhanden ist:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ls -la /srv/install/</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, ob nginx die Verzeichnisse lesen kann:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo -u nginx ls /srv/tftpboot/boot/</command>
            </screen>
          </step>
          <step>
            <para>
            Erstellen Sie bei Bedarf fehlende Verzeichnisse:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>mkdir -p /srv/install</command>
            </screen>
          </step>
          <step>
            <para>
            Legen Sie entsprechenden Berechtigungen fest:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>chmod -R 755 /srv/tftpboot/boot /srv/install</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-nginx-troubleshoot-port">
        <title>Konflikte bei der Portbindung</title>
        <para>
        nginx kann möglicherweise nicht gestartet werden, wenn ein anderer Dienst Port 80 verwendet.
      </para>
        <procedure xml:id="proc-debug-nginx-port">
          <title>Lösen von Anschlusskonflikten</title>
          <step>
            <para>
            Überprüfen Sie, wovon Port 80 verwendet wird:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ss -tlnp | grep :80</command>
            </screen>
          </step>
          <step>
            <para>
            Halten Sie in Konflikt stehende Dienste bei Bedarf an:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl stop apache2</command>
            </screen>
          </step>
          <step>
            <para>
            Starten Sie den nginx-Dienst:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl start nginx.service</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, ob nginx Port 80 überwacht:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ss -tlnp | grep :80</command>
            </screen>
          </step>
        </procedure>
      </section>
    </section>
    <section xml:id="sles-pxe-server-configure-nginx-next-steps">
      <title>Nächste Schritte</title>
      <para>
      Wenn nginx für die HTTP-Bereitstellung konfiguriert ist, können Sie mit der Konfiguration von DHCP-Diensten zur Weiterleitung von PXE-Clients an die entsprechenden Bootloader und HTTP-Ressourcen fortfahren.
    </para>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-configure-dns">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Konfigurieren eines DNS-Servers mit dnsmasq</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird erklärt, wie DNS-Dienste mithilfe von dnsmasq konfiguriert werden, um die Hostnamenauflösung für PXE-Clients bereitzustellen, die auf <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Installationsressourcen zugreifen. Die DNS-Konfiguration ermöglicht es Clients, Hostnamen anstelle von IP-Adressen in Start-URLs und DHCP-Konfigurationen zu verwenden.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-configure-dns-intro">
      <title>Einführung</title>
      <para>
      DNS-Dienste ermöglichen es PXE-Clients, Hostnamen in Start-URLs und Installationsquellen aufzulösen. Da die vollständige DNS-Serverkonfiguration den Rahmen dieses Dokuments sprengen würde, bietet dieser Abschnitt eine grundlegende DNS-Konfiguration mit dnsmasq, mit der Clients den Hostnamen des PXE-Servers (<replaceable>PXE.EXAMPLE.NET</replaceable>) in seine IP-Adressen auflösen können.
    </para>
      <para>
      Ohne DNS-Konfiguration müssen Start-URLs direkt IP-Adressen verwenden, z. B. <literal>http://192.168.1.200/</literal> oder<literal>http://[2001:db8:0:1::200]/</literal>. Einige BIOS/UEFI-Firmware-Implementierungen unterstützen keine Hostnamen in DHCP-TFTP-URLs und erfordern IP-Adressen wie <literal>tftp://[2001:db8:0:1::200]/</literal>.
    </para>
    </section>
    <section xml:id="sles-pxe-server-configure-dns-requirements">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Das installierte <package>dnsmasq</package>-Paket
        </para>
        </listitem>
        <listitem>
          <para>
          Statische IP-Adressen, die für den PXE-Server konfiguriert sind
        </para>
        </listitem>
        <listitem>
          <para>
          Administratorrechte zum Konfigurieren von DNS-Diensten
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-configure-dns-setup">
      <title>Konfiguration der dnsmasq-DNS-Dienste</title>
      <para>
      Die dnsmasq-DNS-Konfiguration bietet eine lokale Hostnamenauflösung und verwendet Upstream-Namenserver für externe Abfragen.
    </para>
      <procedure xml:id="proc-configure-dnsmasq-dns">
        <title>Einrichten des dnsmasq-DNS-Servers</title>
        <step>
          <para>
          Erstellen Sie die DNS-Konfigurationsdatei für dnsmasq:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /etc/dnsmasq.d/dns.conf &lt;&lt; 'EOF'</command>
# DNS configuration file for dnsmasq

# Log DNS queries
log-queries

# DNS cache behavior
cache-size=10000
local-ttl=60
neg-ttl=10

# Never forward A or AAAA queries for plain names to upstream name servers
domain-needed

# Add local domain to simple names in /etc/hosts and DHCP
expand-hosts

# Specifies DNS domain and networks including local forward and reverse declarations
domain=<replaceable>EXAMPLE.NET</replaceable>,192.168.1.0/24,local
domain=<replaceable>EXAMPLE.NET</replaceable>,2001:db8:0:1::/64,local
EOF
</screen>
        </step>
        <step>
          <para>
          Fügen Sie der Datei mit den System-Hosts Hostnameneinträge hinzu:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt;&gt; /etc/hosts &lt;&lt; 'EOF'</command>
192.168.1.200 <replaceable>PXE.EXAMPLE.NET</replaceable>
2001:db8:0:1::200 <replaceable>PXE.EXAMPLE.NET</replaceable>
EOF
</screen>
        </step>
        <step>
          <para>
          Testen Sie die dnsmasq-Konfiguration:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>dnsmasq --test</command>
          </screen>
        </step>
        <step>
          <para>
          Aktivieren und starten Sie den dnsmasq-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>systemctl enable --now dnsmasq</command>
          </screen>
        </step>
      </procedure>
      <note>
        <title>Verhalten bei DNS-Weiterleitungen</title>
        <para>
        Standardmäßig verwendet dnsmasq die Namenserver in <filename>/etc/resolv.conf</filename> als Forwarder und stellt Datensätze aus <filename>/etc/hosts</filename> bereit. Dadurch kann der PXE-Server externe Hostnamen auflösen und gleichzeitig eine lokale Auflösung für PXE-bezogene Dienste bereitstellen.
      </para>
      </note>
    </section>
    <section xml:id="sles-pxe-server-configure-dns-verify">
      <title>Überprüfen der DNS-Konfiguration</title>
      <para>
      Testen Sie die Funktionalität des DNS-Servers, um sicherzustellen, dass die Hostnamenauflösung für PXE-Clients funktioniert.
    </para>
      <procedure xml:id="proc-verify-dns">
        <title>Testen der Funktionalität des DNS-Servers</title>
        <step>
          <para>
          Testen Sie die IPv4-Hostnamenauflösung:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>nslookup <replaceable>PXE.EXAMPLE.NET</replaceable> localhost</command>
          </screen>
        </step>
        <step>
          <para>
          Testen Sie die IPv6-Hostnamenauflösung:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>nslookup <replaceable>PXE.EXAMPLE.NET</replaceable> localhost | grep 2001:db8</command>
          </screen>
        </step>
        <step>
          <para>
          Testen Sie die DNS-Rückwärtssuche für IPv4:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>nslookup 192.168.1.200 localhost</command>
          </screen>
        </step>
        <step>
          <para>
          Stellen Sie sicher, dass die externe DNS-Weiterleitung weiterhin funktioniert:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>nslookup google.com localhost</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-configure-dns-troubleshooting">
      <title>Beheben von Fehlern bei der DNS-Konfiguration</title>
      <para>
      Häufige Probleme bei der Konfiguration von dnsmasq für DNS-Dienste in PXE-Umgebungen.
    </para>
      <section xml:id="sles-pxe-server-dns-troubleshoot-config">
        <title>Probleme bei der Konfiguration und den Diensten</title>
        <para>
        dnsmasq kann aufgrund von Konfigurationsfehlern oder Portkonflikten nicht gestartet werden.
      </para>
        <procedure xml:id="proc-debug-dns-config">
          <title>Beheben von Problemen bei der DNS-Konfiguration</title>
          <step>
            <para>
            Testen Sie die Syntax der dnsmasq-Konfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>dnsmasq --test</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie den dnsmasq-Dienststatus:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>systemctl status dnsmasq</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, wovon der DNS-Port 53 verwendet wird:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ss -ulnp | grep :53</command>
            </screen>
          </step>
          <step>
            <para>
            Suchen Sie in den dnsmasq-Protokollen nach Fehlern:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u dnsmasq -f</command>
            </screen>
          </step>
          <step>
            <para>
            Halten Sie in Konflikt stehende DNS-Dienste bei Bedarf an:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl stop systemd-resolved</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-dns-troubleshoot-resolution">
        <title>Fehler bei der Hostnamenauflösung</title>
        <para>
        Bei DNS-Abfragen können aufgrund einer falschen Konfiguration oder fehlender Hostnameneinträge Fehler auftreten.
      </para>
        <procedure xml:id="proc-debug-dns-resolution">
          <title>Diagnose von Problemen bei der DNS-Auflösung</title>
          <step>
            <para>
            Überprüfen Sie, ob Hostnameneinträge in der Datei mit den Hosts vorhanden sind:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep <replaceable>PXE.EXAMPLE.NET</replaceable> /etc/hosts</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Domänenkonfiguration in dnsmasq:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep domain= /etc/dnsmasq.d/dns.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die DNS-Abfrage mit ausführlicher Ausgabe:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>dig @localhost <replaceable>PXE.EXAMPLE.NET</replaceable></command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie die dnsmasq-Abfrageprotokolle:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u dnsmasq | grep "query"</command>
            </screen>
          </step>
          <step>
            <para>
            Starten Sie dnsmasq neu, um die Konfiguration neu zu laden:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl restart dnsmasq</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-dns-troubleshoot-forwarding">
        <title>Probleme bei DNS-Weiterleitungen</title>
        <para>
        Bei externen DNS-Abfragen können Fehler auftreten, wenn die Konfiguration des Upstream-Namenservers falsch ist.
      </para>
        <procedure xml:id="proc-debug-dns-forwarding">
          <title>Behebung von Problemen bei DNS-Weiterleitungen</title>
          <step>
            <para>
            Überprüfen Sie die Konfiguration des Upstream-Namenservers:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>cat /etc/resolv.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die direkte Anfrage an den Upstream-Namenserver:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>nslookup google.com 8.8.8.8</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Konfiguration der dnsmasq-Weiterleitung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep -E "server=|no-resolv" /etc/dnsmasq.d/dns.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Fügen Sie bei Bedarf einen bestimmten Upstream-Namenserver hinzu:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>echo "server=8.8.8.8" &gt;&gt; /etc/dnsmasq.d/dns.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Starten Sie den dnsmasq-Dienst neu:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl restart dnsmasq</command>
            </screen>
          </step>
        </procedure>
      </section>
    </section>
    <section xml:id="sles-pxe-server-configure-dns-next-steps">
      <title>Nächste Schritte</title>
      <para>
      Wenn DNS-Dienste konfiguriert wurden, können PXE-Clients nun Hostnamen in Start-URLs und Installationsquellen auflösen. Sie können mit der Konfiguration von DHCP-Diensten fortfahren, die für die Client-Konfiguration auf den DNS-Server verweisen.
    </para>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-configure-ntp">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Konfigurieren eines NTP-Servers mit <systemitem>chrony</systemitem></title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird erklärt, wie NTP-Dienste mithilfe von <systemitem>chrony</systemitem> konfiguriert werden, um bei <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Installationen eine genaue Zeitsynchronisierung für PXE-Clients bereitzustellen. Eine ordnungsgemäße Zeitsynchronisierung ist bei netzwerkbasierten Installationen für die Zertifikatvalidierung und Systemprotokollierung unerlässlich.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-configure-ntp-intro">
      <title>Einführung</title>
      <para>
      NTP-Dienste stellen eine genaue Zeitsynchronisierung in der gesamten Netzwerkinfrastruktur sicher. In PXE-Startumgebungen ist die synchronisierte Zeit entscheidend für die Zertifikatvalidierung bei HTTPS-Verbindungen, ordnungsgemäßen Protokollzeitstempeln und koordinierten Systemvorgängen. In diesem Abschnitt wird die grundlegende Konfiguration des NTP-Servers mithilfe von <systemitem>chrony</systemitem> beschrieben.
    </para>
    </section>
    <section xml:id="sles-pxe-server-configure-ntp-reqs">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Das installierte <package>chrony</package>-Paket
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>zypper install chrony</command>
          </screen>
        </listitem>
        <listitem>
          <para>
          Netzwerkkonnektivität mit Upstream-NTP-Servern
        </para>
        </listitem>
        <listitem>
          <para>
          Administratorrechte zum Konfigurieren von NTP-Diensten
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-configure-ntp-setup">
      <title>Konfigurieren des <systemitem>chrony</systemitem>-NTP-Diensts</title>
      <para>
      Der <systemitem>chrony</systemitem>-Dienst bietet NTP-Funktionen mit automatischer Zeitsynchronisierung mit Upstream-Servern und Funktionen zur lokalen Zeitbereitstellung für Netzwerk-Clients.
    </para>
      <procedure xml:id="proc-configure-chrony">
        <title>Einrichten eines <systemitem>chrony</systemitem>-TFTP-Servers</title>
        <step>
          <para>
          Aktivieren und starten Sie den <systemitem>chrony</systemitem>-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>systemctl enable --now chronyd.service</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-configure-ntp-verify">
      <title>Überprüfen der NTP-Konfiguration</title>
      <para>
      Testen Sie die Funktionalität des NTP-Diensts, um sicherzustellen, dass die Zeitsynchronisierung ordnungsgemäß funktioniert.
    </para>
      <procedure xml:id="proc-verify-ntp">
        <title>Testen der Funktionalität des NTP-Servers</title>
        <step>
          <para>
          Überprüfen Sie den <systemitem>chrony</systemitem>-Dienststatus:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status chronyd.service</command>
          </screen>
        </step>
        <step>
          <para>
          Zeigen Sie den aktuellen Status der Zeitsynchronisierung an:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>chronyc tracking</command>
          </screen>
        </step>
        <step>
          <para>
          Listen Sie die konfigurierten NTP-Quellen auf:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>chronyc sources</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie die NTP-Serverstatistiken:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>chronyc sourcestats</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-configure-ntp-troubleshooting">
      <title>Beheben von Fehlern bei der NTP-Konfiguration</title>
      <para>
      Häufige Probleme bei der Konfiguration von <systemitem>chrony</systemitem> für NTP-Dienste in PXE-Umgebungen.
    </para>
      <section xml:id="sles-pxe-server-ntp-troubleshoot-service">
        <title>Probleme beim Starten des Diensts:</title>
        <para>Der <systemitem>chrony</systemitem>-Dienst kann aufgrund von Konfigurationsfehlern oder Problemen mit der Netzwerkkonnektivität möglicherweise nicht gestartet werden.
      </para>
        <procedure xml:id="proc-debug-ntp-service">
          <title>Beheben von Problemen beim NTP-Dienst</title>
          <step>
            <para>
            Überprüfen Sie den Status und die Protokolle des <systemitem>chrony</systemitem>-Diensts:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>systemctl status chronyd.service</command>
            </screen>
          </step>
          <step>
            <para>
            Sehen Sie sich detaillierte Dienstprotokolle an:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u chronyd.service -f</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die <systemitem>chrony</systemitem>-Konfiguration.
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>chronyd -Q</command>
            </screen>
          </step>
          <step>
            <para>
            Starten Sie den Dienst bei Bedarf neu:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl restart chronyd.service</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-ntp-troubleshoot-sync">
        <title>Fehler bei der Zeitsynchronisierung</title>
        <para>
        Bei der Zeitsynchronisierung können aufgrund von Netzwerkproblemen oder einer falschen Serverkonfiguration Fehler auftreten.
      </para>
        <procedure xml:id="proc-debug-ntp-sync">
          <title>Diagnose von Problemen bei der Zeitsynchronisierung</title>
          <step>
            <para>
            Überprüfen Sie den aktuellen Status der Synchronisierung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>chronyc tracking</command>
            </screen>
          </step>
          <step>
            <para>
            Zeigen Sie die NTP-Quellkonnektivität an:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>chronyc sources -v</command>
            </screen>
          </step>
          <step>
            <para>
            Erzwingen Sie die sofortige Synchronisierung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>chronyc makestep</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Systemzeit im Vergleich zur Hardware-Uhr:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>timedatectl status</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Netzwerkkonnektivität mit NTP-Servern:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>chronyc activity</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-ntp-troubleshoot-firewall">
        <title>Firewall- und Netzwerkprobleme</title>
        <para>
        Der NTP-Datenverkehr kann durch Firewall-Regeln blockiert werden, wodurch die Zeitsynchronisierung verhindert wird.
      </para>
        <procedure xml:id="proc-debug-ntp-firewall">
          <title>Auflösen der NTP-Netzwerkkonnektivität</title>
          <step>
            <para>
            Überprüfen Sie, ob der NTP-Port in der Firewall offen ist:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>firewall-cmd --list-services | grep ntp</command>
            </screen>
          </step>
          <step>
            <para>
            Fügen Sie bei Bedarf den NTP-Dienst der Firewall hinzu:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>firewall-cmd --permanent --add-service=ntp</command>
            </screen>
          </step>
          <step>
            <para>
            Laden Sie die Firewall-Konfiguration neu:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>firewall-cmd --reload</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die NTP-Konnektivität manuell:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ntpdate -q pool.ntp.org</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die <systemitem>chrony</systemitem>-Portnutzung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ss -ulnp | grep :123</command>
            </screen>
          </step>
        </procedure>
      </section>
    </section>
    <section xml:id="sles-pxe-server-configure-ntp-next-steps">
      <title>Nächste Schritte</title>
      <para>
      Wenn die NTP-Dienste konfiguriert sind, sorgen der PXE-Server und die Clients für eine genaue Zeitsynchronisierung. Dies stellt bei netzwerkbasierten Installationen eine ordnungsgemäße Zertifikatvalidierung und koordinierte Systemvorgänge sicher.
    </para>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-ipv6-router">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Konfigurieren des IPv6-Router Advertisement</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird beschrieben, wie die Funktionalität des IPv6-Router Advertisement konfiguriert wird, um angemessene Router Advertisements für PXE-Clients bereitzustellen. IPv6-RA ermöglicht die IPv6-Routing-Konfiguration und die statusbehaftete automatische DHCPv6-Adresskonfiguration für <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Installationen.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-ipv6-router-intro">
      <title>Einführung</title>
      <para>
      IPv6-Router-Advertisement (RA) bietet wichtige Informationen zur Netzwerkkonfiguration für PXE-Clients, einschließlich IPv6-Routing und Einstellungen der automatischen DHCPv6-Adresskonfiguration. In diesem Abschnitt wird davon ausgegangen, dass ein IPv6-Router so konfiguriert ist, dass er angemessene Router Advertisements bereitstellt, um das IPv6-Routing zum Netzwerk und zur Standardroute zu konfigurieren und die automatische Konfiguration von statusbehafteten DHCPv6-Adressen mithilfe von <literal>AdvManagedFlag on</literal> zu ermöglichen.
    </para>
    </section>
    <section xml:id="sles-pxe-server-ipv6-router-reqs">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Das installierte <package>radvd</package>-Paket
        </para>
        </listitem>
        <listitem>
          <para>
          IPv6-Netzwerkkonfiguration auf der Serverschnittstelle
        </para>
        </listitem>
        <listitem>
          <para>
          Administratorrechte zum Konfigurieren von Router Advertisement-Diensten
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-ipv6-router-setup">
      <title>Konfigurieren von <systemitem>radvd</systemitem> für das IPv6-Router Advertisement</title>
      <para>
      Der <systemitem>radvd</systemitem>-Dienst bietet die Funktionalität des IPv6-Router Advertisement mithilfe der in <filename>/etc/radvd.conf</filename> definierten Konfiguration.
    </para>
      <procedure xml:id="proc-configure-radvd">
        <title>Einrichten des <systemitem>radvd</systemitem>-IPv6-Router Advertisement</title>
        <step>
          <para>
          Konfigurieren Sie den <systemitem>radvd</systemitem>-Dienst:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /etc/radvd.conf &lt;&lt; 'EOF'</command>
interface eno1
{
    # radvd options
    IgnoreIfMissing on;                 # Do not fail and exit when interface is missed
    AdvSendAdvert on;                   # Sending RAs on the interface is not disabled

    # Configuration settings

    AdvManagedFlag on;                  # Request IPv6 address and dns options via DHCPv6
    AdvOtherConfigFlag off;             # Request only dns info via DHCPv6, IP via SLAAC

    AdvDefaultLifetime 1800;            # Add default route via this router for 1800sec

    prefix 2001:db8:0:1::/64            # Add direct route for this local network/prefix
    {
        AdvAutonomous           off;    # Assign IPv6 address via SLAAC
        AdvValidLifetime        7200;
        AdvPreferredLifetime    3600;
    };
};
EOF
</screen>
        </step>
        <step>
          <para>
          Aktivieren und starten Sie den <systemitem>radvd</systemitem>-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>systemctl enable --now radvd</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-ipv6-router-verify">
      <title>Überprüfen des IPv6-Router Advertisement</title>
      <para>
      Testen Sie die IPv6-RA-Funktionalität, um die ordnungsgemäße Konfiguration und den ordnungsgemäßen Betrieb sicherzustellen.
    </para>
      <procedure xml:id="proc-verify-radvd">
        <title>Testen des IPv6-Router Advertisement</title>
        <step>
          <para>
          Überprüfen Sie den <systemitem>radvd</systemitem>-Dienststatus:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status radvd</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen und verifizieren Sie die IPv6-RA-Einstellungen mit <command>ravdump</command>
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>radvdump</command>
          </screen>
          <para>
          Das Dienstprogramm <command>radvdump</command> zeigt IPv6-RA-Einstellungen an, die alle paar Minuten vom IPv6-Router gesendet werden.
        </para>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-ipv6-router-forwarding">
      <title>Konfigurieren der IP-Weiterleitung für die Routerfunktionalität</title>
      <para>
      Wenn der PXE-Server auch als Router fungiert, muss die IP-Weiterleitung aktiviert sein, damit das System in einer Routerrolle funktionieren kann.
    </para>
      <procedure xml:id="proc-enable-ip-forwarding">
        <title>Aktivieren der IP-Weiterleitung auf dem PXE-Server</title>
        <step>
          <para>
          Erstellen Sie die Netzwerkkonfigurationsdatei:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /etc/sysctl.d/90-network.conf &lt;&lt; 'EOF'</command>
# This machine is a router
net.ipv4.conf.all.forwarding = 1
net.ipv6.conf.all.forwarding = 1

# Accept host autoconf on router uplink
net.ipv6.conf.uplink.accept_ra = 2
EOF
</screen>
        </step>
        <step>
          <para>
          Wenden Sie die Einstellungen der Netzwerkkonfiguration an:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>sysctl -p /etc/sysctl.d/90-network.conf</command>
          </screen>
        </step>
      </procedure>
      <note>
        <title>Überlegungen zur Routerkonfiguration</title>
        <para>
        Ein Router verarbeitet IPv6-RAs für die automatische Hostkonfiguration nicht standardmäßig. Um IPv6-RA auf einer Router-Uplink-Schnittstelle zu akzeptieren, ist die sysctl-Einstellung <literal>accept_ra = 2</literal>erforderlich. Weitere Informationen zur Routerkonfiguration, einschließlich Firewall-Anpassungen und anderer erforderlicher Schritte, finden Sie in Abschnitt „Netzwerkkonfiguration“ im Verwaltungshandbuch.
      </para>
      </note>
    </section>
    <section xml:id="sles-pxe-server-ipv6-router-troubleshooting">
      <title>Beheben von Fehlern beim IPv6-Router Advertisement</title>
      <para>
      Häufige Probleme bei der Konfiguration von IPv6-Router-Advertisement für PXE-Umgebungen.
    </para>
      <section xml:id="sles-pxe-server-ipv6-troubleshoot-service">
        <title>Probleme beim <systemitem>radvd</systemitem>-Dienst</title>
        <para>
        Der <systemitem>radvd</systemitem>-Dienst kann aufgrund von Konfigurationsfehlern oder Schnittstellenproblemen möglicherweise nicht gestartet werden.
      </para>
        <procedure xml:id="proc-debug-radvd-service">
          <title>Beheben von Problemen beim <systemitem>radvd</systemitem>-Dienst</title>
          <step>
            <para>
            Überprüfen Sie den Status und die Protokolle des <systemitem>radvd</systemitem>-Diensts:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>systemctl status radvd</command>
            </screen>
          </step>
          <step>
            <para>
            Sehen Sie sich detaillierte Dienstprotokolle an:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u radvd -f</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die <systemitem>radvd</systemitem>-Konfigurationssyntax:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>radvd -C /etc/radvd.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, ob die angegebene Schnittstelle vorhanden ist:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ip link show eno1</command>
            </screen>
          </step>
          <step>
            <para>
            Starten Sie den Dienst neu, nachdem Sie die Konfiguration korrigiert haben:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl restart radvd</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-ipv6-troubleshoot-forwarding">
        <title>Probleme bei der Konfiguration der IP-Weiterleitung</title>
        <para>
        Falsche Einstellungen der IP-Weiterleitung können die ordnungsgemäße Routerfunktionalität verhindern.
      </para>
        <procedure xml:id="proc-debug-ip-forwarding">
          <title>Diagnose von Problemen bei der IP-Weiterleitung</title>
          <step>
            <para>
            Überprüfen Sie den aktuellen Status der IP-Weiterleitung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sysctl net.ipv4.conf.all.forwarding</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie den Status der IPv6-Weiterleitung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sysctl net.ipv6.conf.all.forwarding</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die sysctl-Konfigurationsdatei:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>cat /etc/sysctl.d/90-network.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Wenden Sie die Konfiguration an, wenn die Werte falsch sind:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>sysctl -p /etc/sysctl.d/90-network.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die accept_ra-Einstellung auf der Uplink-Schnittstelle:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sysctl net.ipv6.conf.uplink.accept_ra</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-ipv6-troubleshoot-ra">
        <title>Probleme beim Empfang des Router Advertisement</title>
        <para>
        Clients empfangen oder verarbeiten IPv6-Router Advertisements möglicherweise nicht ordnungsgemäß.
      </para>
        <procedure xml:id="proc-debug-ra-reception">
          <title>Beheben von Problemen beim RA-Empfang</title>
          <step>
            <para>
            Überwachen Sie das Router Advertisement mit <command>ravdump</command>:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>radvdump -d</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die IPv6-Schnittstellenkonfiguration auf den Clients:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ip -6 addr show</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die IPv6-Routingtabelle auf den Clients:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ip -6 route show</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die IPv6-Konnektivität mit dem Router:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ping6 2001:db8:0:1::1</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Firewall-Regeln für ICMPv6:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>firewall-cmd --list-protocols | grep ipv6-icmp</command>
            </screen>
          </step>
        </procedure>
      </section>
    </section>
    <section xml:id="sles-pxe-server-ipv6-router-next-steps">
      <title>Nächste Schritte</title>
      <para>
      Wenn das IPv6-Router Advertisement konfiguriert ist, können PXE-Clients eine ordnungsgemäße IPv6-Netzwerkkonfiguration erhalten. Dies ermöglicht die DHCPv6-Funktionalität und IPv6-Konnektivität für netzwerkbasierte Installationen.
    </para>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-dhcp-dnsmasq">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Konfigurieren eines DHCP-Servers mit dnsmasq</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird erklärt, wie DHCP-Dienste mithilfe von dnsmasq konfiguriert werden, um die Netzwerkkonfigurations- und PXE-Startinformationen für <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Installationen bereitzustellen. Der dnsmasq-DHCP-Server verwendet eine Tag-basierte Konfiguration, um sowohl IPv4- als auch IPv6-PXE-Clients mit UEFI- und BIOS-Startfunktionen zu unterstützen.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-dhcp-dnsmasq-intro">
      <title>Einführung</title>
      <para>
      Der dnsmasq-DHCP-Server stellt PXE-Clients Informationen zur Netzwerkkonfiguration und zu Startdateien bereit, wobei ein Tag-basiertes System verwendet wird, das den Client-Typen entspricht und die entsprechenden Bootloader bereitstellt. Diese Konfiguration unterstützt sowohl PXEClient- als auch HttpClient-Übereinstimmungen, die für DHCPv4 und DHCPv6 verwendet werden können und das Starten über UEFI- und BIOS-Systeme auf mehreren Architekturen ermöglichen.
    </para>
      <important>
        <title>Einschränkungen von HttpClient in dnsmasq</title>
        <para>
        dnsmasq, Version 2.90 und früher, unterstützt das Zurücksenden der Vendor-Class-Option 6:16 an DHCPv6-Clients für HttpClient-Konfigurationen nicht. Für eine vollständige HttpClient-Unterstützung sollten Sie die Verwendung von Kea- oder ISC-DHCP-Servern in Betracht ziehen.
      </para>
      </important>
    </section>
    <section xml:id="sles-pxe-server-dhcp-dnsmasq-reqs">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Das installierte <package>dnsmasq</package>-Paket
        </para>
        </listitem>
        <listitem>
          <para>
          Unter <filename>/srv/tftpboot</filename> ordnungsgemäß organisierte PXE-Startdateien
        </para>
        </listitem>
        <listitem>
          <para>
          Für den DHCP-Dienst konfigurierte Netzwerkschnittstelle
        </para>
        </listitem>
        <listitem>
          <para>
          Administratorrechte zum Konfigurieren von DHCP-Diensten
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-dhcp-dnsmasq-setup">
      <title>Konfiguration der dnsmasq-DHCP-Dienste</title>
      <para>
      Die dnsmasq-DHCP-Konfiguration umfasst den Client-Typabgleich, Netzwerkbereiche und Startdateizuweisungen für IPv4- und IPv6-Netzwerke.
    </para>
      <procedure xml:id="proc-configure-dnsmasq-dhcp">
        <title>Einrichten des dnsmasq-DHCP-Servers</title>
        <step>
          <para>
          Erstellen Sie die DHCP-Konfigurationsdatei für dnsmasq:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /etc/dnsmasq.d/dhcp.conf &lt;&lt; 'EOF'</command>
# DHCP configuration file for dnsmasq

# Log DHCP processing
log-dhcp

# This is the only DHCP server, don't ignore unknown clients/send NAK
dhcp-authoritative

# Disable re-use of the DHCPv4 servername and filename fields as extra
# option space, which may confuse old or broken clients
dhcp-no-override

# IPv4 PXE/HTTP boot client matches (no enterprise number)
# Match client type in PXEClient:Arch and map to a tag
dhcp-vendorclass=set:tftp_bios_x86_pc,PXEClient:Arch:00000
dhcp-vendorclass=set:tftp_uefi_x86_64,PXEClient:Arch:00007
dhcp-vendorclass=set:tftp_ieee_ppc_64,PXEClient:Arch:0000e
dhcp-vendorclass=set:tftp_uefi_arm_64,PXEClient:Arch:00011
# Match client type in HTTPClient:Arch and map to a tag
dhcp-vendorclass=set:http_uefi_x86_64,HTTPClient:Arch:00016
dhcp-vendorclass=set:http_uefi_arm_64,HTTPClient:Arch:00019

# IPv6 PXE/HTTP boot client matches (enterprise:343 intel)
# Match client type in PXEClient:Arch and map to a tag
dhcp-vendorclass=set:tftp_bios_x86_pc,enterprise:343,PXEClient:Arch:00000
dhcp-vendorclass=set:tftp_uefi_x86_64,enterprise:343,PXEClient:Arch:00007
dhcp-vendorclass=set:tftp_ieee_ppc_64,enterprise:343,PXEClient:Arch:0000e
dhcp-vendorclass=set:tftp_uefi_arm_64,enterprise:343,PXEClient:Arch:00011
# Match client type in HTTPClient:Arch and map to a tag
dhcp-vendorclass=set:http_uefi_x86_64,enterprise:343,HTTPClient:Arch:00016
dhcp-vendorclass=set:http_uefi_arm_64,enterprise:343,HTTPClient:Arch:00019
EOF
</screen>
        </step>
        <step>
          <para>
          Konfigurieren Sie den IPv4-DHCP-Bereich und die Optionen:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt;&gt; /etc/dnsmasq.d/dhcp.conf &lt;&lt; 'EOF'</command>

# IPv4 range and options
dhcp-range=set:net0v4,192.168.1.100,192.168.1.199,255.255.255.0,1h
dhcp-option=tag:net0v4,option:domain-search,example.net
dhcp-option=tag:net0v4,option:dns-server,192.168.1.200
dhcp-option=tag:net0v4,option:ntp-server,192.168.1.1
dhcp-option=tag:net0v4,option:router,192.168.1.1
EOF
</screen>
        </step>
        <step>
          <para>
          Konfigurieren Sie die IPv4-PXE-Startoptionen:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt;&gt; /etc/dnsmasq.d/dhcp.conf &lt;&lt; 'EOF'</command>

# IPv4 PXEClient boot
dhcp-boot=tag:net0v4,tag:tftp_bios_x86_pc,/boot/grub2/i386-pc/core.0,192.168.1.200
dhcp-boot=tag:net0v4,tag:tftp_uefi_x86_64,/boot/grub2/x86_64-efi/bootx64.efi,192.168.1.200
dhcp-boot=tag:net0v4,tag:tftp_ieee_ppc_64,/boot/grub2/powerpc-ieee1275/core.elf,192.168.1.200
dhcp-boot=tag:net0v4,tag:tftp_uefi_arm_64,/boot/grub2/arm64-efi/bootaa64.efi,192.168.1.200

# IPv4 HTTPClient boot
dhcp-option-force=tag:net0v4,tag:http_uefi_x86_64,option:vendor-class,HTTPClient
dhcp-boot=tag:net0v4,tag:http_uefi_x86_64,http://192.168.1.200/boot/grub2/x86_64-efi/bootx64.efi
dhcp-option-force=tag:net0v4,tag:http_uefi_arm_64,option:vendor-class,HTTPClient
dhcp-boot=tag:net0v4,tag:http_uefi_arm_64,http://192.168.1.200/boot/grub2/arm64-efi/bootaa64.efi
EOF
</screen>
        </step>
        <step>
          <para>
          Konfigurieren Sie den IPv6-DHCP-Bereich und die Optionen:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt;&gt; /etc/dnsmasq.d/dhcp.conf &lt;&lt; 'EOF'</command>

# IPv6 range and options
dhcp-range=set:net0v6,2001:db8:0:1:d::,2001:db8:0:1:d::ffff,64,1h
dhcp-option=tag:net0v6,option6:domain-search,example.net
dhcp-option=tag:net0v6,option6:dns-server,[2001:db8:0:1::200]
dhcp-option=tag:net0v6,option6:sntp-server,[2001:db8:0:1::1]
EOF
</screen>
        </step>
        <step>
          <para>
          Konfigurieren Sie die IPv6-PXE-Startoptionen:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt;&gt; /etc/dnsmasq.d/dhcp.conf &lt;&lt; 'EOF'</command>

# IPv6 PXEClient boot
dhcp-option=tag:net0v6,tag:tftp_bios_x86_pc,option6:bootfile-url,tftp://[2001:db8:0:1::200]/boot/grub2/i386-pc/core.0
dhcp-option=tag:net0v6,tag:tftp_uefi_x86_64,option6:bootfile-url,tftp://[2001:db8:0:1::200]/boot/grub2/x86_64-efi/bootx64.efi
dhcp-option=tag:net0v6,tag:tftp_ieee_ppc_64,option6:bootfile-url,tftp://[2001:db8:0:1::200]/boot/grub2/powerpc-ieee1275/core.elf
dhcp-option=tag:net0v6,tag:tftp_uefi_arm_64,option6:bootfile-url,tftp://[2001:db8:0:1::200]/boot/grub2/arm64-efi/bootaa64.efi

# IPv6 HTTPClient boot
# Note: dnsmasq &lt;= 2.90 does not support sending vendor-class option6:16 back to client
EOF
</screen>
        </step>
        <step>
          <para>
          Testen Sie die dnsmasq-Konfiguration:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>dnsmasq --test</command>
          </screen>
        </step>
        <step>
          <para>
          Aktivieren und starten Sie den dnsmasq-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>systemctl enable --now dnsmasq</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-dhcp-dnsmasq-verify">
      <title>Überprüfen der DHCP-Konfiguration</title>
      <para>
      Testen Sie die Funktionalität des DHCP-Servers, um eine ordnungsgemäße Netzwerkkonfiguration und die Bereitstellung der Startdateien für die PXE-Clients sicherzustellen.
    </para>
      <procedure xml:id="proc-verify-dhcp-dnsmasq">
        <title>Testen des dnsmasq-DHCP-Servers</title>
        <step>
          <para>
          Überprüfen Sie den dnsmasq-Dienststatus:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status dnsmasq</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie die DHCP-Portbindung:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>ss -ulnp | grep :67</command>
          </screen>
        </step>
        <step>
          <para>
          Überwachen Sie die DHCP-Lease-Zuweisungen:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>journalctl -u dnsmasq -f</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie aktive DHCP-Leases:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>cat /var/lib/dhcp/dhcpd.leases</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-dhcp-dnsmasq-troubleshooting">
      <title>Beheben von Fehlern bei der dnsmasq-DHCP-Konfiguration</title>
      <para>
      Häufige Probleme bei der Konfiguration von dnsmasq für DHCP-Dienste in PXE-Umgebungen.
    </para>
      <section xml:id="sles-pxe-server-dhcp-dnsmasq-troubleshoot-service">
        <title>Probleme im Zusammenhang mit dem Dienststart und der Konfiguration</title>
        <para>
        dnsmasq kann aufgrund von Konfigurationsfehlern oder Portkonflikten mit anderen DHCP-Diensten nicht gestartet werden.
      </para>
        <procedure xml:id="proc-debug-dnsmasq-dhcp-service">
          <title>Beheben von Problemen beim dnsmasq-DHCP-Dienst</title>
          <step>
            <para>
            Testen Sie die Syntax der dnsmasq-Konfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>dnsmasq --test</command>
            </screen>
          </step>
          <step>
            <para>
            Suchen Sie nach DHCP-Portkonflikten:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ss -ulnp | grep :67</command>
            </screen>
          </step>
          <step>
            <para>
            Halten Sie in Konflikt stehende DHCP-Dienste an:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl stop dhcpd</command>
            </screen>
          </step>
          <step>
            <para>
            Sehen Sie sich detaillierte Dienstprotokolle an:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u dnsmasq -f</command>
            </screen>
          </step>
          <step>
            <para>
            Starten Sie dnsmasq neu, nachdem Sie Konflikte gelöst haben:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl restart dnsmasq</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-dhcp-dnsmasq-troubleshoot-leases">
        <title>Probleme bei DHCP-Lease-Zuweisungen</title>
        <para>
        Clients erhalten möglicherweise aufgrund von Problemen mit der Bereichskonfiguration oder der Netzwerkkonnektivität keine IP-Adressen.
      </para>
        <procedure xml:id="proc-debug-dhcp-leases">
          <title>Diagnose von DHCP-Leasing-Problemen</title>
          <step>
            <para>
            Überprüfen Sie die DHCP-Bereichskonfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep dhcp-range /etc/dnsmasq.d/dhcp.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie DHCP-Anforderungen in Echtzeit:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u dnsmasq -f | grep DHCP</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie den Status der Netzwerkschnittstelle:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ip addr show</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die autorisierende DHCP-Einstellung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep dhcp-authoritative /etc/dnsmasq.d/dhcp.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die DHCP-Antwort mit dhcping:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>dhcping -s 192.168.1.200</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-dhcp-dnsmasq-troubleshoot-pxe">
        <title>Probleme bei der Bereitstellung von PXE-Startdateien</title>
        <para>
        PXE-Clients erhalten möglicherweise IP-Adressen, können jedoch aufgrund einer falschen Startdateikonfiguration oder aufgrund von Problemen mit der Client-Typzuordnung nicht gestartet werden.
      </para>
        <procedure xml:id="proc-debug-pxe-boot">
          <title>Beheben von Fehlern bei der PXE-Startkonfiguration</title>
          <step>
            <para>
            Überprüfen Sie den Klassenabgleich des Client-Herstellers:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep dhcp-vendorclass /etc/dnsmasq.d/dhcp.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Startdateipfade:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep dhcp-boot /etc/dnsmasq.d/dhcp.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie den TFTP-Zugriff auf Startdateien:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tftp 192.168.1.200 -c get /boot/grub2/x86_64-efi/bootx64.efi</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie PXE-spezifische DHCP-Protokolle:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u dnsmasq | grep -E "PXE|HTTP"</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Tag-Zuweisung in Protokollen:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u dnsmasq | grep "tags:"</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-dhcp-dnsmasq-troubleshoot-ipv6">
        <title>Probleme bei der IPv6-DHCP-Konfiguration</title>
        <para>
        IPv6-DHCP-Clients erfordern eine ordnungsgemäße Router Advertising-Konfiguration und haben möglicherweise andere Adressierungsanforderungen als IPv4.
      </para>
        <procedure xml:id="proc-debug-ipv6-dhcp">
          <title>Beheben von IPv6-DHCP-Problemen</title>
          <step>
            <para>
            Überprüfen Sie die IPv6-DHCP-Bereichskonfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep "2001:db8" /etc/dnsmasq.d/dhcp.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie den Status des IPv6-Router Advertisement
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>systemctl status radvd</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie DHCPv6-Anforderungen:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u dnsmasq | grep "DHCPv6"</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die IPv6-Konnektivität:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ping6 2001:db8:0:1::200</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die IPv6-Optionskonfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep option6 /etc/dnsmasq.d/dhcp.conf</command>
            </screen>
          </step>
        </procedure>
      </section>
    </section>
    <section xml:id="sles-pxe-server-dhcp-dnsmasq-next-steps">
      <title>Nächste Schritte</title>
      <para>
      Wenn die dnsmasq-DHCP-Dienste konfiguriert sind, können PXE-Clients Informationen zur Netzwerkkonfiguration und zu Startdateien sowohl für IPv4- als auch für IPv6-Umgebungen empfangen. Das Tag-basierte System bietet eine flexible Zuweisung von Startdateien anhand der Anforderungen der Client-Architektur und der Startmethode.
    </para>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-dhcp-kea">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Konfigurieren eines DHCP-Servers mit Kea</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird erklärt, wie DHCP-Dienste mithilfe von Kea konfiguriert werden, um die Netzwerkkonfigurations- und PXE-Startinformationen für <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Installationen bereitzustellen. Kea ist ein moderner DHCP-Server, der sowohl IPv4 als auch IPv6 mit Client-Klassenübereinstimmung für PXE- und HTTP-Startszenarien unterstützt.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-dhcp-kea-intro">
      <title>Einführung</title>
      <para>
      Kea ist der moderne DHCP-Server, der von ISC als Nachfolger des alten ISC-DHCP-Servers entwickelt wurde. Es bietet robuste Unterstützung für DHCPv4 und DHCPv6 mit Client-Klassifizierungsfunktionen, die eine ordnungsgemäße Bereitstellung der Startdateien anhand der Client-Architektur und der Startmethode ermöglichen. Kea verwendet JSON-basierte Konfigurationsdateien und unterstützt erweiterte Funktionen wie die Identifizierung von Herstellerklassen für den HTTP-Start.
    </para>
    </section>
    <section xml:id="sles-pxe-server-dhcp-kea-reqs">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Installierte Kea-DHCP-Pakete: <package>kea-dhcp4</package> und <package>kea-dhcp6</package>
        </para>
        </listitem>
        <listitem>
          <para>
          Unter <filename>/srv/tftpboot</filename> ordnungsgemäß organisierte PXE-Startdateien
        </para>
        </listitem>
        <listitem>
          <para>
          Für den DHCP-Dienst konfigurierte Netzwerkschnittstelle
        </para>
        </listitem>
        <listitem>
          <para>
          Administratorrechte zum Konfigurieren von DHCP-Diensten
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-dhcp-kea-dhcpv4">
      <title>Konfigurieren des Kea-DHCPv4-Servers</title>
      <para>
      Die Kea-DHCPv4-Konfiguration verwendet Client-Klassen, um PXE- und HTTP-Client-Typen abzugleichen und geeignete Startdateien für verschiedene Architekturen bereitzustellen.
    </para>
      <procedure xml:id="proc-configure-kea-dhcpv4">
        <title>Einrichten des Kea-DHCPv4-Servers</title>
        <step>
          <para>
          Konfigurieren Sie den Kea-DHCPv4-Server:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /etc/kea/kea-dhcp4.conf &lt;&lt; 'EOF'</command>
{
  "Dhcp4": {
    "interfaces-config": {
      "interfaces": [
        "eno1"
      ]
    },
    "control-socket": {
      "socket-type": "unix",
      "socket-name": "/tmp/kea4-ctrl-socket"
    },
    "lease-database": {
      "type": "memfile",
      "persist": true,
      "name": "/var/lib/kea/dhcp4.leases",
      "lfc-interval": 3600
    },
    "expired-leases-processing": {
      "reclaim-timer-wait-time": 10,
      "flush-reclaimed-timer-wait-time": 25,
      "hold-reclaimed-time": 3600,
      "max-reclaim-leases": 100,
      "max-reclaim-time": 250,
      "unwarned-reclaim-cycles": 5
    },
    "renew-timer": 1800,
    "rebind-timer": 3150,
    "valid-lifetime": 3600,
    "option-data": [],
    "client-classes": [
      {
        "name": "pxeclients#00000",
        "test": "substring(option[60].hex,0,20) == 'PXEClient:Arch:00000'",
        "next-server": "192.168.1.200",
        "boot-file-name": "/boot/grub2/i386-pc/core.0"
      },
      {
        "name": "pxeclients#00007",
        "test": "substring(option[60].hex,0,20) == 'PXEClient:Arch:00007'",
        "next-server": "192.168.1.200",
        "boot-file-name": "/boot/grub2/x86_64-efi/bootx64.efi"
      },
      {
        "name": "pxeclients#0000e",
        "test": "substring(option[60].hex,0,20) == 'PXEClient:Arch:0000e'",
        "next-server": "192.168.1.200",
        "boot-file-name": "/boot/grub2/powerpc-ieee1275/core.elf"
      },
      {
        "name": "pxeclients#00011",
        "test": "substring(option[60].hex,0,20) == 'PXEClient:Arch:00011'",
        "next-server": "192.168.1.200",
        "boot-file-name": "/boot/grub2/arm64-efi/bootaa64.efi"
      },
      {
        "name": "httpclients#00016",
        "test": "substring(option[60].hex,0,21) == 'HTTPClient:Arch:00016'",
        "boot-file-name": "http://192.168.1.200/boot/grub2/x86_64-efi/bootx64.efi",
        "option-data": [
          {
            "name": "vendor-class-identifier",
            "data": "HTTPClient"
          }
        ]
      },
      {
        "name": "httpclients#00019",
        "test": "substring(option[60].hex,0,21) == 'HTTPClient:Arch:00019'",
        "boot-file-name": "http://192.168.1.200/boot/grub2/arm64-efi/bootaa64.efi",
        "option-data": [
          {
            "name": "vendor-class-identifier",
            "data": "HTTPClient"
          }
        ]
      }
    ],
    "subnet4": [
      {
        "id": 1,
        "subnet": "192.168.1.0/24",
        "pools": [
          {
            "pool": "192.168.1.100 - 192.168.1.199"
          }
        ],
        "option-data": [
          {
            "name": "routers",
            "data": "192.168.1.1"
          },
          {
            "name": "ntp-servers",
            "data": "192.168.1.1"
          },
          {
            "name": "domain-name-servers",
            "data": "192.168.1.200"
          },
          {
            "name": "domain-search",
            "data": "example.net"
          }
        ],
        "reservations": []
      }
    ],
    "loggers": [
      {
        "name": "kea-dhcp4",
        "output-options": [
          {
            "output": "/var/log/kea/dhcp4.log"
          }
        ],
        "severity": "INFO",
        "debuglevel": 0
      }
    ]
  }
}
EOF
</screen>
        </step>
        <step>
          <para>
          Erstellen Sie das Kea-Protokollverzeichnis:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>mkdir -p /var/log/kea</command>
          </screen>
        </step>
        <step>
          <para>
          Testen Sie die Kea-DHCPv4-Konfiguration:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>kea-dhcp4 -t /etc/kea/kea-dhcp4.conf</command>
          </screen>
        </step>
        <step>
          <para>
          Aktivieren und starten Sie den Kea-DHCPv4-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>systemctl enable --now kea-dhcp4</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-dhcp-kea-dhcpv6">
      <title>Konfigurieren des Kea-DHCPv6-Servers</title>
      <para>
      Die Kea-DHCPv6-Konfiguration bietet die IPv6-Adresszuweisung und Informationen zu Startdateien mithilfe des Klassenabgleichs des Herstellers für verschiedene Client-Architekturen.
    </para>
      <procedure xml:id="proc-configure-kea-dhcpv6">
        <title>Einrichten des Kea-DHCPv6-Servers</title>
        <step>
          <para>
          Konfigurieren Sie den Kea-DHCPv6-Server:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /etc/kea/kea-dhcp6.conf &lt;&lt; 'EOF'</command>
{
  "Dhcp6": {
    "interfaces-config": {
      "interfaces": [
        "eno1"
      ]
    },
    "control-socket": {
      "socket-type": "unix",
      "socket-name": "/tmp/kea6-ctrl-socket"
    },
    "lease-database": {
      "type": "memfile",
      "persist": true,
      "name": "/var/lib/kea/dhcp6.leases",
      "lfc-interval": 3600
    },
    "expired-leases-processing": {
      "reclaim-timer-wait-time": 10,
      "flush-reclaimed-timer-wait-time": 25,
      "hold-reclaimed-time": 3600,
      "max-reclaim-leases": 100,
      "max-reclaim-time": 250,
      "unwarned-reclaim-cycles": 5
    },
    "renew-timer": 1800,
    "rebind-timer": 2880,
    "preferred-lifetime": 3600,
    "valid-lifetime": 7200,
    "option-data": [],
    "option-def": [],
    "client-classes": [
      {
        "name": "pxeclients#00000",
        "test": "substring(option[16].hex,6,20) == 'PXEClient:Arch:00000'",
        "option-data": [
          {
            "name": "bootfile-url",
            "data": "tftp://[2001:db8:0:1::200]/boot/grub2/i386-pc/core.0"
          }
        ]
      },
      {
        "name": "pxeclients#00007",
        "test": "substring(option[16].hex,6,20) == 'PXEClient:Arch:00007'",
        "option-data": [
          {
            "name": "bootfile-url",
            "data": "tftp://[2001:db8:0:1::200]/boot/grub2/x86_64-efi/bootx64.efi"
          }
        ]
      },
      {
        "name": "pxeclients#0000e",
        "test": "substring(option[16].hex,6,20) == 'PXEClient:Arch:0000e'",
        "option-data": [
          {
            "name": "bootfile-url",
            "data": "tftp://[2001:db8:0:1::200]/boot/grub2/powerpc-ieee1275/core.elf"
          }
        ]
      },
      {
        "name": "pxeclients#00011",
        "test": "substring(option[16].hex,6,20) == 'PXEClient:Arch:00011'",
        "option-data": [
          {
            "name": "bootfile-url",
            "data": "tftp://[2001:db8:0:1::200]/boot/grub2/arm64-efi/bootaa64.efi"
          }
        ]
      }
    ],
    "subnet6": [
      {
        "id": 1,
        "subnet": "2001:db8:0:1::/64",
        "interface": "eno1",
        "pools": [
          {
            "pool": "2001:db8:0:1:d::/112"
          }
        ],
        "option-data": [
          {
            "name": "sntp-servers",
            "data": "2001:db8:0:1::1"
          },
          {
            "name": "dns-servers",
            "data": "2001:db8:0:1::200"
          },
          {
            "name": "domain-search",
            "data": "example.net"
          }
        ],
        "reservations": []
      }
    ],
    "loggers": [
      {
        "name": "kea-dhcp6",
        "output-options": [
          {
            "output": "/var/log/kea/dhcp6.log"
          }
        ],
        "severity": "INFO",
        "debuglevel": 0
      }
    ]
  }
}
EOF
</screen>
        </step>
        <step>
          <para>
          Testen Sie die Kea-DHCPv6-Konfiguration:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>kea-dhcp6 -t /etc/kea/kea-dhcp6.conf</command>
          </screen>
        </step>
        <step>
          <para>
          Aktivieren und starten Sie den Kea-DHCPv6-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>systemctl enable --now kea-dhcp6</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-dhcp-kea-verify">
      <title>Überprüfen der Kea-DHCP-Konfiguration</title>
      <para>
      Testen Sie die Funktionalität des Kea-DHCP-Servers, um eine ordnungsgemäße Netzwerkkonfiguration und die Bereitstellung der Startdateien für die PXE-Clients sicherzustellen.
    </para>
      <procedure xml:id="proc-verify-dhcp-kea">
        <title>Testen der Kea-DHCP-Server</title>
        <step>
          <para>
          Überprüfen Sie den Kea-DHCPv4-Dienststatus:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status kea-dhcp4</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie den Kea-DHCPv6-Dienststatus:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status kea-dhcp6</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie die DHCP-Portbindung:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>ss -ulnp | grep -E ":67|:547"</command>
          </screen>
        </step>
        <step>
          <para>
          Überwachen Sie DHCPv4-Protokolle:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>tail -f /var/log/kea/dhcp4.log</command>
          </screen>
        </step>
        <step>
          <para>
          Überwachen Sie DHCPv6-Protokolle:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>tail -f /var/log/kea/dhcp6.log</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie aktive DHCP-Leases:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>cat /var/lib/kea/dhcp4.leases</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-dhcp-kea-troubleshooting">
      <title>Beheben von Fehlern bei der Kea-DHCP-Konfiguration</title>
      <para>
      Häufige Probleme beim Konfigurieren von Kea-DHCP-Servern für PXE-Startumgebungen.
    </para>
      <section xml:id="sles-pxe-server-dhcp-kea-troubleshoot-config">
        <title>Probleme bei der Konfiguration und den Diensten</title>
        <para>
        Der Kea-Dienst kann aufgrund von JSON-Konfigurationsfehlern oder Problemen bei der Netzwerkschnittstelle möglicherweise nicht gestartet werden.
      </para>
        <procedure xml:id="proc-debug-kea-config">
          <title>Beheben von Problemen bei der Kea-Konfiguration</title>
          <step>
            <para>
            Testen Sie die Syntax der DHCPv4-Konfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>kea-dhcp4 -t /etc/kea/kea-dhcp4.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die Syntax der DHCPv6-Konfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>kea-dhcp6 -t /etc/kea/kea-dhcp6.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Suchen Sie nach JSON-Syntaxfehlern:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>python3 -m json.tool /etc/kea/kea-dhcp4.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Konfiguration der Netzwerkschnittstelle:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ip addr show eno1</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Kea-Dienstprotokolle:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u kea-dhcp4 -f</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-dhcp-kea-troubleshoot-leases">
        <title>Probleme bei DHCP-Lease-Zuweisungen</title>
        <para>
        Clients erhalten möglicherweise aufgrund von Problemen mit der Subnetzkonfiguration oder der Pool-Auslastung keine IP-Adressen.
      </para>
        <procedure xml:id="proc-debug-kea-leases">
          <title>Diagnose von Kea-Leasing-Problemen</title>
          <step>
            <para>
            Überprüfen Sie die Subnetz- und Pool-Konfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep -A 10 "subnet4\|pools" /etc/kea/kea-dhcp4.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie Lease-Zuweisungen in Echtzeit:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tail -f /var/log/kea/dhcp4.log | grep -E "ALLOC|DISCOVER"</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Lease-Datenbank auf Konflikte:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>cat /var/lib/kea/dhcp4.leases | tail -20</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Schnittstellenbindung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep interfaces /etc/kea/kea-dhcp4.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Löschen Sie die Lease-Datenbank bei Bedarf:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl stop kea-dhcp4</command>
            </screen> <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>mv /var/lib/kea/dhcp4.leases /var/lib/kea/dhcp4.leases.backup</command>
            </screen> <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl start kea-dhcp4</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-dhcp-kea-troubleshoot-pxe">
        <title>Probleme beim PXE-Client-Klassenabgleich</title>
        <para>
        PXE-Clients erhalten möglicherweise IP-Adressen, jedoch aufgrund von Problemen bei der Client-Klassenkonfiguration nicht die richtigen Startdateien.
      </para>
        <procedure xml:id="proc-debug-kea-pxe">
          <title>Beheben von Fehlern bei der Kea-Client-Klassifizierung</title>
          <step>
            <para>
            Überprüfen Sie Client-Klassendefinitionen:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep -A 5 "client-classes" /etc/kea/kea-dhcp4.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie den Client-Klassenabgleich in Protokollen:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tail -f /var/log/kea/dhcp4.log | grep -i class</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Muster des Herstellerklassenbezeichners:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep "PXEClient\|HTTPClient" /etc/kea/kea-dhcp4.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die Aufrufbarkeit von Startdateien:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>curl -I http://192.168.1.200/boot/grub2/x86_64-efi/bootx64.efi</command>
            </screen>
          </step>
          <step>
            <para>
            Aktivieren Sie die Debug-Protokollierung für eine detaillierte Client-Analyse:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>sed -i 's/"debuglevel": 0/"debuglevel": 99/' /etc/kea/kea-dhcp4.conf</command>
            </screen> <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl restart kea-dhcp4</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-dhcp-kea-troubleshoot-ipv6">
        <title>DHCPv6-spezifische Probleme</title>
        <para>
        IPv6-DHCP-Clients erfordern eine ordnungsgemäße Router Advertising-Konfiguration und verarbeiten Herstellerklassenoptionen anders als IPv4.
      </para>
        <procedure xml:id="proc-debug-kea-ipv6">
          <title>Beheben von Kea-DHCPv6-Problemen</title>
          <step>
            <para>
            Überprüfen Sie die DHCPv6-Subnetzkonfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep -A 10 "subnet6" /etc/kea/kea-dhcp6.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie den Status des IPv6-Router Advertisement:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>systemctl status radvd</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie den DHCPv6-Klassenabgleich des Herstellers:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tail -f /var/log/kea/dhcp6.log | grep "option\[16\]"</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie das Format der IPv6-Startdatei-URL-Option:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep "bootfile-url" /etc/kea/kea-dhcp6.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die IPv6-Konnektivität mit dem Startserver:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ping6 2001:db8:0:1::200</command>
            </screen>
          </step>
        </procedure>
      </section>
    </section>
    <section xml:id="sles-pxe-server-dhcp-kea-next-steps">
      <title>Nächste Schritte</title>
      <para>
      Wenn die Kea-DHCP-Dienste konfiguriert sind, können PXE-Clients umfassende Informationen zur Netzwerkkonfiguration und zu Startdateien sowohl für IPv4- als auch für IPv6-Umgebungen empfangen. Das Client-Klassifizierungssystem ermöglicht eine präzise Zuweisung der Startdateien anhand der Client-Architektur und unterstützt sowohl traditionelle PXE- als auch moderne HTTP-Startmethoden.
    </para>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-dhcp-isc">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Konfigurieren eines DHCP-Servers mit ISC-DHCP</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird erklärt, wie der ISC-DHCP-Server konfiguriert wird, um die Netzwerkkonfigurations- und PXE-Startinformationen für <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> 15-Installationen bereitzustellen. Das dhcp-server-Paket von ISC ist in <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> nicht mehr verfügbar. ISC-DHCP verwendet den Klassen- und Unterklassenabgleich, um PXE- und HTTP-Bootszenarien auf verschiedenen Client-Architekturen zu unterstützen.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-dhcp-isc-intro">
      <title>Einführung</title>
      <para>
      ISC-DHCP ist der traditionelle DHCP-Server, der PXE-Clients mithilfe eines Klassen- und Unterklassensystems Informationen zur Netzwerkkonfiguration und zu Startdateien bietet. ISC hat zwar das Ende der Lebensdauer dieses Servers für 2022 erklärt, er wird jedoch in vorhandenen Bereitstellungen weiterhin häufig verwendet und bietet robuste Unterstützung für PXE- und HTTP-Startszenarien mit Herstellerklassenbezeichner.
    </para>
      <important>
        <title>Status am Ende der Lebensdauer von ISC-DHCP</title>
        <para>
        ISC hat das Ende der Lebensdauer von ISC-DHCP für 2022 erklärt. Für neue Bereitstellungen sollten Sie stattdessen Kea oder dnsmasq verwenden. Diese Konfiguration wird für die Kompatibilität mit vorhandenen ISC-DHCP-Installationen bereitgestellt.
      </para>
      </important>
    </section>
    <section xml:id="sles-pxe-server-dhcp-isc-reqs">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Installierte ISC-DHCP-Pakete: <package>dhcp-server</package>
        </para>
        </listitem>
        <listitem>
          <para>
          Unter <filename>/srv/tftpboot</filename> ordnungsgemäß organisierte PXE-Startdateien
        </para>
        </listitem>
        <listitem>
          <para>
          Für den DHCP-Dienst konfigurierte Netzwerkschnittstelle
        </para>
        </listitem>
        <listitem>
          <para>
          Administratorrechte zum Konfigurieren von DHCP-Diensten
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-dhcp-isc-dhcpv4">
      <title>Konfigurieren des ISC-DHCPv4-Servers</title>
      <para>
      Die ISC-DHCPv4-Konfiguration verwendet Klassen- und Unterklassendeklarationen, um PXE- und HTTP-Client-Typen abzugleichen und geeignete Startdateien für verschiedene Architekturen bereitzustellen.
    </para>
      <procedure xml:id="proc-configure-isc-dhcpv4">
        <title>Einrichten des ISC-DHCPv4-Servers</title>
        <step>
          <para>
          Konfigurieren Sie den ISC-DHCPv4-Server:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /etc/dhcpd.conf &lt;&lt; 'EOF'</command>
# /etc/dhcpd.conf
#
# Sample configuration file for ISC dhcpd
#
# *** PLEASE CONFIGURE IT FIRST ***
#
# Don't forget to set the DHCPD_INTERFACE in the
# /etc/sysconfig/dhcpd file.
#

# if you want to use dynamical DNS updates, you should first read
# read /usr/share/doc/packages/dhcp-server/DDNS-howto.txt
#
ddns-updates off;

# Use this to enable / disable dynamic dns updates globally.
ddns-update-style none;

# default lease time
default-lease-time              3600;
max-lease-time                  7200;

##
## PXE / HTTP boot option declarations
##
class "pxeclients" {
        # PXEClient:Arch:00000:UNDI:002001
        match substring (option vendor-class-identifier, 0, 20);
}
class "httpclients" {
        # HTTPClient:Arch:00016:UNDI:003001
        match substring (option vendor-class-identifier, 0, 21);
}

##
## PXE / HTTP boot subclass request matches
##
subclass "pxeclients"   "PXEClient:Arch:00000" {
        next-server     192.168.1.200;
        filename        "/boot/grub2/i386-pc/core.0";
}
subclass "pxeclients"   "PXEClient:Arch:00007" {
        next-server     192.168.1.200;
        filename        "/boot/grub2/x86_64-efi/bootx64.efi";
}
subclass "pxeclients"   "PXEClient:Arch:0000e" {
        next-server     192.168.1.200;
        filename        "/boot/grub2/powerpc-ieee1275/core.elf";
}
subclass "pxeclients"   "PXEClient:Arch:00011" {
        next-server     192.168.1.200;
        filename        "/boot/grub2/arm64-efi/bootaa64.efi";
}

subclass "httpclients"  "HTTPClient:Arch:00016" {
        option vendor-class-identifier "HTTPClient";
        filename        "http://192.168.1.200/boot/grub2/x86_64-efi/bootx64.efi";
}
subclass "httpclients"  "HTTPClient:Arch:00019" {
        option vendor-class-identifier "HTTPClient";
        filename        "http://192.168.1.200/boot/grub2/arm64-efi/bootaa64.efi";
}

##
## Subnet declaration for the pxe network
##
subnet 192.168.1.0 netmask 255.255.255.0 {
        authoritative;

        range  dynamic-bootp            192.168.1.100 192.168.1.199;

        option subnet-mask              255.255.255.0;

        option routers                  192.168.1.1;
        option ntp-servers              192.168.1.1;
        option domain-name-servers      192.168.1.200;
        option domain-name              "example.net";
        option domain-search            "example.net";
}
EOF
</screen>
        </step>
        <step>
          <para>
          Konfigurieren Sie die DHCP-Schnittstelle in sysconfig:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>echo 'DHCPD_INTERFACE="eno1"' &gt; /etc/sysconfig/dhcpd</command>
          </screen>
        </step>
        <step>
          <para>
          Testen Sie die DHCPv4-Konfiguration:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>dhcpd -t -cf /etc/dhcpd.conf</command>
          </screen>
        </step>
        <step>
          <para>
          Aktivieren und starten Sie den ISC-DHCPv4-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>systemctl enable --now dhcpd</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-dhcp-isc-dhcpv6">
      <title>Konfigurieren des ISC-DHCPv6-Servers</title>
      <para>
      Die ISC-DHCPv6-Konfiguration bietet die IPv6-Adresszuweisung und Informationen zu Startdateien mithilfe des Klassenabgleichs des Herstellers mit ordnungsgemäßer Verarbeitung der DHCPV6-Option.
    </para>
      <procedure xml:id="proc-configure-isc-dhcpv6">
        <title>Einrichten des ISC-DHCPv6-Servers</title>
        <step>
          <para>
          Konfigurieren Sie den ISC-DHCPv6-Server:
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>cat &gt; /etc/dhcpd6.conf &lt;&lt; 'EOF'</command>
# /etc/dhcpd6.conf
#
# Sample DHCPv6 configuration file for ISC dhcpd
#
# *** PLEASE CONFIGURE IT FIRST ***
#
# Don't forget to set the DHCPD6_INTERFACE in the
# /etc/sysconfig/dhcpd file.
#

# if you want to use dynamical DNS updates, you should first
# read /usr/share/doc/packages/dhcp-server/DDNS-howto.txt
ddns-updates off;

# Use this to enable / disable dynamic dns updates globally.
ddns-update-style none;

# IPv6 address valid lifetime
#  (at the end the address is no longer usable by the client)
#  (set to 30 days, the usual IPv6 default)
default-lease-time 7200;

# IPv6 address preferred lifetime
#  (at the end the address is deprecated, i.e., the client should use
#   other addresses for new connections)
#  (set to 7 days, the	usual IPv6 default)
preferred-lifetime 3600;

##
## PXE / HTTP boot option declarations
##

# The dhcp6 option 16 is in fact an:
#   { uint32 enterprise-number, array of { uint16 len, string tag} vendor-class-data }
# this declaration is using the whole option data as string for substring match:
option dhcp6.vendor-class-as-string code 16 = string;

# this declaration is using the enterprise-number with 1st tag length and string:
option dhcp6.vendor-class-en-len-tag code 16 = {integer 32, integer 16, string};

class "pxeclients" {
        # PXEClient:Arch:00000:UNDI:002001
        # note: +6 to skip the enterprise-number+len until the PXEClient string
        match substring (option dhcp6.vendor-class-as-string, 6, 20);
}
class "httpclients" {
        # HTTPClient:Arch:00016:UNDI:003001
        # note: +6 to skip the enterprise-number+len until the HTTPClient string
        match substring (option dhcp6.vendor-class-as-string, 6, 21);
}

##
## PXE / HTTP boot subclass request matches
##
subclass "pxeclients"   "PXEClient:Arch:00000" {
        option dhcp6.bootfile-url "tftp://[2001:db8:0:1::200]/boot/grub2/i386-pc/core.0";
}
subclass "pxeclients"   "PXEClient:Arch:00007" {
        option dhcp6.bootfile-url "tftp://[2001:db8:0:1::200]/boot/grub2/x86_64-efi/bootx64.efi";
}
subclass "pxeclients"   "PXEClient:Arch:0000e" {
        option dhcp6.bootfile-url "tftp://[2001:db8:0:1::200]/boot/grub2/powerpc-ieee1275/core.elf";
}
subclass "pxeclients"   "PXEClient:Arch:00011" {
        option dhcp6.bootfile-url "tftp://[2001:db8:0:1::200]/boot/grub2/arm64-efi/bootaa64.efi";
}

subclass "httpclients"  "HTTPClient:Arch:00016" {
        option dhcp6.vendor-class-en-len-tag 343 10 "HTTPClient";
        option dhcp6.bootfile-url "http://[2001:db8:0:1::200]/boot/grub2/x86_64-efi/bootx64.efi";
}
subclass "httpclients"  "HTTPClient:Arch:00019" {
        option dhcp6.vendor-class-en-len-tag 343 10 "HTTPClient";
        option dhcp6.bootfile-url "http://[2001:db8:0:1::200]/boot/grub2/arm64-efi/bootaa64.efi";
}

##
## Subnet declaration for the pxe network
##
subnet6 2001:db8:0:1::/64 {
       authoritative;

       range6  2001:db8:0:1:d:: 2001:db8:0:1:d::ffff;

       option dhcp6.sntp-servers       2001:db8:0:1::1;
       option dhcp6.name-servers       2001:db8:0:1::200;
       option dhcp6.domain-search      "example.net";
}
EOF
</screen>
        </step>
        <step>
          <para>
          Konfigurieren Sie die DHCPv6-Schnittstelle in sysconfig:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>echo 'DHCPD6_INTERFACE="eno1"' &gt;&gt; /etc/sysconfig/dhcpd</command>
          </screen>
        </step>
        <step>
          <para>
          Testen Sie die DHCPv6-Konfiguration:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>dhcpd -6 -t -cf /etc/dhcpd6.conf</command>
          </screen>
        </step>
        <step>
          <para>
          Aktivieren und starten Sie den ISC-DHCPv6-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>systemctl enable --now dhcpd6</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-dhcp-isc-verify">
      <title>Überprüfen der ISC-DHCP-Konfiguration</title>
      <para>
      Testen Sie die Funktionalität des ISC-DHCP-Servers, um eine ordnungsgemäße Netzwerkkonfiguration und die Bereitstellung der Startdateien für die PXE-Clients sicherzustellen.
    </para>
      <procedure xml:id="proc-verify-dhcp-isc">
        <title>Testen der ISC-DHCP-Server</title>
        <step>
          <para>
          Überprüfen Sie den ISC-DHCPv4-Dienststatus:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status dhcpd</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie den ISC-DHCPv6-Dienststatus:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status dhcpd6</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie die DHCP-Portbindung:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>ss -ulnp | grep -E ":67|:547"</command>
          </screen>
        </step>
        <step>
          <para>
          Überwachen Sie DHCP-Protokolle:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>journalctl -u dhcpd -f</command>
          </screen>
        </step>
        <step>
          <para>
          Überprüfen Sie aktive DHCP-Leases:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>cat /var/lib/dhcp/dhcpd.leases</command>
          </screen>
        </step>
        <step>
          <para>
          Überwachen Sie die DHCPv6-Aktivität:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>journalctl -u dhcpd6 -f</command>
          </screen>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-dhcp-isc-troubleshooting">
      <title>Beheben von Fehlern bei der ISC-DHCP-Konfiguration</title>
      <para>
      Häufige Probleme beim Konfigurieren von ISC-DHCP-Servern für PXE-Startumgebungen.
    </para>
      <section xml:id="sles-pxe-server-dhcp-isc-troubleshoot-config">
        <title>Probleme bei der Konfiguration und den Diensten</title>
        <para>
        Der ISC-DHCP-Dienst kann aufgrund von Konfigurationssyntaxfehlern oder Problemen bei der Schnittstellenbindung möglicherweise nicht gestartet werden.
      </para>
        <procedure xml:id="proc-debug-isc-config">
          <title>Beheben von Problemen bei der ISC-DHCP-Konfiguration</title>
          <step>
            <para>
            Testen Sie die Syntax der DHCPv4-Konfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>dhcpd -t -cf /etc/dhcpd.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die Syntax der DHCPv6-Konfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>dhcpd -6 -t -cf /etc/dhcpd6.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Schnittstellenkonfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>cat /etc/sysconfig/dhcpd</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie den Status der Netzwerkschnittstelle:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ip addr show eno1</command>
            </screen>
          </step>
          <step>
            <para>
            Suchen Sie nach Portkonflikten:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ss -ulnp | grep :67</command>
            </screen>
          </step>
          <step>
            <para>
            Sehen Sie sich detaillierte Dienstprotokolle an:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u dhcpd -xe</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-dhcp-isc-troubleshoot-leases">
        <title>Probleme bei DHCP-Lease-Zuweisungen</title>
        <para>
        Clients erhalten möglicherweise aufgrund von Problemen mit der Subnetzkonfiguration oder der Autorisierung keine IP-Adressen.
      </para>
        <procedure xml:id="proc-debug-isc-leases">
          <title>Diagnose von ISC-DHCP-Leasing-Problemen</title>
          <step>
            <para>
            Überprüfen Sie die Subnetz- und Bereichskonfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep -A 10 "subnet\|range" /etc/dhcpd.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die autorisierende Einstellung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep authoritative /etc/dhcpd.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie Lease-Zuweisungen in Echtzeit:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tail -f /var/log/messages | grep dhcpd</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Lease-Datenbank auf Fehler:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tail -20 /var/lib/dhcp/dhcpd.leases</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die DHCP-Antwort manuell:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>dhcping -s 192.168.1.200 -h aa:bb:cc:dd:ee:ff</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-dhcp-isc-troubleshoot-classes">
        <title>Probleme beim Klassen- und Unterklassenabgleich</title>
        <para>
        PXE-Clients erhalten möglicherweise IP-Adressen, jedoch aufgrund von Problemen bei der Klassenabgleichskonfiguration nicht die richtigen Startdateien.
      </para>
        <procedure xml:id="proc-debug-isc-classes">
          <title>Beheben von Fehlern beim ISC-DHCP-Klassenabgleich</title>
          <step>
            <para>
            Überprüfen Sie die Klassendefinitionen:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep -A 3 "class.*clients" /etc/dhcpd.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Unterklasseneinträge:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep -A 5 "subclass" /etc/dhcpd.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie den Herstellerklassenbezeichner:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tail -f /var/log/messages | grep -E "PXEClient|HTTPClient"</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die Aufrufbarkeit von Startdateien:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tftp 192.168.1.200 -c get /boot/grub2/x86_64-efi/bootx64.efi</command>
            </screen>
          </step>
          <step>
            <para>
            Aktivieren Sie die detaillierte Protokollierung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>sed -i '1i\log-facility local7;' /etc/dhcpd.conf</command>
            </screen> <screen>
              <prompt>&gt; </prompt>
              <command>sudo</command>
              <command>systemctl restart dhcpd</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-dhcp-isc-troubleshoot-ipv6">
        <title>Probleme bei DHCPv6-Herstellerklassenoptionen</title>
        <para>
        IPv6-DHCP-Clients verfügen über eine komplexe Handhabung von Herstellerklassenoptionen, die möglicherweise eine spezielle Konfiguration für die Unterstützung des ordnungsgemäßen PXE-Starts erfordern.
      </para>
        <procedure xml:id="proc-debug-isc-ipv6">
          <title>Beheben von ISC-DHCPv6-Problemen</title>
          <step>
            <para>
            Überprüfen Sie die DHCPv6-Optionsdefinitionen:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep -A 3 "option dhcp6" /etc/dhcpd6.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Zeichenfolgenanalyse der Herstellerklasse:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep "substring.*6.*20\|21" /etc/dhcpd6.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie den DHCPv6-Klassenabgleich des Herstellers:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u dhcpd6 | grep -i vendor</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie das Format der IPv6-Startdatei-URL:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep "bootfile-url" /etc/dhcpd6.conf</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Abhängigkeit von Router-Advertisement:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>systemctl status radvd</command>
            </screen>
          </step>
          <step>
            <para>
            Testen Sie die IPv6-Konnektivität:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ping6 2001:db8:0:1::200</command>
            </screen>
          </step>
        </procedure>
      </section>
    </section>
    <section xml:id="sles-pxe-server-dhcp-isc-next-steps">
      <title>Nächste Schritte</title>
      <para>
      Wenn die ISC-DHCP-Dienste konfiguriert sind, können PXE-Clients mithilfe des traditionellen Klassen- und Unterklassensystems Informationen zur Netzwerkkonfiguration und zu Startdateien erhalten. Auch wenn ISC-DHCP das Ende der Lebensdauer erreicht hat, bietet diese Konfiguration Kompatibilität für vorhandene Bereitstellungen, die PXE- und HTTP-Startfunktionen für mehrere Client-Architekturen erfordern.
    </para>
    </section>
  </section>
  <section role="task" xml:lang="de" version="5.2" xml:id="sles-pxe-server-validate">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Validieren der PXE-Servereinrichtung</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        In diesem Abschnitt wird beschrieben, wie die komplette PXE-Servereinrichtung validiert und getestet wird, um sicherzustellen, dass alle Komponenten für <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Netzwerkinstallationen ordnungsgemäß funktionieren. Er behandelt die Dienstverifizierung, das Testen der Netzwerkkonnektivität und die durchgängige PXE-Startvalidierung.
      </para>
      </abstract>
    </info>
    <section xml:id="sles-pxe-server-validate-intro">
      <title>Einführung</title>
      <para>
      Nach der Konfiguration aller PXE-Serverkomponenten, einschließlich der TFTP-, HTTP-, DNS-, DHCP- und GRUB 2-Bootloader-Dienste, muss unbedingt überprüft werden, ob das gesamte System ordnungsgemäß funktioniert. Diese Überprüfung stellt sicher, dass PXE-Clients im Agama-Installationsprogramm erfolgreich gestartet werden und netzwerkbasierte Installationen von <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase> vornehmen können.
    </para>
    </section>
    <section xml:id="sles-pxe-server-validate-reqs">
      <title>Anforderungen</title>
      <itemizedlist>
        <listitem>
          <para>
          Alle PXE-Serverkomponenten wurden konfiguriert und werden ausgeführt
        </para>
        </listitem>
        <listitem>
          <para>
          Testen, dass Client-Systeme, den PXE-Start vornehmen können
        </para>
        </listitem>
        <listitem>
          <para>
          Netzwerkkonnektivität zwischen dem PXE-Server und den Clients
        </para>
        </listitem>
        <listitem>
          <para>
          Administratorzugriff zum Überwachen der Serverdienste
        </para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sles-pxe-server-validate-services">
      <title>Validieren der PXE-Serverdienste</title>
      <para>
      Überprüfen Sie, ob alle wichtigen PXE-Serverdienste ausgeführt werden und ordnungsgemäß konfiguriert sind, bevor Sie Tests mit PXE-Clients vornehmen.
    </para>
      <procedure xml:id="proc-validate-services">
        <title>Überprüfen des PXE-Serverdienststatus</title>
        <step>
          <para>
          Überprüfen Sie den TFTP-Dienststatus:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status tftp.socket</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Der Dienst sollte aktiv sein und Port 69 überwachen.
        </para>
        </step>
        <step>
          <para>
          Überprüfen Sie den nginx-HTTP-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status nginx</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Der Dienst sollte aktiv sein und Port 80 überwachen.
        </para>
        </step>
        <step>
          <para>
          Überprüfen Sie den DNS-Dienst (wenn Sie dnsmasq verwenden):
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status dnsmasq</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Der Dienst sollte aktiv sein und Port 53 überwachen.
        </para>
        </step>
        <step>
          <para>
          Überprüfen Sie den DHCP-Dienststatus (wählen Sie den entsprechenden Dienst aus):
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status dhcpd</command>
          </screen>
          <para>
          Für dnsmasq-DHCP:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status dnsmasq</command>
          </screen>
          <para>
          Für Kea-DHCP:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status kea-dhcp4 kea-dhcp6</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Der DHCP-Dienst sollte aktiv sein und die entsprechenden Ports überwachen.
        </para>
        </step>
        <step>
          <para>
          Überprüfen Sie den Status des IPv6-Router Advertisement (falls konfiguriert):
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status radvd</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Der Dienst sollte für IPv6-Umgebungen aktiv sein.
        </para>
        </step>
        <step>
          <para>
          Überprüfen Sie den NTP-Dienst:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>systemctl status chronyd</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Der Dienst sollte aktiv und synchronisiert sein.
        </para>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-validate-network">
      <title>Testen der Netzwerkkonnektivität und des Dateizugriffs</title>
      <para>
      Überprüfen Sie, ob PXE-Clients über das Netzwerk mithilfe von TFTP- und HTTP-Protokollen auf Startdateien und Installationsinhalte zugreifen können.
    </para>
      <procedure xml:id="proc-validate-network">
        <title>Testen des Netzwerkdateizugriffs</title>
        <step>
          <para>
          Testen Sie den TFTP-Zugriff auf Bootloader-Dateien:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>tftp localhost -c get /boot/grub2/x86_64-efi/bootx64.efi /tmp/test-bootx64.efi</command>
          </screen>
          <para>
          Überprüfen Sie, ob die Datei abgerufen wurde:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>file /tmp/test-bootx64.efi</command>
          </screen>
          <para>
          Bereinigen Sie die Testdatei:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>rm /tmp/test-bootx64.efi</command>
          </screen>
        </step>
        <step>
          <para>
          Testen Sie den HTTP-Zugriff auf die GRUB 2-Konfiguration:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>curl -I http://localhost/boot/grub2/grub.cfg</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Antwort „HTTP 200 OK“.
        </para>
        </step>
        <step>
          <para>
          Überprüfen Sie den HTTP-Zugriff auf die Installationsprogrammdateien:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>curl -I http://localhost/boot/images/SLES-16.0/x86_64/liveiso/LiveOS/squashfs.img</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Antwort „HTTP 200 OK“ mit entsprechender Inhaltslänge.
        </para>
        </step>
        <step>
          <para>
          Testen Sie die DNS-Auflösung (falls lokales DNS konfiguriert ist):
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>nslookup pxe.example.net localhost</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Ordnungsgemäße A- und AAAA-Datensatzauflösung.
        </para>
        </step>
        <step>
          <para>
          Überprüfen Sie Verzeichnis, indem Sie es nach Autoindex-Speicherorten durchsuchen:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>curl http://localhost/boot/</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Verzeichnisauflistung mit Startdateien.
        </para>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-validate-dhcp">
      <title>Validieren der DHCP-Funktionalität</title>
      <para>
      Testen Sie die Antworten des DHCP-Servers und stellen Sie sicher, dass die richtigen Startinformationen für verschiedene Client-Typen bereitgestellt werden.
    </para>
      <procedure xml:id="proc-validate-dhcp">
        <title>Testen der Antworten des DHCP-Servers</title>
        <step>
          <para>
          Überprüfen Sie die DHCP-Portbindung:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>ss -ulnp | grep -E ":67|:547"</command>
          </screen>
          <para>
          Erwartetes Ergebnis: DHCP-Dienste, die die Ports 67 (IPv4) und 547 (IPv6) überwachen.
        </para>
        </step>
        <step>
          <para>
          Überwachen Sie DHCP-Anforderungen in Echtzeit:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>journalctl -u dhcpd -f</command>
          </screen>
          <para>
          Oder für dnsmasq:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>journalctl -u dnsmasq -f</command>
          </screen>
          <para>
          Führen Sie dies weiterhin aus, um die DHCP-Aktivität während des Tests zu beobachten.
        </para>
        </step>
        <step>
          <para>
          Testen Sie die DHCP-Antwort mit dhcping (falls verfügbar):
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>dhcping -s 192.168.1.200</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Erfolgreiche DHCP-Antwort vom Server.
        </para>
        </step>
        <step>
          <para>
          Überprüfen Sie aktive DHCP-Leases:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>cat /var/lib/dhcp/dhcpd.leases</command>
          </screen>
          <para>
          Oder für Kea:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>cat /var/lib/kea/dhcp4.leases</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Lease-Einträge für Test-Clients.
        </para>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-validate-pxe-boot">
      <title>Durchgängiger PXE-Starttest</title>
      <para>
      Nehmen Sie vollständige PXE-Starttests mit tatsächlichen Client-Systemen vor, um den gesamten Startvorgang von DHCP bis zum Start des Agama-Installationsprogramms zu validieren.
    </para>
      <procedure xml:id="proc-validate-pxe-boot">
        <title>Testen des vollständigen PXE-Startvorgangs</title>
        <step>
          <para>
          Bereiten Sie ein Test-Clientsystem vor:
        </para>
          <itemizedlist>
            <listitem>
              <para>
              Konfigurieren von BIOS/UEFI, um den Netzwerkstart zu aktivieren
            </para>
            </listitem>
            <listitem>
              <para>
              Festlegen des Netzwerkstarts als erste Startpriorität
            </para>
            </listitem>
            <listitem>
              <para>
              Verbinden des Clients mit demselben Netzwerk wie der PXE-Server
            </para>
            </listitem>
          </itemizedlist>
        </step>
        <step>
          <para>
          Überwachen Sie die PXE-Serverprotokolle während des Client-Starts:
        </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>journalctl -f | grep -E "dhcp|tftp|nginx"</command>
          </screen>
        </step>
        <step>
          <para>
          Starten Sie den Test-Client und beobachten Sie Folgendes:
        </para>
          <orderedlist>
            <listitem>
              <para>
              Der Client sollte die IP-Adresse per DHCP erhalten
            </para>
            </listitem>
            <listitem>
              <para>
              Der Client sollte den Bootloader per TFTP herunterladen
            </para>
            </listitem>
            <listitem>
              <para>
              Das GRUB 2-Menü sollte mit den Installationsoptionen angezeigt werden
            </para>
            </listitem>
            <listitem>
              <para>
              Kernel und initrd sollten per HTTP geladen werden
            </para>
            </listitem>
            <listitem>
              <para>
              Das Agama-Installationsprogramm sollte erfolgreich gestartet werden
            </para>
            </listitem>
          </orderedlist>
        </step>
        <step>
          <para>
          Überprüfen Sie die Erkennung der Client-Architektur, indem Sie verschiedene Client-Typen testen:
        </para>
          <itemizedlist>
            <listitem>
              <para>
              Ältere BIOS-x86_64-Systeme (sollten core.0 erhalten)
            </para>
            </listitem>
            <listitem>
              <para>
              UEFI-x86_64-Systeme (sollten bootx64.efi erhalten)
            </para>
            </listitem>
            <listitem>
              <para>
              UEFI-aarch64-Systeme (sollten bootaa64.efi erhalten)
            </para>
            </listitem>
          </itemizedlist>
        </step>
        <step>
          <para>
          Testen Sie den IPv6-PXE-Start (falls IPv6 konfiguriert ist):
        </para>
          <itemizedlist>
            <listitem>
              <para>
              Ausschließliches Aktivieren der IPv6-Netzwerkkonfiguration auf dem Test-Client
            </para>
            </listitem>
            <listitem>
              <para>
              Überprüfen der DHCPv6-Adresszuweisung
            </para>
            </listitem>
            <listitem>
              <para>
              Bestätigen der Bereitstellung der IPv6-Startdatei-URL
            </para>
            </listitem>
          </itemizedlist>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-validate-installation">
      <title>Validierung der Funktionalität des Agama-Installationsprogramms</title>
      <para>
      Überprüfen Sie, ob das Agama-Installationsprogramm ordnungsgemäß gestartet wird und auf die Installationsquellen zugreifen kann, um <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Installationen abzuschließen.
    </para>
      <procedure xml:id="proc-validate-agama">
        <title>Testen des Starts des Agama-Installationsprogramms</title>
        <step>
          <para>
          Überprüfen Sie die Aufrufbarkeit der Agama-Weboberfläche:
        </para>
          <para>
          Notieren Sie sich beim Starten des Clients die zugewiesene IP-Adresse und greifen Sie auf Folgendes zu:
        </para>
          <screen>http://<replaceable>CLIENT_IP_ADDRESS</replaceable></screen>
          <para>
          Erwartetes Ergebnis: Die Agama-Weboberfläche sollte erfolgreich geladen werden.
        </para>
        </step>
        <step>
          <para>
          Überprüfen Sie die Protokolle des Agama-Installationsprogramms auf dem Client:
        </para>
          <para>
          Wechseln Sie zur Konsole (Alt+F2) und führen Sie Folgendes aus:
        </para>
          <screen>
            <prompt role="root"># </prompt>
            <command>journalctl -u agama-web-server -f</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Keine kritischen Fehler beim Start von Agama.
        </para>
        </step>
        <step>
          <para>
          Überprüfen Sie die Aufrufbarkeit der Installationsquelle:
        </para>
          <para>
          Überprüfen Sie für vollständige ISO-Installationen den Repository-Zugriff:
        </para>
          <screen>
            <prompt role="root"># </prompt>
            <command>curl -I http://192.168.1.200/install/SLES-16.0/x86_64/</command>
          </screen>
          <para>
          Erwartetes Ergebnis: Antwort „HTTP 200 OK“ mit Verzeichnisliste.
        </para>
        </step>
        <step>
          <para>
          Fähigkeit zur Installation von Testpaketen:
        </para>
          <para>
          Überprüfen Sie auf der Agama-Oberfläche Folgendes:
        </para>
          <itemizedlist>
            <listitem>
              <para>
              Das System kann verfügbare Festplatten erkennen
            </para>
            </listitem>
            <listitem>
              <para>
              Die Netzwerkkonfiguration wird beibehalten
            </para>
            </listitem>
            <listitem>
              <para>
              Auf das Paket-Repository kann zugegriffen werden
            </para>
            </listitem>
            <listitem>
              <para>
              Die Installation kann abgeschlossen werden
            </para>
            </listitem>
          </itemizedlist>
        </step>
      </procedure>
    </section>
    <section xml:id="sles-pxe-server-validate-troubleshooting">
      <title>Beheben von Fehlern bei der Validierung</title>
      <para>
      Häufige Probleme bei der PXE-Servervalidierung und deren Lösungsschritte.
    </para>
      <section xml:id="sles-pxe-server-validate-troubleshoot-dhcp">
        <title>Fehler bei der DHCP-Zuweisung</title>
        <para>
        Clients erhalten beim PXE-Start keine IP-Adressen.
      </para>
        <procedure xml:id="proc-troubleshoot-dhcp-validation">
          <title>Behebung von Problemen bei der DHCP-Validierung</title>
          <step>
            <para>
            Überprüfen Sie die DHCP-Dienstkonflikte:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ss -ulnp | grep :67</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, ob die Netzwerkschnittstelle aktiv ist:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ip addr show eno1</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Verfügbarkeit des DHCP-Bereichs:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>nmap -sn 192.168.1.100-199</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie die DHCP-Protokolle auf Fehler:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u dhcpd | tail -50</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-validate-troubleshoot-boot">
        <title>Fehler bei der Bereitstellung von Startdateien</title>
        <para>
        Clients erhalten IP-Adressen, können jedoch keine Startdateien herunterladen.
      </para>
        <procedure xml:id="proc-troubleshoot-boot-validation">
          <title>Lösen von Probleme mit Startdateien</title>
          <step>
            <para>
            Überprüfen Sie die Aufrufbarkeit des TFTP-Diensts:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>tftp 192.168.1.200 -c get /boot/grub2/x86_64-efi/bootx64.efi</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Dateiberechtigungen:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>ls -la /srv/tftpboot/boot/grub2/x86_64-efi/</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie die TFTP-Zugriffsprotokolle:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -u tftp.socket -f</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Architekturerkennung:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep -E "PXEClient|HTTPClient" /var/log/messages</command>
            </screen>
          </step>
        </procedure>
      </section>
      <section xml:id="sles-pxe-server-validate-troubleshoot-installer">
        <title>Fehler beim Start des Agama-Installationsprogramms</title>
        <para>
        Die Startdateien werden erfolgreich geladen, aber das Agama-Installationsprogramm kann nicht gestartet werden.
      </para>
        <procedure xml:id="proc-troubleshoot-installer-validation">
          <title>Lösen von Problemen beim Start von Agama</title>
          <step>
            <para>
            Überprüfen Sie den HTTP-Zugriff auf die Installationsprogrammdateien:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>curl -I http://192.168.1.200/boot/images/SLES-16.0/x86_64/liveiso/LiveOS/squashfs.img</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie die Syntax der Kernelparameter in der GRUB 2-Konfiguration:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>grep "root=live:" /srv/tftpboot/boot/grub2/menu.cfg</command>
            </screen>
          </step>
          <step>
            <para>
            Überwachen Sie den Client-Startvorgang:
          </para>
            <screen>
              <prompt>&gt; </prompt>
              <command>journalctl -f | grep -E "kernel|initrd|agama"</command>
            </screen>
          </step>
          <step>
            <para>
            Überprüfen Sie, ob die Netzwerkkonfiguration beibehalten wurde:
          </para>
            <screen>
              <prompt role="root"># </prompt>
              <command>ip addr show</command>
            </screen>
          </step>
        </procedure>
      </section>
    </section>
    <section xml:id="sles-pxe-server-validate-checklist">
      <title>Checkliste für die PXE-Servervalidierung</title>
      <para>
      Verwenden Sie diese Checkliste, um systematisch alle Aspekte Ihrer PXE-Serverkonfiguration zu überprüfen.
    </para>
      <table xml:id="table-pxe-validation-checklist">
        <title>Checkliste für die PXE-Servervalidierung</title>
        <tgroup cols="3">
          <colspec colnum="1" colname="col1" colwidth="30*"/>
          <colspec colnum="2" colname="col2" colwidth="50*"/>
          <colspec colnum="3" colname="col3" colwidth="20*"/>
          <thead>
            <row>
              <entry>Komponente</entry>
              <entry>Validierungsschritt</entry>
              <entry>Status</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>TFTP-Dienst</entry>
              <entry>Dienst aktiv, Port 69 überwacht, Dateien aufrufbar</entry>
              <entry>☐</entry>
            </row>
            <row>
              <entry>HTTP-Dienst</entry>
              <entry>nginx aktiv, Port 80 überwacht, Installationsprogrammdateien aufrufbar</entry>
              <entry>☐</entry>
            </row>
            <row>
              <entry>DNS-Dienst</entry>
              <entry>Hostnamenauflösung funktioniert, Port 53 überwacht</entry>
              <entry>☐</entry>
            </row>
            <row>
              <entry>DHCP-Dienst</entry>
              <entry>IP-Zuweisung funktioniert, Startoptionen werden bereitgestellt</entry>
              <entry>☐</entry>
            </row>
            <row>
              <entry>GRUB 2-Konfiguration</entry>
              <entry>Menü wird geladen, Architekturerkennung funktioniert</entry>
              <entry>☐</entry>
            </row>
            <row>
              <entry>IPv6-Unterstützung</entry>
              <entry>Router Advertisement aktiv, DHCPv6 funktioniert</entry>
              <entry>☐</entry>
            </row>
            <row>
              <entry>PXE-Boot</entry>
              <entry>Client startet erfolgreich, erhält den richtigen Bootloader</entry>
              <entry>☐</entry>
            </row>
            <row>
              <entry>Agama-Installationsprogramm</entry>
              <entry>Installationsprogramm wird gestartet; Weboberfläche aufrufbar</entry>
              <entry>☐</entry>
            </row>
            <row>
              <entry>Installationsquelle</entry>
              <entry>Repository aufrufbar, Pakete installierbar</entry>
              <entry>☐</entry>
            </row>
            <row>
              <entry>Netzwerkbeibehaltung</entry>
              <entry>Netzwerkkonfiguration wird während der Installation beibehalten</entry>
              <entry>☐</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </section>
    <section xml:id="sles-pxe-server-validate-conclusion">
      <title>Fazit der Validierung</title>
      <para>
      Ein ordnungsgemäß validierter PXE-Server sollte vom Start des Client-Netzwerks bis zum Start des Agama-Installationsprogramms eine erfolgreiche und durchgängige Funktionalität aufweisen. Alle Dienste sollten fehlerfrei funktionieren und die Clients sollten in der Lage sein, <phrase><phrase os="sles;sles_ai">SUSE Linux Enterprise Server</phrase></phrase> <phrase><phrase os="sles">16.0</phrase></phrase>-Installationen über Netzwerk abzuschließen. Regelmäßige Validierungstests stellen die kontinuierliche Zuverlässigkeit der PXE-Infrastruktur für automatisierte Bereitstellungen sicher.
    </para>
    </section>
  </section>
  <section version="5.2" xml:id="legal-disclaimer">
    <info>
      <title xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">Rechtliche Hinweise</title>
    </info>
    <para> Copyright © 2006–<?dbtimestamp format="Y"?>, SUSE LLC und Mitwirkende. Alle Rechte vorbehalten. </para>
    <para>
    Es wird die Genehmigung erteilt, dieses Dokument unter den Bedingungen der GNU Free Documentation License, Version 1.2 oder (optional) Version 1.3 zu vervielfältigen, zu verbreiten und/oder zu verändern; die unveränderlichen Abschnitte hierbei sind der Urheberrechtshinweis und die Lizenzbedingungen. Eine Kopie dieser Lizenz (Version 1.2) finden Sie in Abschnitt <quote>GNU Free Documentation License</quote>.
  </para>
    <para>
    Die SUSE Marken finden Sie in <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.suse.com/company/legal/"></link>. Alle anderen Marken von Drittanbietern sind Besitz ihrer jeweiligen Eigentümer. Markensymbole (®, ™ usw.) kennzeichnen Marken von SUSE und ihren Tochtergesellschaften. Sternchen (*) kennzeichnen Marken von Drittanbietern.
  </para>
    <para>
    Alle Informationen in diesem Buch wurden mit größter Sorgfalt zusammengestellt. Auch hierdurch kann jedoch keine hundertprozentige Richtigkeit gewährleistet werden. Weder SUSE LLC noch ihre Tochtergesellschaften noch die Autoren noch die Übersetzer können für mögliche Fehler und deren Folgen haftbar gemacht werden.
  </para>
  </section>
  <appendix xmlns:its="http://www.w3.org/2005/11/its" version="5.2" role="legal" its:translate="no" xml:id="doc-gfdl-license">
    <info>
      <title xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">GNU Free Documentation License</title>
    </info>
    <para>
  Copyright (C) 2000, 2001, 2002 Free Software Foundation, Inc. 51 Franklin St,
  Fifth Floor, Boston, MA 02110-1301 USA. Everyone is permitted to copy and
  distribute verbatim copies of this license document, but changing it is not
  allowed.
 </para>
    <bridgehead renderas="sect4">
    0. PREAMBLE
  </bridgehead>
    <para>
  The purpose of this License is to make a manual, textbook, or other
  functional and useful document "free" in the sense of freedom: to assure
  everyone the effective freedom to copy and redistribute it, with or without
  modifying it, either commercially or non-commercially. Secondarily, this
  License preserves for the author and publisher a way to get credit for their
  work, while not being considered responsible for modifications made by
  others.
 </para>
    <para>
  This License is a kind of "copyleft", which means that derivative works of
  the document must themselves be free in the same sense. It complements the
  GNU General Public License, which is a copyleft license designed for free
  software.
 </para>
    <para>
  We have designed this License to use it for manuals for free software,
  because free software needs free documentation: a free program should come
  with manuals providing the same freedoms that the software does. But this
  License is not limited to software manuals; it can be used for any textual
  work, regardless of subject matter or whether it is published as a printed
  book. We recommend this License principally for works whose purpose is
  instruction or reference.
 </para>
    <bridgehead renderas="sect4">
    1. APPLICABILITY AND DEFINITIONS
  </bridgehead>
    <para>
  This License applies to any manual or other work, in any medium, that
  contains a notice placed by the copyright holder saying it can be distributed
  under the terms of this License. Such a notice grants a world-wide,
  royalty-free license, unlimited in duration, to use that work under the
  conditions stated herein. The "Document", below, refers to any such manual or
  work. Any member of the public is a licensee, and is addressed as "you". You
  accept the license if you copy, modify or distribute the work in a way
  requiring permission under copyright law.
 </para>
    <para>
  A "Modified Version" of the Document means any work containing the Document
  or a portion of it, either copied verbatim, or with modifications and/or
  translated into another language.
 </para>
    <para>
  A "Secondary Section" is a named appendix or a front-matter section of the
  Document that deals exclusively with the relationship of the publishers or
  authors of the Document to the Document's overall subject (or to related
  matters) and contains nothing that could fall directly within that overall
  subject. (Thus, if the Document is in part a textbook of mathematics, a
  Secondary Section may not explain any mathematics.) The relationship could be
  a matter of historical connection with the subject or with related matters,
  or of legal, commercial, philosophical, ethical or political position
  regarding them.
 </para>
    <para>
  The "Invariant Sections" are certain Secondary Sections whose titles are
  designated, as being those of Invariant Sections, in the notice that says
  that the Document is released under this License. If a section does not fit
  the above definition of Secondary then it is not allowed to be designated as
  Invariant. The Document may contain zero Invariant Sections. If the Document
  does not identify any Invariant Sections then there are none.
 </para>
    <para>
  The "Cover Texts" are certain short passages of text that are listed, as
  Front-Cover Texts or Back-Cover Texts, in the notice that says that the
  Document is released under this License. A Front-Cover Text may be at most 5
  words, and a Back-Cover Text may be at most 25 words.
 </para>
    <para>
  A "Transparent" copy of the Document means a machine-readable copy,
  represented in a format whose specification is available to the general
  public, that is suitable for revising the document straightforwardly with
  generic text editors or (for images composed of pixels) generic paint
  programs or (for drawings) some widely available drawing editor, and that is
  suitable for input to text formatters or for automatic translation to a
  variety of formats suitable for input to text formatters. A copy made in an
  otherwise Transparent file format whose markup, or absence of markup, has
  been arranged to thwart or discourage subsequent modification by readers is
  not Transparent. An image format is not Transparent if used for any
  substantial amount of text. A copy that is not "Transparent" is called
  "Opaque".
 </para>
    <para>
  Examples of suitable formats for Transparent copies include plain ASCII
  without markup, Texinfo input format, LaTeX input format, SGML or XML using a
  publicly available DTD, and standard-conforming simple HTML, PostScript or
  PDF designed for human modification. Examples of transparent image formats
  include PNG, XCF and JPG. Opaque formats include proprietary formats that can
  be read and edited only by proprietary word processors, SGML or XML for which
  the DTD and/or processing tools are not generally available, and the
  machine-generated HTML, PostScript or PDF produced by some word processors
  for output purposes only.
 </para>
    <para>
  The "Title Page" means, for a printed book, the title page itself, plus such
  following pages as are needed to hold, legibly, the material this License
  requires to appear in the title page. For works in formats which do not have
  any title page as such, "Title Page" means the text near the most prominent
  appearance of the work's title, preceding the beginning of the body of the
  text.
 </para>
    <para>
  A section "Entitled XYZ" means a named subunit of the Document whose title
  either is precisely XYZ or contains XYZ in parentheses following text that
  translates XYZ in another language. (Here XYZ stands for a specific section
  name mentioned below, such as "Acknowledgements", "Dedications",
  "Endorsements", or "History".) To "Preserve the Title" of such a section when
  you modify the Document means that it remains a section "Entitled XYZ"
  according to this definition.
 </para>
    <para>
  The Document may include Warranty Disclaimers next to the notice which states
  that this License applies to the Document. These Warranty Disclaimers are
  considered to be included by reference in this License, but only as regards
  disclaiming warranties: any other implication that these Warranty Disclaimers
  may have is void and has no effect on the meaning of this License.
 </para>
    <bridgehead renderas="sect4">
    2. VERBATIM COPYING
  </bridgehead>
    <para>
  You may copy and distribute the Document in any medium, either commercially
  or non-commercially, provided that this License, the copyright notices, and
  the license notice saying this License applies to the Document are reproduced
  in all copies, and that you add no other conditions whatsoever to those of
  this License. You may not use technical measures to obstruct or control the
  reading or further copying of the copies you make or distribute. However, you
  may accept compensation in exchange for copies. If you distribute a large
  enough number of copies you must also follow the conditions in section 3.
 </para>
    <para>
  You may also lend copies, under the same conditions stated above, and you may
  publicly display copies.
 </para>
    <bridgehead renderas="sect4">
    3. COPYING IN QUANTITY
  </bridgehead>
    <para>
  If you publish printed copies (or copies in media that commonly have printed
  covers) of the Document, numbering more than 100, and the Document's license
  notice requires Cover Texts, you must enclose the copies in covers that
  carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the
  front cover, and Back-Cover Texts on the back cover. Both covers must also
  clearly and legibly identify you as the publisher of these copies. The front
  cover must present the full title with all words of the title equally
  prominent and visible. You may add other material on the covers in addition.
  Copying with changes limited to the covers, as long as they preserve the
  title of the Document and satisfy these conditions, can be treated as
  verbatim copying in other respects.
 </para>
    <para>
  If the required texts for either cover are too voluminous to fit legibly, you
  should put the first ones listed (as many as fit reasonably) on the actual
  cover, and continue the rest onto adjacent pages.
 </para>
    <para>
  If you publish or distribute Opaque copies of the Document numbering more
  than 100, you must either include a machine-readable Transparent copy along
  with each Opaque copy, or state in or with each Opaque copy a
  computer-network location from which the general network-using public has
  access to download using public-standard network protocols a complete
  Transparent copy of the Document, free of added material. If you use the
  latter option, you must take reasonably prudent steps, when you begin
  distribution of Opaque copies in quantity, to ensure that this Transparent
  copy will remain thus accessible at the stated location until at least one
  year after the last time you distribute an Opaque copy (directly or through
  your agents or retailers) of that edition to the public.
 </para>
    <para>
  It is requested, but not required, that you contact the authors of the
  Document well before redistributing any large number of copies, to give them
  a chance to provide you with an updated version of the Document.
 </para>
    <bridgehead renderas="sect4">
    4. MODIFICATIONS
  </bridgehead>
    <para>
  You may copy and distribute a Modified Version of the Document under the
  conditions of sections 2 and 3 above, provided that you release the Modified
  Version under precisely this License, with the Modified Version filling the
  role of the Document, thus licensing distribution and modification of the
  Modified Version to whoever possesses a copy of it. In addition, you must do
  these things in the Modified Version:
 </para>
    <orderedlist numeration="upperalpha" spacing="normal">
      <listitem>
        <para>
    Use in the Title Page (and on the covers, if any) a title distinct from
    that of the Document, and from those of previous versions (which should, if
    there were any, be listed in the History section of the Document). You may
    use the same title as a previous version if the original publisher of that
    version gives permission.
   </para>
      </listitem>
      <listitem>
        <para>
    List on the Title Page, as authors, one or more persons or entities
    responsible for authorship of the modifications in the Modified Version,
    together with at least five of the principal authors of the Document (all
    of its principal authors, if it has fewer than five), unless they release
    you from this requirement.
   </para>
      </listitem>
      <listitem>
        <para>
    State on the Title page the name of the publisher of the Modified Version,
    as the publisher.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve all the copyright notices of the Document.
   </para>
      </listitem>
      <listitem>
        <para>
    Add an appropriate copyright notice for your modifications adjacent to the
    other copyright notices.
   </para>
      </listitem>
      <listitem>
        <para>
    Include, immediately after the copyright notices, a license notice giving
    the public permission to use the Modified Version under the terms of this
    License, in the form shown in the Addendum below.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve in that license notice the full lists of Invariant Sections and
    required Cover Texts given in the Document's license notice.
   </para>
      </listitem>
      <listitem>
        <para>
    Include an unaltered copy of this License.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve the section Entitled "History", Preserve its Title, and add to it
    an item stating at least the title, year, new authors, and publisher of the
    Modified Version as given on the Title Page. If there is no section
    Entitled "History" in the Document, create one stating the title, year,
    authors, and publisher of the Document as given on its Title Page, then add
    an item describing the Modified Version as stated in the previous sentence.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve the network location, if any, given in the Document for public
    access to a Transparent copy of the Document, and likewise the network
    locations given in the Document for previous versions it was based on.
    These may be placed in the "History" section. You may omit a network
    location for a work that was published at least four years before the
    Document itself, or if the original publisher of the version it refers to
    gives permission.
   </para>
      </listitem>
      <listitem>
        <para>
    For any section Entitled "Acknowledgements" or "Dedications", Preserve the
    Title of the section, and preserve in the section all the substance and
    tone of each of the contributor acknowledgements and/or dedications given
    therein.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve all the Invariant Sections of the Document, unaltered in their
    text and in their titles. Section numbers or the equivalent are not
    considered part of the section titles.
   </para>
      </listitem>
      <listitem>
        <para>
    Delete any section Entitled "Endorsements". Such a section may not be
    included in the Modified Version.
   </para>
      </listitem>
      <listitem>
        <para>
    Do not retitle any existing section to be Entitled "Endorsements" or to
    conflict in title with any Invariant Section.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve any Warranty Disclaimers.
   </para>
      </listitem>
    </orderedlist>
    <para>
  If the Modified Version includes new front-matter sections or appendices that
  qualify as Secondary Sections and contain no material copied from the
  Document, you may at your option designate some or all of these sections as
  invariant. To do this, add their titles to the list of Invariant Sections in
  the Modified Version's license notice. These titles must be distinct from any
  other section titles.
 </para>
    <para>
  You may add a section Entitled "Endorsements", provided it contains nothing
  but endorsements of your Modified Version by various parties--for example,
  statements of peer review or that the text has been approved by an
  organization as the authoritative definition of a standard.
 </para>
    <para>
  You may add a passage of up to five words as a Front-Cover Text, and a
  passage of up to 25 words as a Back-Cover Text, to the end of the list of
  Cover Texts in the Modified Version. Only one passage of Front-Cover Text and
  one of Back-Cover Text may be added by (or through arrangements made by) any
  one entity. If the Document already includes a cover text for the same cover,
  previously added by you or by arrangement made by the same entity you are
  acting on behalf of, you may not add another; but you may replace the old
  one, on explicit permission from the previous publisher that added the old
  one.
 </para>
    <para>
  The author(s) and publisher(s) of the Document do not by this License give
  permission to use their names for publicity for or to assert or imply
  endorsement of any Modified Version.
 </para>
    <bridgehead renderas="sect4">
    5. COMBINING DOCUMENTS
  </bridgehead>
    <para>
  You may combine the Document with other documents released under this
  License, under the terms defined in section 4 above for modified versions,
  provided that you include in the combination all of the Invariant Sections of
  all of the original documents, unmodified, and list them all as Invariant
  Sections of your combined work in its license notice, and that you preserve
  all their Warranty Disclaimers.
 </para>
    <para>
  The combined work need only contain one copy of this License, and multiple
  identical Invariant Sections may be replaced with a single copy. If there are
  multiple Invariant Sections with the same name but different contents, make
  the title of each such section unique by adding at the end of it, in
  parentheses, the name of the original author or publisher of that section if
  known, or else a unique number. Make the same adjustment to the section
  titles in the list of Invariant Sections in the license notice of the
  combined work.
 </para>
    <para>
  In the combination, you must combine any sections Entitled "History" in the
  various original documents, forming one section Entitled "History"; likewise
  combine any sections Entitled "Acknowledgements", and any sections Entitled
  "Dedications". You must delete all sections Entitled "Endorsements".
 </para>
    <bridgehead renderas="sect4">
    6. COLLECTIONS OF DOCUMENTS
  </bridgehead>
    <para>
  You may make a collection consisting of the Document and other documents
  released under this License, and replace the individual copies of this
  License in the various documents with a single copy that is included in the
  collection, provided that you follow the rules of this License for verbatim
  copying of each of the documents in all other respects.
 </para>
    <para>
  You may extract a single document from such a collection, and distribute it
  individually under this License, provided you insert a copy of this License
  into the extracted document, and follow this License in all other respects
  regarding verbatim copying of that document.
 </para>
    <bridgehead renderas="sect4">
    7. AGGREGATION WITH INDEPENDENT WORKS
  </bridgehead>
    <para>
  A compilation of the Document or its derivatives with other separate and
  independent documents or works, in or on a volume of a storage or
  distribution medium, is called an "aggregate" if the copyright resulting from
  the compilation is not used to limit the legal rights of the compilation's
  users beyond what the individual works permit. When the Document is included
  in an aggregate, this License does not apply to the other works in the
  aggregate which are not themselves derivative works of the Document.
 </para>
    <para>
  If the Cover Text requirement of section 3 is applicable to these copies of
  the Document, then if the Document is less than one half of the entire
  aggregate, the Document's Cover Texts may be placed on covers that bracket
  the Document within the aggregate, or the electronic equivalent of covers if
  the Document is in electronic form. Otherwise they must appear on printed
  covers that bracket the whole aggregate.
 </para>
    <bridgehead renderas="sect4">
    8. TRANSLATION
  </bridgehead>
    <para>
  Translation is considered a kind of modification, so you may distribute
  translations of the Document under the terms of section 4. Replacing
  Invariant Sections with translations requires special permission from their
  copyright holders, but you may include translations of some or all Invariant
  Sections in addition to the original versions of these Invariant Sections.
  You may include a translation of this License, and all the license notices in
  the Document, and any Warranty Disclaimers, provided that you also include
  the original English version of this License and the original versions of
  those notices and disclaimers. In case of a disagreement between the
  translation and the original version of this License or a notice or
  disclaimer, the original version will prevail.
 </para>
    <para>
  If a section in the Document is Entitled "Acknowledgements", "Dedications",
  or "History", the requirement (section 4) to Preserve its Title (section 1)
  will typically require changing the actual title.
 </para>
    <bridgehead renderas="sect4">
    9. TERMINATION
  </bridgehead>
    <para>
  You may not copy, modify, sublicense, or distribute the Document except as
  expressly provided for under this License. Any other attempt to copy, modify,
  sublicense or distribute the Document is void, and will automatically
  terminate your rights under this License. However, parties who have received
  copies, or rights, from you under this License will not have their licenses
  terminated so long as such parties remain in full compliance.
 </para>
    <bridgehead renderas="sect4">
    10. FUTURE REVISIONS OF THIS LICENSE
  </bridgehead>
    <para>
  The Free Software Foundation may publish new, revised versions of the GNU
  Free Documentation License from time to time. Such new versions will be
  similar in spirit to the present version, but may differ in detail to address
  new problems or concerns. See
  <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.gnu.org/copyleft/"></link>.
 </para>
    <para>
  Each version of the License is given a distinguishing version number. If the
  Document specifies that a particular numbered version of this License "or any
  later version" applies to it, you have the option of following the terms and
  conditions either of that specified version or of any later version that has
  been published (not as a draft) by the Free Software Foundation. If the
  Document does not specify a version number of this License, you may choose
  any version ever published (not as a draft) by the Free Software Foundation.
 </para>
    <bridgehead renderas="sect4">
    ADDENDUM: How to use this License for your documents
  </bridgehead>
    <screen>Copyright (c) YEAR YOUR NAME.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled “GNU
Free Documentation License”.</screen>
    <para>
  If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
  replace the &#x201C;with...Texts.&#x201D; line with this:
 </para>
    <screen>with the Invariant Sections being LIST THEIR TITLES, with the
Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</screen>
    <para>
  If you have Invariant Sections without Cover Texts, or some other combination
  of the three, merge those two alternatives to suit the situation.
 </para>
    <para>
  If your document contains nontrivial examples of program code, we recommend
  releasing these examples in parallel under your choice of free software
  license, such as the GNU General Public License, to permit their use in free
  software.
</para>
  </appendix>
</article>
