<?xml version="1.0"?>
<article xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="systemd-services" xml:lang="ja">
  <info>
    <title xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its"><systemitem class="daemon">systemd</systemitem>の基本</title>
    <revhistory xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xml:id="rh-systemd-services">
      <revision>
        <date>2023-08-02</date>
        <revdescription>
          <para>
              Initial version.
            </para>
        </revdescription>
      </revision>
    </revhistory>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="updated" content="2023-10-26" its:translate="no"/>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="architecture" its:translate="no">
      <phrase>AMD64/Intel&#xA0;64</phrase>
      <phrase>POWER</phrase>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="productname" its:translate="no">
      <productname condition="6.0" os="slmicro">
        <phrase>
          <phrase os="slmicro">SUSE Linux Micro</phrase>
        </phrase>
      </productname>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="title" its:translate="yes"><systemitem class="daemon">systemd</systemitem>サービスの管理</meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="description" its:translate="yes"><systemitem class="daemon">systemd</systemitem>サービスを理解および管理します。</meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="social-descr" its:translate="yes"><systemitem class="daemon">systemd</systemitem>サービスの説明</meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="category" its:translate="no">
      <phrase>Systems Management</phrase>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="task" its:translate="no">
      <phrase>Administration</phrase>
      <phrase>Configuration</phrase>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="series" its:translate="no">Product &amp; Solutions</meta>
    <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
      <dm:bugtracker>
        <dm:url>https://bugzilla.suse.com/enter_bug.cgi</dm:url>
        <dm:component>Smart Docs</dm:component>
        <dm:product>Documentation</dm:product>
        <dm:assignee>amrita.sakthivel@suse.com</dm:assignee>
      </dm:bugtracker>
      <dm:translation>yes</dm:translation>
    </dm:docmanager>
    <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
      <variablelist>
        <varlistentry>
          <term>概要</term>
          <listitem>
            <para><systemitem class="daemon">systemd</systemitem>は、システム設定とサービスを管理する場合に使用します。<systemitem class="daemon">systemd</systemitem>は、タスクを「ユニット」と呼ばれるコンポーネントに編成し、ユニットのグループを「ターゲット」に編成します。<emphasis></emphasis><emphasis></emphasis>

              </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>目的</term>
          <listitem>
            <para>
                <systemitem class="daemon">systemd</systemitem>の基本について習得します。これには、サービス管理、依存関係の追跡、ログ記録、リソース管理、ソケットの有効化、システム制御などの重要な機能が含まれます。 </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>所要時間</term>
          <listitem>
            <para>
                理解に20分ほどを要します。
              </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>要件</term>
          <listitem>
            <itemizedlist>
              <listitem>
                <para>
                      Linuxコマンドの基本的な理解
                    </para>
              </listitem>
              <listitem>
                <para>
                   Linuxのプロセス、デーモン、およびコントロールグループの基本的な理解
                  </para>
              </listitem>
            </itemizedlist>
          </listitem>
        </varlistentry>
      </variablelist>
    </abstract>
  </info>
  <section role="concept" xml:lang="ja" version="5.2" xml:id="about-systemd">
    <info>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion"><systemitem class="daemon">systemd</systemitem>とは</title>
    </info>
    <para><systemitem class="daemon">systemd</systemitem>は、Linuxオペレーティングシステムのシステムおよびサービスマネージャです。主要なLinuxディストリビューションでデフォルトの初期化システムです。<systemitem class="daemon">systemd</systemitem>は、ユーザが直接開始するのではなく、<filename>/sbin/init </filename>を介してインストールされ、初期ブート中に起動されます。<systemitem class="daemon">systemd</systemitem>は、ブート時に最初のプロセス(PID 1)として実行されたときにユーザスペースサービスを起動および維持するinitシステムとして機能します。PID 1は<emphasis>init</emphasis>と呼ばれ、最初に作成されるLinuxユーザモードプロセスです。その実行はシステムのシャットダウンまで継続します。
      </para>
    <para><systemitem class="daemon">systemd</systemitem>はPID 1を所有し、カーネルによって直接起動されます。他のすべてのプログラムは、<systemitem class="daemon">systemd</systemitem>またはそのいずれかの子プロセスによって直接起動します。<systemitem class="daemon">systemd</systemitem>は、ホストのファイルシステムをマウントし、一時ファイルを管理します。SysV initスクリプトとの下位互換性があります。SysVは、<systemitem class="daemon">systemd</systemitem>よりも以前の初期化システムです。</para>
    <para><systemitem class="daemon">systemd</systemitem>では、ユニットとは、システムが操作および管理方法を認識しているリソースのことです。これは、<systemitem class="daemon">systemd</systemitem>ツールで使用されるプライマリオブジェクトです。これらのリソースは、設定ファイルであるユニットファイルで定義します。</para>
    <para><command>systemctl</command>は、initシステムを制御する中央管理ツールです。<systemitem class="daemon">systemd</systemitem>システムおよびサービスマネージャの状態を調べ、制御するために使用されます。</para>
    <para><systemitem class="daemon">systemd</systemitem>でいうターゲットとは、システムのブート中に同期ポイントとして機能する関連ユニットのグループです。ターゲットのユニットファイルの拡張子は<literal>.target</literal>です。ターゲットのユニットは、依存関係の連鎖を通じてさまざまな<systemitem class="daemon">systemd</systemitem>ユニットをまとめたものです。
        </para>
    <para>トラブルシューティングには<command>journalctl</command>を使用できます。これを使用して、<systemitem class="daemon">systemd</systemitem>ジャーナルからのログメッセージを問い合わせたり、表示したりします。</para>
    <para><systemitem class="daemon">systemd</systemitem>の詳細については、<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://systemd.io"/>および<command>man 1 systemd</command>を参照してください。</para>
  </section>
  <section role="concept" xml:lang="ja" version="5.2" xml:id="boot-process">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion"><systemitem class="daemon">systemd</systemitem>のブートプロセスについて </title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
      ブートプロセスの最初の手順は、LinuxオペレーティングシステムのメインコンポーネントであるLinuxカーネルをロードすることです。ロードされると、カーネルはハードウェアを初期化し、システムで実行される最初のプロセスである<systemitem class="daemon">systemd</systemitem>プロセスを開始します。
        </para>
      </abstract>
    </info>
    <section xml:id="linux-boot-process">
      <title>Linuxのブートプロセス</title>
      <para>Linuxのブートプロセスは、オペレーティングシステムの起動の初期ステージです。これは、オペレーティングシステムがメモリをロードし、コンポーネントを初期化してユーザアプリケーションの実行を準備するプロセスです。</para>
      <para>Linuxのブートプロセスは次の4つの主要なステージに分けられます。</para>
      <variablelist>
        <varlistentry>
          <term>ステージ1: BIOS</term>
          <listitem>
            <para>
           コンピュータの電源をオンにすると、コンピュータはBIOS (Basic Input/Output System)を起動し、POST (Power On Self Test)を実行します。POSTは、ハードディスク、SSD、キーボード、RAM、USBポートなどのコンポーネントやその他のハードウェアの機能を検査する整合性チェックです。ハードウェアが期待どおりに動作する場合、ブートプロセスは次のステージに進みます。</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>ステージ2: ブートローダ</term>
          <listitem>
            <para> POSTが完了すると、BIOSはMBR (マスターブートレコード)に保存されているブートローダプログラムを検索してロードします。MBRは512バイトのコードで、通常はハードドライブのアーキテクチャに応じて<filename>/dev/sda</filename>または<filename>/dev/hda</filename>に配置されています。MBRは、LinuxのライブUSBまたはDVDインストール上に配置することもできます。BIOSは、このMBRコードをロードして実行します。</para>
            <para>Linuxには、主要なブートローダとしてLILO、GRUB、およびGRUB2の3つがあります。GRUB2 (Grand Unified Bootloader)ブートローダは、最新のLinuxディストリビューションにおける最新のプライマリブートローダです。GRUB2の設定ファイルは<filename> /boot/grub2/grub2.cfg</filename>にあります。BIOSは、GRUB2ブートローダを見つけると、GRUB2を実行してメインメモリ(RAM)にロードします。</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>ステージ3: Linuxカーネルの初期化</term>
          <listitem>
            <para>Linuxカーネルは、オペレーティングシステムの心臓部です。Linuxシステムでは、カーネルはハードウェアとのインタフェースとして機能し、メモリ管理を制御し、プロセスを管理します。ブートローダは、選択したLinuxカーネルをロードします。カーネルは、圧縮されたバージョンから自己抽出され、ルートファイルシステムをマウントします。その後、<filename>/sbin/init</filename>プログラムを実行します。</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>ステージ4: <systemitem class="daemon">systemd</systemitem></term>
          <listitem>
            <para>カーネルは、Linuxオペレーティングシステムのシステムおよびサービスマネージャである<systemitem class="daemon">systemd</systemitem>をロードします。続いて、<systemitem class="daemon">systemd</systemitem>が他のすべての初期化プロセスを実行します。</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section xml:id="systemd-linux-boot-process">
      <title><systemitem class="daemon">systemd</systemitem>によるブートプロセス </title>
      <para> カーネルが<systemitem class="daemon">systemd</systemitem>をロードすると、<systemitem class="daemon">systemd</systemitem>が処理を引き継ぎ、システムを稼働させるために必要な他のシステムサービスを開始します。これには、ネットワーキングサービス、ログインマネージャなどのサービスが含まれます。</para>
      <para> ブートプロセスは、特定のターゲットユニットの実行順に並列化されます。<systemitem class="daemon">systemd</systemitem>は、<filename>/etc/systemd/system/default.target </filename>ファイルを使用して、Linuxシステムをブートするターゲットを判断します。このファイルは、グラフィカルログインマネージャをブートする<filename>graphical.target</filename>へのリンクになっています。<systemitem class="daemon">systemd</systemitem>は、<filename>default.target</filename>の依存関係であるすべてのターゲットユニットを有効にし、さらにこれらの依存関係の依存関係すべてを再帰的に有効にします。すべてのサービスが開始されると、システムの使用準備が整い、ログインマネージャが表示されます。これで、システムにログインして、システムの使用を開始できるようになります。
  </para>
    </section>
    <section xml:id="systemd-analyze-command">
      <title><command>systemd-analyze</command>コマンドによるシステムブートプロセスのパフォーマンスの分析 </title>
      <para><command>systemd-analyze</command>コマンドを使用して、システムブートプロセスのパフォーマンスを分析します。また、システムおよびサービスマネージャから他の状態情報やトレース情報を取得することもできます。このコマンドを使用して、ユニットファイルが正しいことを確認したり、システムマネージャの高度なデバッグに役立つ特別な機能にアクセスしたりします。
      </para>
      <para>次に例を示します。</para>
      <variablelist>
        <varlistentry>
          <term>
            システムのブートにかかる時間の表示<emphasis></emphasis>
          </term>
          <listitem>
            <screen><prompt>&gt; </prompt>systemd-analyze time
Startup finished in 3.404s (kernel) + 2.415s (initrd) + 13.125s (userspace) = 18.945s
graphical.target reached after 13.117s in userspace
</screen>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            ブートプロセスの概要の取得(開始されているサービスや、各サービスの開始にかかる時間など)<emphasis></emphasis>
          </term>
          <listitem>
            <screen><prompt>&gt; </prompt>systemd-analyze critical-chain
  The time when unit became active or started is printed after the "@" character.
  The time the unit took to start is printed after the "+" character.

  graphical.target @13.117s
  &#x2514;&#x2500;multi-user.target @13.117s
    &#x2514;&#x2500;getty.target @13.117s
      &#x2514;&#x2500;getty@tty1.service @13.116s
        &#x2514;&#x2500;plymouth-quit-wait.service @10.775s +2.338s
          &#x2514;&#x2500;systemd-user-sessions.service @10.769s +3ms
            &#x2514;&#x2500;remote-fs.target @10.764s
              &#x2514;&#x2500;iscsi.service @10.747s +16ms
                &#x2514;&#x2500;network-online.target @10.744s
                  &#x2514;&#x2500;NetworkManager-wait-online.service @1.547s +9.197s
                    &#x2514;&#x2500;NetworkManager.service @1.507s +37ms
                      &#x2514;&#x2500;network-pre.target @1.504s
                        &#x2514;&#x2500;wpa_supplicant.service @2.341s +5ms
                          &#x2514;&#x2500;dbus.service @1.042s
                            &#x2514;&#x2500;basic.target @1.036s
                              &#x2514;&#x2500;sockets.target @1.036s
                                &#x2514;&#x2500;snapd.socket @1.035s +590us
                                  &#x2514;&#x2500;sysinit.target @1.030s
                                    &#x2514;&#x2500;systemd-update-utmp.service @1.025s +5ms
                                      &#x2514;&#x2500;auditd.service @976ms +47ms
                                        &#x2514;&#x2500;systemd-tmpfiles-setup.service @964ms +9ms
                                          &#x2514;&#x2500;local-fs.target @962ms
                                            &#x2514;&#x2500;snapd.mounts.target @961ms
                                              &#x2514;&#x2500;snap-core18-2796.mount @417ms +543ms
                                                &#x2514;&#x2500;dev-loop9.device @961ms +628us
</screen>
            <para>このコマンドは、指定した各ユニットまたはデフォルトのターゲットについて、タイムクリティカルなユニットのツリーを出力します。サービスの初期化は、ソケットの有効化とユニットの並列実行に依存する場合があります。<command>blame</command>コマンドと同様に、ユニットの有効化にかかる時間を表示します。これは、アクティブ状態に直接移行するデバイスユニットなどのユニットでは定義されていません。 </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            ブートプロセス中に開始されたサービスのリストの表示(各サービスにかかった時間順に表示される)<emphasis></emphasis>
          </term>
          <listitem>
            <screen><prompt>&gt; </prompt>systemd-analyze blame
  9.197s NetworkManager-wait-online.service
  4.002s fwupd.service
  2.338s plymouth-quit-wait.service
  1.282s dracut-pre-udev.service
  1.062s sys-devices-platform-serial8250-tty-ttyS0.device
  1.062s dev-ttyS0.device
  1.061s dev-ttyS1.device
  1.061s sys-devices-platform-serial8250-tty-ttyS1.device
  1.060s dev-ttyS11.device
  1.060s sys-devices-platform-serial8250-tty-ttyS11.device
  1.059s sys-devices-platform-serial8250-tty-ttyS13.device
  1.059s dev-ttyS13.device
  1.059s sys-devices-platform-serial8250-tty-ttyS10.device
  1.059s dev-ttyS10.device
  1.058s sys-devices-platform-serial8250-tty-ttyS14.device
  1.058s dev-ttyS14.device
  1.058s dev-ttyS12.device
  1.058s sys-devices-platform-serial8250-tty-ttyS12.device
  1.056s sys-devices-platform-serial8250-tty-ttyS17.device
</screen>
            <para>他のサービスの初期化が完了するまで待つために、あるサービスの初期化が遅くなることがあります。このコマンドを使用して、ユニットの有効化にかかる時間を表示します。これは、アクティブ状態に直接移行するデバイスユニットなどのユニットでは定義されていません。<literal>Type=simple</literal>であるサービスの結果は表示されません。<systemitem class="daemon">systemd</systemitem>は、これらのサービスは直ちに開始されると見なすので、初期化の遅延を分析できないためです。
</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            ブートプロセス中に発生するイベントを表示するベクタグラフィックファイルの生成<emphasis></emphasis>
          </term>
          <listitem>
            <screen><prompt>&gt; </prompt>systemd-analyze plot &gt; /temp/sample.svg
</screen>
            <para>このコマンドは、<literal>temp</literal>ディレクトリにSVGファイルを作成します。SVGファイルは、一連のグラフィックベクタを定義したテキストファイルで、LibreOffice Drawなどのアプリケーションでグラフを生成するために使用されます。</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
  <section role="concept" xml:lang="ja" version="5.2" xml:id="unit-file">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">ユニットファイルの構造</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
<systemitem class="daemon">systemd</systemitem>では、ユニットとは、システムが操作および管理方法を認識しているリソースを指します。これは、<systemitem class="daemon">systemd</systemitem>ツールで使用されるプライマリオブジェクトです。これらのリソースは、設定ファイルであるユニットファイルを使用して定義します。<systemitem class="daemon">systemd</systemitem>を使用する作業では、ユニットファイルを理解していると管理が容易になります。ユニットファイルではシンプルな宣言型の構文を使用するので、有効化したときにユニットの目的と効果を簡単に確認できます。ユニットファイルには、次のようにディレクティブを記述したセクションがあります。
      </para>
      </abstract>
    </info>
    <screen>
        [Section]
        Directive1=value
        Directive2=value
        . . .
      </screen>
    <para>各タイプのユニットファイルには以下のセクションがあります。</para>
    <variablelist>
      <varlistentry>
        <term>
          <literal>[Unit]</literal>
        </term>
        <listitem>
          <para>
         ほとんどのユニットファイルの先頭には<literal>[Unit]</literal>セクションがあります。このセクションを使用して、ユニットファイルのメタデータを定義し、ユニットファイルの他のユニットファイルとの関係を設定します。このセクションは、ユニットファイルの概要を記述していることから通常は先頭に配置されます。
        </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>[Automount] / [Mount] / [Path] / [Service] / [Slice] / [Socket] /[Swap] / [Timer]</literal>
        </term>
        <listitem>
          <para>
          ユニットファイルのタイプごとに固有のディレクティブを記述したセクションです。使用可能なすべてのユニットファイルのタイプについては<xref linkend="type-unit-file"/>を参照してください。タイプ<literal>device</literal>、<literal>target</literal>、<literal>snapshot</literal>、および<literal>scope</literal>には、タイプ固有のセクションがないことに注意してください。
         </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>[Install]</literal>
        </term>
        <listitem>
          <para>
         これは多くの場合、ユニットファイルの最後のセクションであり、オプションです。このセクションを使用して、ユニットファイルが有効または無効なときのその動作を定義します。ユニットファイルを有効にすると、そのファイルはブート時に自動的に起動します。特定のユニットでは、適切に動作するために他の関連ユニットとの依存関係を持っていることがあります。たとえば、<systemitem class="resource">chrony</systemitem>にはディレクティブ<literal>After</literal>、<literal>Wants</literal>、および<literal>Before</literal>が必要で、これらはすべて<systemitem class="resource">chrony</systemitem>が動作するための依存関係です。
        </para>
        </listitem>
      </varlistentry>
    </variablelist>
    <example xml:id="systemd-unit-file-example">
      <title><systemitem class="daemon">systemd</systemitem>のサービスファイル </title>
      <screen>[Unit]
Description=usbguard <co xml:id="systemd-unit-file-descr"/>

[Service]
ExecStart=/usr/sbin/usb-daemon <co xml:id="systemd-unit-file-exec"/>

[Install]
WantedBy=multi-user.target <co xml:id="systemd-unit-file-multiuser"/></screen>
    </example>
    <calloutlist>
      <callout arearefs="systemd-unit-file-descr">
        <para>
            サービスファイルの目的の簡単でわかりやすい説明。
          </para>
      </callout>
      <callout arearefs="systemd-unit-file-exec">
        <para>
            サービスの開始時に実行するプログラムを指定します。
          </para>
      </callout>
      <callout arearefs="systemd-unit-file-multiuser">
        <para>
            ネットワーキングを備えたマルチユーザシステムを起動します。グラフィカルな環境はありません。このディレクティブで依存関係を指定できます。
          </para>
      </callout>
    </calloutlist>
  </section>
  <section role="concept" xml:lang="ja" version="5.2" xml:id="type-unit-file">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">ユニットファイルのタイプ</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
      ファイル拡張子でユニットのタイプを判断できます。<systemitem class="daemon">systemd</systemitem>では、記述されたリソースのタイプによってユニットが分類されています。
      </para>
      </abstract>
    </info>
    <para><systemitem class="daemon">systemd</systemitem>で使用可能なユニットファイルのタイプは次のとおりです。</para>
    <variablelist>
      <varlistentry>
        <term>
          <literal>.service</literal>
        </term>
        <listitem>
          <para>
          サービスやアプリケーションをどのように管理するかを記述します。これには、サービスの開始または停止方法、設定ファイルの再ロード方法(該当する場合)、サービスを自動的に開始する条件、関連するユニットファイルの依存関係または階層情報が含まれます。
         </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>.scope</literal>
        </term>
        <listitem>
          <para>
         このユニットファイルは、<systemitem class="daemon">systemd</systemitem>によって、D-Busインタフェースから受信した情報から自動的に作成され、外部で作成された一連のシステムプロセスを管理するために使用されます。
         </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>.path</literal>
        </term>
        <listitem>
          <para>
       パスを使用した有効化で使用するパスを定義します。デフォルトでは、ファイル名のベース名が同じ<literal>.service</literal>ユニットファイルが有効になります。<literal>inotify</literal>は、ファイルの変更に関する通知を受け取る必要があるプログラムで使用するカーネルAPIです。
         </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>.snapshot</literal>
        </term>
        <listitem>
          <para>
        <command>systemctl snapshot</command>コマンドによって<literal>.snapshot</literal>ユニットファイルが自動的に作成されます。このコマンドでは、システムの現在の状態を表す一時的なスナップショットが作成されます。システムを変更するとその現在の状態を変更できます。一時的な状態のロールバックにはスナップショットを使用します。
        </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>.timer</literal>
        </term>
        <listitem>
          <para>
        <systemitem class="daemon">systemd</systemitem>で管理するタイマを定義します。このタイマは、遅延または実行スケジュールを設定した有効化で使用するcronジョブに似ています。このタイマが設定値に達すると、ベース名が同じでファイル拡張子が<filename>.service</filename>であるユニットファイルが起動します。
        </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>.slice</literal>
        </term>
        <listitem>
          <para>
        Linuxのコントロールグループのノードを関連付けます。これにより、スライスに関連付けたプロセスへのリソース割り当てやリソース制限ができます。この名前は、コントロールグループツリーにおける階層を示します。ユニットは、そのタイプに応じてデフォルトでスライスに配置されます。
         </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>.target</literal>
        </term>
        <listitem>
          <para>
         ブート時または状態の変更時に他のユニットと同期状態にするか、システムを新しい状態にします。他のユニットでは、ターゲットの操作と同期するためにターゲットとの関係を指定します。
                </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>.socket</literal>
        </term>
        <listitem>
          <para>
         ソケットベースの有効化で<systemitem class="daemon">systemd</systemitem>が使用するネットワーク、IPCソケット、またはFIFOバッファを記述します。このユニットで定義したソケット上でアクティビティが確認されると起動する<literal>.service</literal>ファイルがあります。
                </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>.device</literal>
        </term>
        <listitem>
          <para>
        ファイルシステム<literal>udev</literal>または<literal>sysfs</literal>で<systemitem class="daemon">systemd</systemitem>による管理が指示されているデバイスを定義します。すべてのデバイスに<literal>.device</literal>ファイルが存在するわけではありません。デバイスの順序指定、マウント、またはアクセスで、このユニットファイルが必要です。
         </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>.swap</literal>
        </term>
        <listitem>
          <para>
          システムのスワップ空間を定義します。ユニットファイルの名前は、この空間のデバイスまたはファイルパスを反映している必要があります。
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>.mount</literal>
        </term>
        <listitem>
          <para>
         <systemitem class="daemon">systemd</systemitem>で管理するシステムのマウントポイントを定義します。このファイルには、スラッシュをダッシュに変更したマウントパスに基づく名前が割り当てられます。<filename>/etc/fstab</filename>のエントリには、自動的に作成されたユニットを指定できます。
                </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>.automount</literal>
        </term>
        <listitem>
          <para>
         自動的にマウントされるマウントポイントを定義します。参照するマウントポイントに基づくファイル名をファイルに割り当てます。マウントの詳細を定義するには、ベース名が同じ<literal>.mount</literal>ユニットファイルが必要です。
         </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section role="concept" xml:lang="ja" version="5.2" xml:id="concept-unit-dependencies">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">ユニットの依存関係と順序</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para><systemitem class="daemon">systemd</systemitem>には2種類の依存関係があります。要件の依存関係と順序の依存関係です。要件の依存関係では、ユニットを有効にするときに他のどのユニットを開始または停止するかを指定します。順序の依存関係では、ユニットを開始する順序を指定します。
      </para>
      </abstract>
    </info>
    <para>
      ユニットの依存関係<emphasis></emphasis>
    </para>
    <para>ユニットファイルには依存関係の機能があります。ユニットを実行するために、他のユニットが1つ以上必要な場合があります。これらの依存関係は、ディレクティブ<literal>Wants</literal>と<literal>Requires</literal>を使用してユニットファイルに設定します。</para>
    <variablelist>
      <varlistentry>
        <term>
          <literal>Wants</literal>
        </term>
        <listitem>
          <para>たとえば、ユニットAに<literal>Wants=unit B</literal>を記述している場合、ユニットAを実行するとユニットBも実行されます。ただし、ユニットBが正常に開始しなくても、正常に実行されているユニットAには何の影響もありません。
        </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>Requires</literal>
        </term>
        <listitem>
          <para>ユニットAに<literal>Requires=unit B</literal>を記述している場合、両方のユニットが実行されますが、ユニットBが正常に実行されないとユニットAは無効になります。ユニットAのプロセスが正常に実行されているかどうかは関係ありません。
        </para>
        </listitem>
      </varlistentry>
    </variablelist>
    <para>
      ユニットの順序<emphasis></emphasis>
    </para>
    <para>適切な指示がない場合、<systemitem class="daemon">systemd</systemitem>ではグループに属するユニットを同時に実行できます。正しい順序でサービスを開始することは、Linuxシステムが適切に機能するうえで重要です。ユニットファイルディレクティブ<literal>Before</literal>と<literal>After</literal>を使用して順序を設定できます。</para>
    <variablelist>
      <varlistentry>
        <term>
          <literal>Before</literal>
        </term>
        <listitem>
          <para>たとえば、ユニットAに<literal>Before=unit B</literal>を記述している場合、両方のユニットを実行すると、ユニットAが正常な実行状態になってからユニットBが実行されます。
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>After</literal>
        </term>
        <listitem>
          <para>ユニットAに<literal>After=unit B</literal>を記述している場合、両方のユニットを実行すると、ユニットBが正常な実行状態になってからユニットAが実行されます。
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section role="concept" xml:lang="ja" version="5.2" xml:id="concept-unit-logging">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">ログ記録</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
    </info>
    <para>
        ログファイルとジャーナルは、システム管理者にとって重要です。これらはシステムに関する詳細な情報を提供し、トラブルシューティングと監査において非常に重要です。ログファイルには、カーネル、アプリケーション、およびシステムにログインするユーザによって生成されたイベントとメッセージが含まれています。<command>journalctl</command>コマンドを使用してジャーナルに問い合わせることができます。このコマンドによって、<systemitem class="daemon">systemd</systemitem>で収集されたログが表示されます。<literal>systemd-journald</literal>サービスは<systemitem class="daemon">systemd</systemitem>のログ収集を扱います。<literal>systemd-journald</literal>は、イベントとメッセージをバイナリ形式で保存します。
      </para>
  </section>
  <section role="concept" xml:lang="ja" version="5.2" xml:id="concept-systemd-targets">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion"><systemitem class="daemon">systemd</systemitem>のターゲット</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para><systemitem class="daemon">systemd</systemitem>は、ユニットとターゲットを使用します。<systemitem class="daemon">systemd</systemitem>ユニットは、システム上のサービスまたはアクションを定義し、名前、タイプ、および設定ファイルで構成されます。<systemitem class="daemon">systemd</systemitem>ターゲットは、複数のユニットを組み合わせて、ターゲットを達成するにはどのサービスを開始する必要があるかを定義します。たとえば、サーバの場合、これはネットワークが実行されていて複数のユーザがログインできる状態です。これらのファイルは、サフィックス<literal>.target</literal>で識別できます。
      </para>
        <para>ユニットファイルと同様に、さまざまなターゲットを依存関係でネストできます。たとえば、<literal>multi-user.target</literal>では、(特に)ログインおよびユーザセッションサービスを設定するターゲットが必要です。
      </para>
      </abstract>
    </info>
    <para>
    <systemitem class="daemon">systemd</systemitem>の一般的なターゲット
  </para>
    <variablelist>
      <varlistentry>
        <term>
          <literal>default.target</literal>
        </term>
        <listitem>
          <para>デフォルトでブートします。<literal>default.target</literal>ファイルは、デスクトップワークステーションの<literal>graphical.target</literal>など、真のターゲットファイルへのシンボリックリンクです。サーバの場合、通常は<literal>graphical.target</literal>です。
        </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>poweroff.target</literal>
        </term>
        <listitem>
          <para>システムをシャットダウンして、電源をオフにします。</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>rescue.target</literal>
        </term>
        <listitem>
          <para>ベースシステムをプルして、レスキューシェルセッションを開始するターゲットユニット。</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>multi-user.target</literal>
        </term>
        <listitem>
          <para>グラフィカルではない(コンソール)マルチユーザシステムをセットアップします。</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>graphical.target</literal>
        </term>
        <listitem>
          <para>ネットワークサービスを備えたグラフィカルマルチユーザシステムを使用します。</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>reboot.target</literal>
        </term>
        <listitem>
          <para>システムをシャットダウンして再起動します。
        </para>
        </listitem>
      </varlistentry>
    </variablelist>
    <para><systemitem class="daemon">systemd</systemitem>ターゲットの詳細については、<emphasis>man 5 systemd.target</emphasis>および<emphasis>man 7 systemd.special</emphasis>を参照してください。
  </para>
  </section>
  <section role="concept" xml:lang="ja" version="5.2" xml:id="systemd-as-a-regular-user">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">通常のユーザとしての<systemitem class="daemon">systemd</systemitem>の使用</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para> セキュリティを強化する場合や、<systemitem class="username">root</systemitem>ユーザ特権がない場合、<systemitem class="daemon">systemd</systemitem>を通常のユーザとして使用できます。非特権サービスを実行するには、<literal>user</literal>サービスを作成します。</para>
      </abstract>
    </info>
    <para>ユーザサービスを作成および使用する際には、次の点を考慮してください。 </para>
    <itemizedlist>
      <listitem>
        <para>
         ユーザサービスセッションは、ユーザのセッションが終了すると終了します。<command>loginctl enable-linger <replaceable>USERNAME</replaceable></command>コマンドを使用することで、この設定を無効にすることができます。
        </para>
      </listitem>
      <listitem>
        <para>
          ユーザサービスファイルは、<filename>/etc/systemd/user</filename>または<filename>$HOME/.config/systemd/user/</filename>にあります。
         </para>
      </listitem>
      <listitem>
        <para>
           <command>systemctl --user</command>コマンドを使用してユーザサービスを制御できます。
          </para>
      </listitem>
    </itemizedlist>
  </section>
  <section role="reference" xml:lang="ja" version="5.2" xml:id="systemctl-commands">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion"><command>systemctl</command>コマンド</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="amrita.sakthivel@suse.com"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        <command>systemctl</command>コマンドは、<systemitem class="daemon">systemd</systemitem>およびサービスマネージャの状態を調べ、制御するために使用されます。
      </para>
      </abstract>
    </info>
    <para>
    次の一般的な<command>systemctl</command>コマンドを使用できます。<emphasis>man systemctl</emphasis>のページを参照してください。
  </para>
    <section xml:id="systemctl-commands-view-information">
      <title><systemitem class="daemon">systemd</systemitem>の情報の表示</title>
      <para>
      <systemitem class="daemon">systemd</systemitem>コンポーネントに関する情報を表示するには、次のコマンドを使用できます。
    </para>
      <variablelist>
        <varlistentry>
          <term>systemctl list-units</term>
          <listitem>
            <para>
            <systemitem class="daemon">systemd</systemitem>ユニットを一覧表示します。オプションの引数<command>--state=running</command>を使用するとアクティブなユニットを表示し、<command>--type=service</command>を使用すると、終了したアクティブなユニットを表示できます。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl list-unit-files</term>
          <listitem>
            <para>
            <systemitem class="daemon">systemd</systemitem>のユニットとステータスを一覧にします。ステータスには、静的、生成済み、無効、エイリアス、マスク、有効などがあります。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl list-dependencies</term>
          <listitem>
            <para>
            依存関係ツリーを一覧表示します。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl list-dependencies <replaceable>UNIT_FILE</replaceable></term>
          <listitem>
            <para>
            ユニットファイルの依存関係を一覧表示します。
          </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section xml:id="systemctl-commands-managing-services">
      <title><systemitem class="daemon">systemd</systemitem>サービスの管理</title>
      <para>
      <command>systemctl</command>コマンドでは、サービスに関する次のタスクを実行できます。
    </para>
      <variablelist>
        <varlistentry>
          <term>systemctl status <replaceable>SERVICE</replaceable></term>
          <listitem>
            <para>
            特定のサービスの状態を確認します。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl show <replaceable>SERVICE</replaceable></term>
          <listitem>
            <para>
            サービス情報を表示します。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl start <replaceable>SERVICE</replaceable></term>
          <listitem>
            <para>
            サービスを手動で開始する代わりに<command>start</command>コマンドを使用します。設定ファイルの記述を変更した場合は、関連するサービスを開始する必要があります。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl stop <replaceable>SERVICE</replaceable></term>
          <listitem>
            <para>
            実行している特定のサービスを停止します。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl restart <replaceable>SERVICE</replaceable></term>
          <listitem>
            <para>
            サービスを手動で再開する代わりに<command>restart</command>コマンドを使用します。設定ファイルの記述を変更した場合は、関連するサービスを再開する必要があります。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl enable <replaceable>SERVICE</replaceable></term>
          <listitem>
            <para>
            ブート時にサービスを有効にします。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl disable <replaceable>SERVICE</replaceable></term>
          <listitem>
            <para>
            ブート時にサービスを無効にします。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl reload-or-restart <replaceable>SERVICE</replaceable></term>
          <listitem>
            <para>
            再ロードできるサービスであれば再ロードし、再ロードできないサービスであれば再開します。サービスが実行されていない場合は再開します。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl mask <replaceable>SERVICE</replaceable></term>
          <listitem>
            <para>
            サービスがマスクされている場合、ユニットファイルが<filename>/dev/null</filename>にシンボリックリンクされています。マスクされたサービスのシンボリックリンクは、<filename>/dev/null</filename>を指すように<filename>/etc/systemd/system</filename>から作成されます。その結果、サービスを別の有効なサービスが必要としていても、そのサービスはロードできません。このようなサービスは手動で停止する必要があります。停止しないとバックグラウンドで実行が継続します。<command>--runtime</command>オプションを使用すると、システムの次回再起動までサービスを一時的にマスクできます。
          </para>
            <screen>Created symlink /etc/systemd/system/FOSSLinux.service &#x2192; /dev/null.</screen>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl unmask <replaceable>SERVICE</replaceable></term>
          <listitem>
            <para>
            サービスのマスクを解除します。システムを手動で開始または再開する場合に効果的です。
          </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section xml:id="systemctl-commands-managing-states">
      <title>システムの状態の管理</title>
      <para>
      <command>systemctl</command>コマンドでは、再起動、シャットダウンなど、システム上で次に示すような電源管理プロセスを実行できます。
    </para>
      <variablelist>
        <varlistentry>
          <term>systemctl reboot</term>
          <listitem>
            <para>
            システムを再起動します(<literal>reboot.target</literal>)。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl poweroff</term>
          <listitem>
            <para>
            システムの電源をオフにします(<literal>poweroff.target</literal>)。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl emergency</term>
          <listitem>
            <para>
            緊急モードへ移行します(<literal>emergency.target</literal>)。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>systemctl default</term>
          <listitem>
            <para>
            デフォルトのターゲットへ戻ります(<literal>multi-user.target</literal>)。
          </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
  <section xml:lang="ja" role="reference" version="5.1" xml:id="systemd-troubleshooting">
    <info>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" name="maintainer" content="amrita.sakthivel@suse.com" its:translate="no"/>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink"><systemitem class="daemon">systemd</systemitem>のトラブルシューティング</title>
    </info>
    <para>次のトラブルシューティングのヒントを使用すると、<systemitem class="daemon">systemd</systemitem>サービスの問題を特定して解決し、システムの円滑な動作を保証できます。
  </para>
    <variablelist>
      <varlistentry>
        <term>
          <emphasis><command>systemd-analyze verify <replaceable>SERVICE</replaceable></command>を使用して<systemitem class="daemon">systemd</systemitem>ユニットファイルの構文を確認</emphasis>
        </term>
        <listitem>
          <para><systemitem class="daemon">systemd</systemitem>サービスを開始または有効化する前に、ユニットファイルの構文にエラーがないことを確認します。次に例を示します。 </para>
          <screen><prompt>&gt; </prompt><command>sudo</command> systemd-analyze verify /etc/systemd/system/my-custom-service.service</screen>
          <para>このコマンドは、ユニットファイルを分析して、構文エラー、不足しているファイルなどの問題を報告します。サービスを有効にして開始する前に、報告された問題を修正する必要があります。</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <command>
        journalctl -u <replaceable>SERVICE</replaceable></command>コマンドを使用してサービスのログを確認<emphasis></emphasis>
        </term>
        <listitem>
          <para>
          <systemitem class="daemon">systemd</systemitem>サービスで問題が発生した場合は、そのサービスのログを確認します。次に例を示します。
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command>  journalctl -u my-custom-service.service</screen>
          <para>このコマンドは指定されたサービスのログを表示します。このログにはエラーメッセージや警告などの関連情報が記録されています。これらのログを使用して、サービスの問題を特定して修正できます。</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <command>systemd-analyze plot</command>コマンドを使用してブートプロセスを視覚化<emphasis></emphasis>
        </term>
        <listitem>
          <para>
          ブートプロセス中にサービスで問題が発生している場合は、<command>systemd-analyze plot command</command>を使用してブートプロセスを視覚化し、問題を特定できます。次に例を示します。
        </para>
          <screen><prompt>&gt; </prompt><command>sudo</command> systemd-analyze plot &gt; boot-plot.svg</screen>
          <para>このコマンドでは、ブートプロセスと潜在的な問題のグラフィカル表現が含まれる<filename>boot-plot.svg</filename>というSVGファイルが作成されます。各サービスの開始時刻と停止時刻も含まれます。このファイルをSVG互換の画像ビューアまたはWebブラウザで開き、ブートプロセスで発生する問題の原因となっているサービスを分析できます。</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <emphasis></emphasis>障害が発生したサービスのトラブルシューティング
        </term>
        <listitem>
          <para>障害が発生したサービスを確認し、ログ出力を検査するには、次のコマンドを実行します。 </para>
          <screen><prompt>&gt; </prompt><command>sudo</command> systemctl --state=failed</screen>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <emphasis></emphasis>実行しているサービスの状態を確認
        </term>
        <listitem>
          <para>実行しているサービスの現在の状態を確認するには次のコマンドを実行します。</para>
          <screen><prompt>&gt; </prompt><command>sudo</command> systemctl status <replaceable>SERVICE</replaceable></screen>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <emphasis></emphasis>長時間を要するシャットダウンや再起動
        </term>
        <listitem>
          <para>シャットダウンや再起動に長時間を要する場合は、終了していないサービスがあることが考えられます。<systemitem class="daemon">systemd</systemitem>は、各サービスの強制終了を試みる前に、その終了を一定時間待機します。多く見られる問題は、保留状態のサービスやシャットダウンの停止です。これを確認するには次のコマンドを使用します。
      </para>
          <screen><prompt>&gt; </prompt><command>sudo</command> systemctl poweroff
  Failed to power off system via logind: There's already a shutdown or sleep operation in progress
</screen>
          <screen><prompt>&gt; </prompt><command>sudo</command> systemctl list-jobs</screen>
          <para>実行中および待機中のジョブをキャンセルし、再度シャットダウンまたは再起動することができます。 </para>
          <screen><prompt>&gt; </prompt><command>sudo</command> systemctl cancel</screen>
          <screen><prompt>&gt; </prompt><command>sudo</command> systemctl stop systemd-suspend.service</screen>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section role="concept" xml:lang="ja" version="5.2" xml:id="best-practices">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion"><systemitem class="daemon">systemd</systemitem>のベストプラクティス</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content=" amrita.sakthivel@suse.com " its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
            いくつかのベストプラクティスに従うことで、さまざまな状況に対応できる効率的な<systemitem class="daemon">systemd</systemitem>サービスを実現できます。
            </para>
      </abstract>
    </info>
    <variablelist>
      <varlistentry>
        <term>
          <emphasis></emphasis>実行しているサービスの状態を確認
        </term>
        <listitem>
          <para>実行しているサービスの現在の状態を確認するには次のコマンドを実行します。</para>
          <screen><prompt>&gt; </prompt><command>sudo</command> systemctl status <replaceable>SERVICE</replaceable></screen>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <systemitem class="daemon">systemd</systemitem><emphasis></emphasis>ユニットファイルでは絶対パスを使用
        </term>
        <listitem>
          <para>
               設定ファイルや、<systemitem class="daemon">systemd</systemitem>ユニットファイルのスクリプトなど、実行可能ファイルや必須ファイルには絶対パスを使用します。<systemitem class="daemon">systemd</systemitem>では、<literal>$PATH</literal>などのユーザの環境変数がファイルの検索に使用されません。
              </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <emphasis></emphasis>ExecReloadディレクティブの使用
        </term>
        <listitem>
          <para>
              <command>systemctl reload</command>コマンドでサービスを再ロードするときに実行する特定のコマンドを定義するには、<literal>[SERVICE]</literal>セクションでExecReload<emphasis></emphasis>ディレクティブを使用します。再起動を伴わずに設定を動的に再ロードできるサービスで、このディレクティブが効果的です。
              </para>
          <screen>[Service]
ExecStart=<replaceable>PATH_TO_EXECUTABLE</replaceable>
ExecReload=<emphasis>PATH_TO_RELOAD_SCRIPT</emphasis></screen>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <emphasis></emphasis>RestartSecディレクティブの使用
        </term>
        <listitem>
          <para>
               障害が発生した後でサービスを再起動するまでの遅延時間を秒の単位で定義するには、<literal>[SERVICE]</literal>セクションでRestartSec<emphasis></emphasis>ディレクティブを使用します。リソースを解放するために指定の時間を必要とするサービスや、システムに対する過大な負荷の原因となりかねない急速な再起動ループを防止するサービスで、このディレクティブが効果的です。
               </para>
          <screen>[Service]
ExecStart=<replaceable>PATH_TO_EXECUTABLE</replaceable>
Restart=on-failure
RestartSec=5 </screen>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <emphasis></emphasis>リモートコンピュータでの緊急モードの無効化
        </term>
        <listitem>
          <para>
               リモートコンピュータでの緊急モードを無効化できます。このようなコンピュータとして、Google Cloudでホストされている仮想マシンなどがあります。このモードが有効な場合、そのコンピュータはネットワークへの接続をブロックされます。次に例を示します。
               </para>
          <screen><prompt>&gt; </prompt><command>sudo</command> systemctl mask emergency.service</screen>
          <screen><prompt>&gt; </prompt><command>sudo</command> systemctl mask emergency.target</screen>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section version="5.2" xml:id="legal-disclaimer">
    <info>
      <title xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">法的事項</title>
    </info>
    <para> Copyright © 2006–<?dbtimestamp format="Y"?>
 SUSE LLC and contributors.All rights reserved. </para>
    <para>
    この文書は、GNUフリー文書ライセンスのバージョン1.2または(オプションとして)バージョン1.3の条項に従って、複製、頒布、および/または改変が許可されています。ただし、この著作権表示およびライセンスは変更せずに記載すること。ライセンスバージョン1.2のコピーは、<quote>GNUフリー文書ライセンス</quote>セクションに含まれています。
  </para>
    <para>
    SUSEの商標については、<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.suse.com/company/legal/"/>を参照してください。その他の第三者のすべての商標は、各社の所有に帰属します。商標記号(®、™など)は、SUSEおよび関連会社の商標を示します。アスタリスク(*)は、第三者の商標を示します。
  </para>
    <para>
    本書のすべての情報は、細心の注意を払って編集されています。しかし、このことは正確性を完全に保証するものではありません。SUSE LLC、その関係者、著者、翻訳者のいずれも誤りまたはその結果に対して一切責任を負いかねます。
  </para>
  </section>
  <appendix xmlns:its="http://www.w3.org/2005/11/its" version="5.2" role="legal" its:translate="no" xml:id="doc-gfdl-license">
    <info>
      <title xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">GNUフリー文書利用許諾契約書(GFDL)</title>
    </info>
    <para>
  Copyright (C) 2000, 2001, 2002 Free Software Foundation, Inc. 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.この使用許諾書を一字一句そのままの複製および頒布することは許可されますが、変更は許可されません。
 </para>
    <bridgehead renderas="sect4">
    0. 序文
  </bridgehead>
    <para>
  この利用許諾契約書の目的は、マニュアル、テキストブック、またはその他の機能的で有用な文書を、自由という意味で「フリー」にすることです。つまり、そのような文書を、変更の有無や商用非商用に関わらず、コピーまたは再配布する実効的な自由をすべての人々に保証することです。第二に、本利用許諾契約書は、作者または発行者が他者によって行われた変更について責任を負わないとともに、その著作物の功績が確保されるように意図されています。
 </para>
    <para>
  本利用許諾契約書は、「コピーレフト」(著作物を自由に複製および改変できるようにすること)の一種であり、文書の派生著作物は、それ自体が同じ意味においてフリーでなければなりません。フリーソフトウェア向けに考慮されたコピーレフト利用許諾であるGNU一般公衆利用許諾契約書(GPL)を補足するものです。
 </para>
    <para>
  弊社は、この利用許諾契約書をフリーソフトウェアのマニュアルに使用するために設計しました。それは、フリーソフトウェアにはフリーマニュアルが必要であるためです。つまり、フリープログラムには、そのソフトウェアと同じ自由を提供するマニュアルが付属しなければなりません。ただし、本利用許諾契約書は、ソフトウェアマニュアルに制限されるものではありません。主題であるか否か、または印刷された本として発行されるか否かに関わらず、任意のテキスト著作物に使用することができます。本利用許諾契約書は、その目的が指示または参照に置かれている著作物に主に使用することを推奨します。
 </para>
    <bridgehead renderas="sect4">
    1. 適用範囲と定義
  </bridgehead>
    <para>
  本利用許諾契約書は、この利用許諾の条項に従って頒布できることを定めた著作権者の通告が記載されている任意のメディアにおけるマニュアルまたは他の著作物に適用されます。そのような通告は、その著作物をここに記載されている条件に従って使用するための世界的な無償の利用許諾を無期限で付与します。次に示す「文書」は、そのような任意のマニュアルまたは著作物を指します。その公衆ユーザはいずれも被許諾者であり、「利用者」と呼ばれます。利用者は、著作権法に従った許可が必要になるような方法で著作物を複製、変更または頒布する場合に、利用許諾を受け入れます。
 </para>
    <para>
  文書の「変更された版」とは、そのまま複製されるか、変更または別の言語に翻訳された(またはその両方)文書あるいはその一部を含んだ著作物のことです。
 </para>
    <para>
  「二次セクション」は、文書の発行者または作者と文書の全体的な主題(または関連事項)との関係のみを示す文書の名前付き付録または前付け部分です。総体的な主題に直接関わる内容は含まれていません。(したがって、文書が部分的に数学のテキストブックになっている場合、二次セクションでは数学について説明されない場合があります)。関係には、主題または関連事項との歴史的なつながり、あるいはそれらに関する法的、商的、哲学的、倫理的、政治的位置付けが含まれる場合があります。
 </para>
    <para>
  「不変セクション」は、文書が本利用許諾契約書の条件の下でリリースされる旨を述べている通告において、そのタイトルが不変セクションのものとして指定されている、ある特定の二次セクションです。セクションが、すでに説明した二次セクションの定義に一致しない場合は、不変として指定することはできません。文書には、不変セクションが含まれない場合があります。文書で不変セクションを特定しない場合、不変セクションは含まれません。
 </para>
    <para>
  「カバーテキスト」とは、文書が本利用許諾契約書の条件の下でリリースされる旨を述べている通告において、表カバーテキストまたは裏カバーテキストとして列挙されている、ある一定の短い文章のことです。表カバーテキストは、最大で5語、裏カバーテキストは、最大で25語によって構成できます。
 </para>
    <para>
  文書の「透過的な複製」とは、その仕様が一般の利用者にとって入手可能で、一般的なテキストエディタまたは一般的な描画プログラム(画素で構成される画像用)、あるいは広く使用されている図面エディタ(図面用)で文書を直接改訂するのに適した形式で表される機械可読の複製のことです。テキストフォーマッタへの入力またはテキストフォーマッタへの入力に適したさまざまな形式への変換に適していることも前提になります。読者による以後の変更を阻止または妨げるようにマークアップまたはマークアップのない状態が調整されている、他の点では透過的なファイル形式で行われた複製は、透過的な複製ではありません。イメージ形式は、相当量のテキストに使用されている場合、透過的ではありません。「透過的」ではない複製は、「不透明」と呼ばれます。
 </para>
    <para>
  透過的な複製に適した形式として、マークアップのないプレーンなASCII、Texinfo入力形式、LaTeX入力形式、一般に取得可能なDTDを使用するSGMLまたはXML、標準に準拠したHTML、人為的変更用のPostScriptまたはPDFがあります。透過的なイメージ形式には、PNG、XCF、JPGが含まれます。不透明な形式には、独自のワードプロセッサのみで読み取りおよび編集を行える独自の形式、DTDまたは処理(またはその両方)ツールを一般に取得できないSGMLまたはXML、機械生成HTML、出力のみを目的として一部のワードプロセッサによって作成されるPostScriptまたはPDFが含まれます。
 </para>
    <para>
  「タイトルページ」とは、印刷された本の場合、タイトルページ自体、および本利用許諾契約書でタイトルページに表示することが要求されるマテリアルを読みやすいように保持するために必要な以降のページのことを指します。そのようなタイトルページがない形式の著作物の場合、「タイトルページ」は、本文の開始部分に先行する、著作物のタイトルを最も顕著に表している部分の近くにあるテキストのことを指します。
 </para>
    <para>
  「XYZという表題の付いた」セクションとは、そのタイトルが正確にXYZになっているか、またはXYZを別の言語に翻訳しているテキストに続いてカッコ付きのXYZが含まれている文書の名前付きサブユニットのことです。(ここで、XYZは、次に示すように、「謝辞」、「献辞」、「推薦」、「履歴」などの特定のセクション名を表します)。文書を変更するときに、そのようなセクションの「タイトルを保存する」とは、この定義に従って「XYZという表題の付いた」セクションが残されることを表します。
 </para>
    <para>
  文書では、本利用許諾契約書が文書に適用される旨を述べている通告の付近に保証の放棄を含めることができます。保証の放棄条項は、本利用許諾契約書内の参照によって、保証の放棄に関してのみ組み込まれると見なされます。つまり、これらの保証の放棄条項がもつ可能性のある他のいかなる含意も無効であり、本利用許諾契約書の意味にまったく影響を与えません。
 </para>
    <bridgehead renderas="sect4">
    2. そのままの複製
  </bridgehead>
    <para>
  利用者は、商用か否かを問わず、任意のメディアにおいて文書を複製または頒布することができます。その際に、本利用許諾契約書、著作権表示、および本利用許諾契約書が文書に適用される旨を述べる利用許諾通告をすべての複製で再生し、本利用許諾契約書の条件に他のいかなる条件も追加しないことが前提条件になります。利用者は、技術的手段によって、作成または頒布する複製の読み込みまたはさらなる複製を妨げたり、制御したりすることはできません。ただし、複製と引き換えに対価を受け取ることができます。十分に大量の複製を頒布する場合は、セクション3の条件に従う必要もあります。
 </para>
    <para>
  すでに述べた同じ条件に従って複製を貸与したり、複製を公開したりすることもできます。
 </para>
    <bridgehead renderas="sect4">
    3. 大量の複製
  </bridgehead>
    <para>
  発行する文書の印刷した複製(または、通常、印刷したカバーをもつメディアに含まれた複製)が 100部を超え、文書の利用許諾通告でカバーテキストを必要とする場合は、すべてのカバーテキスト(表カバーの表カバーテキスト、裏カバーの裏カバーテキスト)を明瞭かつ読みやすく記載したカバーに文書の複製を同封する必要があります。また、両方のカバーでは、これらの複製の発行者として、利用者を読みやすい状態で明確に識別しなければなりません。表カバーには、フルタイトルを記述し、タイトルのすべての語が同等に目立つようにする必要があります。カバーには他のマテリアルを追加することもできます。カバーに限って変更を行った場合の複製は、文書のタイトルが保持されていて、これらの条件を満たしている限り、他の点に関してそのままの複製と見なすことができます。
 </para>
    <para>
  いずれかのカバーで、必要なテキストが多すぎて、読みやすい状態に収まらない場合は、列挙されている最初の部分(問題なく収まる分)を実際のカバーに記載し、残りの部分を隣接ページに入れます。
 </para>
    <para>
  文書の不透明な複製を100部以上公開または頒布する場合は、それぞれの不透明な複製とともに機械可読の透過的な複製を含めるか、それぞれの不透明な複製内あるいはその複製とともに、ネットワークの一般利用者が標準的な一般ネットワークプロトコルを使用して、追加マテリアルのない文書の完全な透過的複製をダウンロードするときにアクセスできるコンピュータネットワークの場所を明記する必要があります。後者のオプションを使用する場合は、不透明な複製の大量頒布を開始するときに十分慎重な手順を取り、この透過的な複製が、その版の不透明な複製を最後に一般頒布した後(直接またはエージェントや小売業者を通じて)少なくとも1年間、指定した場所で継続的にアクセス可能となるように配慮する必要があります。
 </para>
    <para>
  大量の複製を再頒布する時点よりもかなり前に、文書の作者に連絡して、文書の更新版を提供する機会を与えることが要求されますが、必須ではありません。
 </para>
    <bridgehead renderas="sect4">
    4. 変更
  </bridgehead>
    <para>
  文書の変更された版を、すでに述べた第2項および第3項の条件に従って複製および頒布することができます。その際は、本利用許諾契約書に確実に従って、変更された版をリリースし、変更された版が文書の役割を担うようにして、その複製を所要する任意の利用者に変更された版の頒布および変更の利用許諾を与えることが前提になります。また、変更された版で次のことを行う必要があります。
 </para>
    <orderedlist numeration="upperalpha" spacing="normal">
      <listitem>
        <para>
    タイトルページ(カバーがある場合はカバー上も含める)で、文書、および以前の版の文書(以前の版がある場合は、その旨、文書の履歴セクションに列挙する)と識別されるタイトルを使用します。前の版と同じタイトルは、その版の元の発行者が許可を与えた場合に、使用することができます。
   </para>
      </listitem>
      <listitem>
        <para>
    タイトルページ上に、この要件から解放されない限り、変更された版において変更の著者としての責任を担う1人以上の人またはエンティティとともに、文書の筆頭著者を少なくとも5人、作者として列挙します(5人に満たない場合は、その筆頭著者のすべて)。
   </para>
      </listitem>
      <listitem>
        <para>
    タイトルページ上に、変更された版の発行者の名前を、発行者として記載します。
   </para>
      </listitem>
      <listitem>
        <para>
    文書のすべての著作権表示を保持します。
   </para>
      </listitem>
      <listitem>
        <para>
    変更に関する適切な著作権表示を、他の著作権表示の隣に追加します。
   </para>
      </listitem>
      <listitem>
        <para>
    著作権表示の直後に、本利用許諾契約書の条項に従って変更された版を利用するための許可を一般利用者に与える利用許諾通告を、次の補遺に示す形式で含めます。
   </para>
      </listitem>
      <listitem>
        <para>
    その利用許諾通告に、不変セクションの全リスト、および文書の利用許諾通告で指定されている必須カバーテキストを保持します。
   </para>
      </listitem>
      <listitem>
        <para>
    本利用許諾契約書の変更されていない複製を含めます。
   </para>
      </listitem>
      <listitem>
        <para>
    「履歴」という表題のセクションを保持して、そのタイトルを保持し、タイトルページに記載されているとおりに、変更された版のタイトル、年度、新しい作者、発行者を少なくとも示す項目を追加します。文書に履歴というセクションがない場合は、そのタイトルページに記載されているとおりに文書のタイトル、年度、作者、発行者を示すセクションを作成し、前の文章に記載されているとおりに変更された版を示す項目を追加します。
   </para>
      </listitem>
      <listitem>
        <para>
    文書の透過的な複製に一般利用者がアクセスできるように文書で指定されている場合は、そのネットワークの場所、およびその文書の基盤となった前の版に対応して文書で指定されているネットワークの場所を保持します。これらは、「履歴」セクションに配置することができます。文書自体よりも4年以上前に発行された著作物の場合、または参照されているその版の元の発行者が許可を与えている場合は、そのネットワークの場所を省略することができます。
   </para>
      </listitem>
      <listitem>
        <para>
    「謝辞」または「献辞」という表題のセクションの場合は、そのセクションのタイトルを保持し、セクション内に、それぞれの貢献者謝辞またはその中の献辞(またはその両方)のすべての内容と意味合いを保持します。
   </para>
      </listitem>
      <listitem>
        <para>
    文書のすべての不変セクションを保持し、そのテキストおよびタイトルを未変更のままにします。セクション番号またはそれと同等の要素は、セクションタイトルの一部と見なされません。
   </para>
      </listitem>
      <listitem>
        <para>
    「推薦」という表題の任意のセクションを削除します。そのようなセクションは、変更された版に含めることはできません。
   </para>
      </listitem>
      <listitem>
        <para>
    既存のセクションのタイトルを変更して、「推薦」という表題にしたり、タイトルが不変セクションと矛盾したりしないようにします。
   </para>
      </listitem>
      <listitem>
        <para>
    保証の放棄を保持します。
   </para>
      </listitem>
    </orderedlist>
    <para>
  変更された版に、二次セクションと見なされ、文書から複製されたマテリアルを含まない新しい前付けセクションまたは付録が含まれる場合は、これらの一部またはすべてを任意に「不変」として指定することができます。これを行うには、変更された版の利用許諾表示内で列挙されている不変セクションにそのタイトルを追加します。これらのタイトルは、他のすべてのセクションタイトルと異なっている必要があります。
 </para>
    <para>
  「推薦」という表題のセクションを追加することができますが、その際は、変更された版のさまざまな当事者による推薦以外の要素が含まれていないことが前提になります。たとえば、校正者によるコメント、または文が標準的な信頼できる定義として組織によって承認されていることを示すという宣言文などが相当します。
 </para>
    <para>
  表カバーテキストとしての最大5語の短い文、および裏カバーテキストとしての最大25語の短い文を、変更された版のカバーテキストのリストの終わりに追加できます。表カバーテキストの短い1文および裏カバーテキストの短い1文のみを、1つのエンティティが追加できます(またはエンティティによって行われた調整を通じて)。文書に、利用者または利用者が関わる同じエンティティによって行われた調整を通じて前に追加された同じカバーのカバーテキストがすでに含まれている場合は、別のものを追加することはできませんが、古いものを置き換えることができます。ただし、その古いものを追加した前の発行者から明示的な許可を得る必要があります。
 </para>
    <para>
  文書の作者および発行者は、本利用許諾契約書により、その名前を得るために使用したり、変更された版の推薦を主張または暗示したりする許可を与えるものではありません。
 </para>
    <bridgehead renderas="sect4">
    5. 文書の結合
  </bridgehead>
    <para>
  文書は、すでに述べた変更された版に関するセクション4の条件に従って、本利用許諾契約書の下でリリースされた他の文書と結合することができます。その際は、その組み合わせの中に、元の全文書のすべての不変セクションを未変更のまま含めて、そのすべてを結合された著作物の不変セクションとしてその利用許諾表示に列挙し、そのすべての保証の放棄を保持することが前提となります。
 </para>
    <para>
  結合された著作物には、本利用許諾契約書の複製を1つのみ含める必要があります。複数の同一の不変セクションは、単一の複製で置き換えることができます。同じ名前だが内容の異なる複数の不変セクションがある場合は、そのような各セクションのタイトルを固有なものにします。その際は、その終わりに、カッコ付きで、そのセクションの元の作者または発行者の名前(既知の場合)、あるいは固有の番号を追加します。不変セクションのリスト内のセクションタイトルには、結合された著作物の利用許諾表示の場合と同じ調整を加えます。
 </para>
    <para>
  組み合わせでは、さまざまな元の文書の「履歴」という表題のセクションを結合して、1つの「履歴」というセクションを構築する必要があります。同じように、「謝辞」という表題のセクション、および「献辞」という表題のセクションも結合します。「推薦」という表題のすべてのセクションを削除する必要があります。
 </para>
    <bridgehead renderas="sect4">
    6. 文書のコレクション
  </bridgehead>
    <para>
  文書および本利用許諾契約書の下でリリースされた他の文書から成るコレクションを作成して、さまざまな文書に含まれる本利用許諾契約書の個々の複製を、コレクションに含まれる単一の複製で置き換えることができますが、他のすべての点での各文書のそのままの複製に関する本利用許諾契約書の規則に従うことが前提になります。
 </para>
    <para>
  そのようなコレクションから単一の文書を抽出して、その文書を本利用許諾契約書に従って個々に頒布することができますが、その際は、本利用許諾契約書の複製を抽出した文書に挿入して、その文書のそのままの複製に関するその他のすべての点で、本利用許諾契約書に従う必要があります。
 </para>
    <bridgehead renderas="sect4">
    7. 独立した著作物の集積
  </bridgehead>
    <para>
  文書またはその派生物を他の個別および独立した文書または著作物とともに、ストレージまたは頒布メディア内またはそのボリューム上に蓄積することを「集積」と呼びます。その場合は、個々の著作物の許可を超えてその蓄積の利用者の法的権限を制限することに、蓄積による著作権を使用しないことが前提になります。文書が集積に含まれる場合、本利用許諾契約書は、それ自体が文書の派生著作物ではない集積内の他の著作物に適用されません。
 </para>
    <para>
  セクション3のカバーテキスト要件が文書のこれらの複製に適用可能であり、文書が集積全体の半分に満たない場合は、文書のカバーテキストを、集積内の文書のカバー、または文書が電子形式の場合は、電子的な同等のカバーに配置することができます。それ以外の場合は、集積全体の印刷されたカバー上に表示する必要があります。
 </para>
    <bridgehead renderas="sect4">
    8. 翻訳
  </bridgehead>
    <para>
  翻訳は一種の変更と見なされるため、セクション4の条件に従って文書の翻訳を配布することができます。不変セクションを翻訳で置き換えるには、著作権者からの特別な許可が必要ですが、これらの不変セクションの元のバージョンのほかに、一部またはすべての不変セクションの翻訳を含めることができます。本利用許諾契約書、文書内のすべての利用許諾表示、および保証の放棄の翻訳を含めることができますが、その際は、本利用許諾契約書の元の英語版、およびそれらの利用許諾表示と保証の放棄の元の版も含めることが前提になります。本利用許諾契約書、利用許諾表示、または保証の放棄の翻訳と元の版との間に不一致がある場合は、元の版が優先されます。
 </para>
    <para>
  文書内のセクションに、「謝辞」、「献辞」、または「履歴」という表題が付いている場合は、そのタイトルを保持する(セクション1)ための要件(セクション4)により、通常は実際のタイトルを変更する必要があります。
 </para>
    <bridgehead renderas="sect4">
    9. 終了
  </bridgehead>
    <para>
  利用者は、本利用許諾契約書に明示的に記載されている形態を除き、文書を複製、改変、二次利用許諾、および頒布してはなりません。別の方法で文書を複製、改変、二次利用許諾、または頒布しようとするのは無効であり、本利用許諾契約書の下で利用者の権利は自動的に消滅します。ただし、本使用許諾の下で利用者から複製物または権利を受領した関係者は、条項を遵守している限り、権利が消滅することはありません。
 </para>
    <bridgehead renderas="sect4">
    10. 本利用許諾契約書の将来の改訂
  </bridgehead>
    <para>
  フリーソフトウェア財団は、GNUフリー文書利用許諾契約書(GFDL)の新版または改訂版を随時公表することがあります。そのような新版は、性格的には現行版と似たものになりますが、新たな問題や懸案事項に対応するために細部が異なる可能性があります。<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.gnu.org/copyleft/"/>を参照してください。
 </para>
    <para>
  本利用許諾契約書の各版には、区別するための版番号が設定されます。文書に、それに適用される本利用許諾契約書の特定の版番号と「後継版」が指定されている場合、利用者は、選択によって、その指定された版の条項またはフリーソフトウェア財団から公開される後継版の条項(ドラフトではない)に従うことになります。文書に、本利用許諾契約書の版番号が指定されていない場合、利用者は、フリーソフトウェア財団からこれまでに公開された任意の版(ドラフトではない)を選択することができます。
 </para>
    <bridgehead renderas="sect4">
    補遺: 本利用許諾書をご使用の文書に使用する方法
  </bridgehead>
    <screen>Copyright (c) YEAR YOUR NAME.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled &#x201C;GNU
Free Documentation License&#x201D;.</screen>
    <para>
  不変セクション、表カバーテキスト、および裏カバーテキストがある場合は、「with...Texts」の行を次のように置き換えます。
 </para>
    <screen>with the Invariant Sections being LIST THEIR TITLES, with the
Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</screen>
    <para>
  カバーテキストのない不変セクションが含まれている場合、またはこの3つの他の組み合わせの場合は、その2つの代替要素をマージして状況に合わせます。
 </para>
    <para>
  文書にプログラムコードの重要な例が含まれている場合は、GNU一般公衆利用許諾契約書(GPL)などの選択したフリーソフトウェアの利用許諾に従って、これらの例を平行してリリースし、フリーソフトウェアでのその利用を許可することを推奨します。
</para>
  </appendix>
</article>
