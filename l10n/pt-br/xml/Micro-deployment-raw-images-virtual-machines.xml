<?xml version="1.0" encoding="UTF-8"?>
<article xmlns="http://docbook.org/ns/docbook" xml:base="Micro-deployment-raw-images-virtual-machines.xml" version="5.0" xml:id="deployment-raw-images-virtual-machines" xml:lang="pt-br">
  <info>
    <title xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">Implantando o <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> usando imagens de disco brutas em máquinas virtuais</title>
    <revhistory xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xml:id="rh-deployment-raw-images-virtual-machines">
      <revision>
        <date>2023-12-19</date>
        <revdescription>
          <itemizedlist>
            <listitem>
              <para>
                  Initial version
                </para>
            </listitem>
          </itemizedlist>
        </revdescription>
      </revision>
    </revhistory>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="updated" content="2023-12-20" its:translate="no"/>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="architecture" its:translate="no">
      <phrase>AMD64/Intel 64</phrase>
      <phrase>POWER</phrase>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="productname" its:translate="no">
      <productname version="6.0" os="slmicro">
        <phrase>
          <phrase os="slmicro">SUSE Linux Micro</phrase>
        </phrase>
      </productname>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="title" its:translate="yes">Implantando imagens de disco brutas do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> em VMs</meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="description" its:translate="yes">Implantando imagens de disco brutas do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> em VMs</meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="social-descr" its:translate="yes">Implantando imagens de disco brutas do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> em VMs</meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="category" its:translate="no">
      <phrase>Systems Management</phrase>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="task" its:translate="no">
      <phrase>Virtualization</phrase>
      <phrase>Deployment</phrase>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="series" its:translate="no">Products &amp; Solutions</meta>
    <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
      <dm:bugtracker>
        <dm:url>https://bugzilla.suse.com/enter_bug.cgi</dm:url>
        <dm:component>Smart Docs</dm:component>
        <dm:product>Documentation</dm:product>
        <dm:assignee>jsindelarova@suse.com</dm:assignee>
      </dm:bugtracker>
      <dm:translation>yes</dm:translation>
    </dm:docmanager>
    <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
      <variablelist>
        <varlistentry>
          <term>O QUE É?</term>
          <listitem>
            <para>O <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> fornece imagens brutas, também chamadas de <emphasis>imagens predefinidas</emphasis>, que podem ser implantadas diretamente na máquina virtual.
              </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>POR QUÊ?</term>
          <listitem>
            <para>
                A implantação virtualizada economiza recursos de hardware.
              </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>DEDICAÇÃO</term>
          <listitem>
            <para>
                A leitura do artigo leva aproximadamente 20 minutos.
              </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>META</term>
          <listitem>
            <para>O <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> será implantado com êxito em uma máquina virtual.
              </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>REQUISITOS</term>
          <listitem>
            <itemizedlist>
              <listitem>
                <para>
                    Um Servidor de Host de VM com <systemitem class="library">libvirt</systemitem> e um ambiente de virtualização KVM instalado e em execução.
                  </para>
              </listitem>
              <listitem>
                <para>
                    Mínimo de 32 GB de espaço em disco para implantação da imagem.
                  </para>
              </listitem>
              <listitem>
                <para>
                    Opcionalmente, um meio de configuração, por exemplo, um disco flash USB.
                  </para>
              </listitem>
            </itemizedlist>
          </listitem>
        </varlistentry>
      </variablelist>
    </abstract>
  </info>
  <section role="concept" xml:lang="pt-br" version="5.2" xml:id="deployment-about-pre-built-images">
    <info>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Sobre as imagens predefinidas</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        As imagens predefinidas são representações prontas para uso de um sistema operacional em execução. Elas não são instaladas da maneira tradicional com um instalador, mas são copiadas para o disco rígido do host de destino. O tópico inclui informações básicas sobre essas imagens predefinidas.
      </para>
      </abstract>
    </info>
    <para>
    As imagens predefinidas devem ser configuradas na primeira inicialização usando as ferramentas incluídas nas imagens. O carregador de boot detecta a primeira inicialização conforme descrito na <xref linkend="deployment-first-boot-detection"/>. Cada imagem vem com subvolumes padrão montados, que podem ser mudados na configuração durante a primeira inicialização. Para obter detalhes sobre os subvolumes, consulte a <xref linkend="deployment-default-partitioning"/>.
  </para>
    <section role="concept" xml:lang="pt-br" version="5.2" xml:id="deployment-default-partitioning">
      <info>
        <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
          <para/>
        </abstract>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Particionamento padrão</title>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
      </info>
      <para>
    As imagens predefinidas são fornecidas com um esquema de particionamento padrão. Você pode mudá-lo durante a primeira inicialização usando o <xref linkend="deployment-configuring-with-ignition" xrefstyle="template:Ignition"/> ou o <xref linkend="deployment-configuring-with-combustion" xrefstyle="template:Combustion"/>.
  </para>
      <important>
        <title>O Btrfs é obrigatório para o sistema de arquivos raiz</title>
        <para>
      Se você pretende realizar qualquer mudança no esquema de particionamento padrão, o sistema de arquivos raiz deve ser Btrfs.
    </para>
      </important>
      <para>
    Cada imagem tem os seguintes subvolumes:
  </para>
      <screen>
/home
/root
/opt
/srv
/usr/local
/var
</screen>
      <para>
    O diretório <literal>/etc</literal> é montado como overlayFS, em que o diretório superior é montado em <filename>/var/lib/overlay/1/etc/</filename>.
  </para>
      <para>
    Você pode reconhecer os subvolumes montados por padrão pela opção <literal>x-initrd.mount</literal> em <filename>/etc/fstab</filename>. Outros subvolumes ou partições devem ser configurados por meio do Ignition ou Combustion.
  </para>
    </section>
    <section role="concept" xml:lang="pt-br" version="5.2" xml:id="deployment-first-boot-detection">
      <info>
        <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
          <para/>
        </abstract>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Detecção de primeira inicialização</title>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
      </info>
      <para>
    A configuração da implantação é executada apenas na primeira inicialização. Para diferenciar a primeira inicialização das seguintes, o arquivo de flag <filename>/boot/writable/firstboot_happened</filename> será criado após a conclusão da primeira inicialização. Se o arquivo não estiver presente no sistema de arquivos, o atributo <literal>ignition.firstboot</literal> será inserido na linha de comando do kernel e, portanto, tanto o Ignition quanto o Combustion serão acionados para execução (no initrd). Após concluir a primeira inicialização, o arquivo de flag <filename>/boot/writable/firstboot_happened</filename> será criado.
  </para>
      <note>
        <title>O arquivo de flag sempre é criado</title>
        <para>
      Mesmo que a configuração não seja bem-sucedida por causa de arquivos de configuração impróprios ou ausentes, o arquivo de flag <filename>/boot/writable/firstboot_happened</filename> será criado.
    </para>
      </note>
      <section xml:id="deployment-first-boot-invokation">
        <title>Forçar a reconfiguração do sistema em uma inicialização subsequente</title>
        <para>
      Se você precisar reconfigurar o sistema após a primeira inicialização, poderá forçar a reconfiguração na inicialização subsequente. Há duas opções.
    </para>
        <itemizedlist>
          <listitem>
            <para>
          Você pode inserir o atributo <literal>ignition.firstboot=1</literal> na linha de comando do kernel.
        </para>
          </listitem>
          <listitem>
            <para>
          Você pode apagar o arquivo de flag <filename>/boot/writable/firstboot_happened</filename>.
        </para>
          </listitem>
        </itemizedlist>
      </section>
    </section>
  </section>
  <section role="task" xml:lang="pt-br" version="5.2" xml:id="deployment-preparing-configuration-device">
    <info>
      <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
        <para/>
      </abstract>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Preparando o dispositivo de configuração</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
    </info>
    <important>
      <title>Login SSH</title>
      <para>
      Por padrão, o login SSH de <systemitem class="username">root</systemitem> no <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> é permitido apenas usando a chave SSH. Durante o processo de implantação, recomendamos criar um usuário sem privilégios que você possa usar para acessar o sistema instalado. Você pode criar uma conta de usuário sem privilégios na primeira inicialização com a ferramenta Combustion ou Ignition. A criação de um usuário sem privilégios durante a implantação do sistema também é útil para acessar a interface da Web do Cockpit.
    </para>
    </important>
    <para>
    Para preparar o dispositivo de configuração, faça o seguinte:
  </para>
    <procedure>
      <title>Preparando o dispositivo de configuração</title>
      <step>
        <para>
        Formate o disco em qualquer sistema de arquivos suportado pelo <phrase><phrase os="slmicro">SLE Micro</phrase></phrase>: Ext3, Ext4 etc.:
      </para>
        <screen><prompt>&gt; </prompt>sudo mkfs.ext4 /dev/sd<replaceable>Y</replaceable></screen>
      </step>
      <step>
        <para>
        Defina o rótulo do dispositivo como <literal>ignition</literal> (quando o Ignition ou o Combustion é usado) ou como <literal>combustion</literal> (quando apenas o Combustion é usado). Se necessário (por exemplo, no host do Windows), use letras maiúsculas para os rótulos. Para definir o rótulo do dispositivo, execute:
      </para>
        <screen><prompt>&gt; </prompt>sudo e2label /dev/sd<replaceable>Y</replaceable> ignition
      </screen>
        <para>
        Você pode usar qualquer tipo de mídia de armazenamento de configuração suportado pelo seu sistema de virtualização ou hardware: imagem ISO, disco flash USB etc.
      </para>
      </step>
      <step>
        <para>
        Monte o dispositivo:
      </para>
        <screen><prompt>&gt; </prompt>sudo mount /dev/sdY /mnt
      </screen>
      </step>
      <step>
        <para>
        Crie a estrutura de diretórios conforme mencionado na <xref linkend="deployment-ignition-config-file"/> ou na <xref linkend="deployment-configuring-with-combustion"/>, dependendo da ferramenta de configuração usada:
      </para>
        <screen><prompt>&gt; </prompt>sudo mkdir  /mnt/ignition/</screen>
        <para>
        Ou:
      </para>
        <screen><prompt>&gt; </prompt>sudo mkdir -p /mnt/combustion/
      </screen>
      </step>
      <step>
        <para>
        Prepare todos os elementos da configuração que serão usados pelo <xref linkend="deployment-ignition-config-file" xrefstyle="template:Ignition"/> ou <xref linkend="deployment-configuring-with-combustion" xrefstyle="template:Combustion"/>.
      </para>
      </step>
    </procedure>
    <section xml:lang="pt-br" role="concept" version="5.1" xml:id="deployment-configuring-with-ignition">
      <info>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" name="maintainer" content="tbazant@suse.com" its:translate="no"/>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">Configurando a implantação do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> com o Ignition</title>
        <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">
          <para><link xlink:href="https://coreos.github.io/ignition/">Ignition</link> é uma ferramenta de aprovisionamento que permite configurar um sistema de acordo com as suas especificações na primeira inicialização.
      </para>
        </abstract>
      </info>
      <section xml:id="how-it-works-ignition">
        <title>Como funciona o Ignition?</title>
        <para>
      Quando o sistema é inicializado pela primeira vez, o Ignition é carregado como parte de um <filename>initramfs</filename> e procura um arquivo de configuração em um diretório específico (em um disco flash USB, ou você pode fornecer um URL). Todas as mudanças são executadas antes que o kernel alterne do sistema de arquivos temporário para o sistema de arquivos raiz real (antes da emissão do comando <literal>switch_root</literal>).
    </para>
        <para>
      O Ignition usa um arquivo de configuração no formato JSON chamado <filename>config.ign</filename>. Você pode gravar a configuração manualmente ou usar o aplicativo da Web Fuel Ignition em <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://ignite.opensuse.org"/> para gerá-la.
    </para>
        <important>
          <para>
        O Fuel Ignition ainda não abrange o vocabulário completo do Ignition, e o arquivo JSON resultante pode precisar de outros ajustes manuais.
      </para>
        </important>
        <section xml:id="deployment-ignition-config-file">
          <title>
            <filename>config.ign</filename>
          </title>
          <para condition="deployment-bare-metal">
        O arquivo de configuração <filename>config.ign</filename> deve residir no subdiretório <filename>ignition</filename> da mídia de configuração, por exemplo, um pendrive USB chamado <literal>ignition</literal>. A estrutura de diretórios deve ter a seguinte aparência:
      </para>
          <screen condition="deployment-bare-metal">
&lt;root directory&gt;
└── ignition
    └── config.ign

 </screen>
          <tip condition="deployment-bare-metal">
            <para>
          Para criar uma imagem de disco com a configuração do Ignition, você pode usar o aplicativo da Web Fuel Ignition em https://ignite.opensuse.org.
        </para>
          </tip>
          <para>
        O <filename>config.ign</filename> contém vários tipos de dados: objetos, strings, números inteiros, boolianos e listas de objetos. Para obter uma especificação completa, consulte <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://coreos.github.io/ignition/configuration-v3_3/">Ignition
        specification v3.3.0</link>.
      </para>
          <para>
        O atributo <literal>version</literal> é obrigatório e, no caso do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase>, o valor dele deve ser definido como <literal>3.3.0</literal> ou qualquer versão anterior. Do contrário, o Ignition falhará.
      </para>
          <para>
        Para efetuar login no sistema como <systemitem class="username">root</systemitem>, você deve incluir pelo menos uma senha de <systemitem class="username">root</systemitem>. No entanto, é recomendável estabelecer o acesso por meio de chaves SSH. Para configurar uma senha, use uma senha segura. Se você usar uma senha gerada aleatoriamente, use pelo menos 10 caracteres. Se você criar a senha manualmente, use mais do que 10 caracteres e combine letras maiúsculas, letras minúsculas e números.
      </para>
        </section>
      </section>
      <section xml:lang="pt-br" role="reference" version="5.1" xml:id="reference-ignition-configuration">
        <info>
          <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" name="maintainer" content="tbazant@suse.com" its:translate="no"/>
          <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">Exemplos de configuração do Ignition</title>
        </info>
        <section xml:id="sec-ignition-examples">
          <title>Exemplos de configuração</title>
          <para>
      Esta seção apresenta vários exemplos de configuração do Ignition no formato JSON incorporado.
    </para>
          <important>
            <para>A <xref linkend="deployment-default-partitioning"/> lista os subvolumes que são montados por padrão durante a execução da imagem predefinida. Para adicionar um novo usuário ou modificar qualquer um dos arquivos em um subvolume que não esteja montado por padrão, você precisa declarar esse subvolume primeiro para que ele também seja montado. Encontre mais detalhes sobre a montagem de sistemas de arquivos na <xref linkend="sec-storage-filesystem"/>.
      </para>
          </important>
          <note>
            <title>O atributo <literal>version</literal> é obrigatório</title>
            <para>
        Cada <filename>config.fcc</filename> deve incluir a versão 1.4.0 ou inferior, que será convertida na especificação do Ignition correspondente.
      </para>
          </note>
          <section xml:id="sec-ignition-storage">
            <title>Configuração de armazenamento</title>
            <para>
        O atributo <literal>storage</literal> é usado para configurar partições, RAID, definir sistemas de arquivos, criar arquivos etc. Para definir partições, use o atributo <literal>disks</literal>. O atributo <literal>filesystems</literal> é usado para formatar partições e definir pontos de montagem de partições específicas. O atributo <literal>files</literal> pode ser usado para criar arquivos no sistema de arquivos. Cada um dos atributos mencionados está descrito nas seções a seguir.
      </para>
            <section xml:id="sec-storage-disks">
              <title>O atributo <literal>disks</literal></title>
              <para>
          O atributo <literal>disks</literal> é uma lista de dispositivos que permite definir partições nesses dispositivos. O atributo <literal>disks</literal> deve conter pelo menos um <literal>device</literal>, os outros atributos são opcionais. O seguinte exemplo usa um único dispositivo virtual e divide o disco em quatro partições:
        </para>
              <screen>
{
  "ignition": {
    "version": "3.0.0"
  },
  "storage": {
    "disks": [
      {
        "device": "/dev/vda",
        "partitions": [
          {
            "label": "root",
            "number": 1,
            "typeGuid": "4F68BCE3-E8CD-4DB1-96E7-FBCAF984B709"
          },
          {
            "label": "boot",
            "number": 2,
            "typeGuid": "BC13C2FF-59E6-4262-A352-B275FD6F7172"
          },
          {
            "label": "swap",
            "number": 3,
            "typeGuid": "0657FD6D-A4AB-43C4-84E5-0933C84B4F4F"
          },
          {
            "label": "home",
            "number": 4,
            "typeGuid": "933AC7E1-2EB4-4F13-B844-0E14E2AEF915"
          }
        ],
        "wipeTable": true
      }
    ]
  }
}
</screen>
            </section>
            <section xml:id="sec-storage-raid">
              <title>O atributo <literal>raid</literal></title>
              <para>
          <literal>raid</literal> é uma lista de matrizes RAID. Os seguintes atributos de <literal>raid</literal> são obrigatórios:
        </para>
              <variablelist>
                <varlistentry>
                  <term>level</term>
                  <listitem>
                    <para>
                um nível da matriz RAID específica (linear, raid0, raid1, raid2, raid3, raid4, raid5, raid6)
              </para>
                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>devices</term>
                  <listitem>
                    <para>
                uma lista de dispositivos na matriz referenciada por seus caminhos absolutos
              </para>
                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>name</term>
                  <listitem>
                    <para>
                um nome que será usado para o dispositivo md
              </para>
                  </listitem>
                </varlistentry>
              </variablelist>
              <para>
         Por exemplo:
        </para>
              <screen>
{
  "ignition": {
    "version": "3.0.0"
  },
  "storage": {
    "raid": [
      {
        "devices": [
          "/dev/sda",
          "/dev/sdb"
        ],
        "level": "raid1",
        "name": "system"
      }
    ]
  }
}
</screen>
            </section>
            <section xml:id="sec-storage-filesystem">
              <title>O atributo <literal>filesystems</literal></title>
              <para><literal>filesystems</literal> deve conter os seguintes atributos:
        </para>
              <variablelist>
                <varlistentry>
                  <term>device</term>
                  <listitem>
                    <para>
                o caminho absoluto para o dispositivo, normalmente <literal>/dev/sda</literal>, no caso de disco físico
              </para>
                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>format</term>
                  <listitem>
                    <para>
                o formato do sistema de arquivos (Btrfs, Ext4, xfs, vfat ou swap (troca))
              </para>
                    <note>
                      <para>
                  No caso do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase>, o sistema de arquivos <literal>root</literal> deve ser formatado como Btrfs.
                </para>
                    </note>
                  </listitem>
                </varlistentry>
              </variablelist>
              <para>
          O exemplo a seguir demonstra o uso do atributo <literal>filesystems</literal>. O diretório <filename>/opt</filename> será montado na partição <literal>/dev/sda1</literal>, que está formatada como Btrfs. O dispositivo não será apagado.
        </para>
              <para>
          Por exemplo:
        </para>
              <screen>
{
  "ignition": {
    "version": "3.0.0"
  },
  "storage": {
    "filesystems": [
      {
        "device": "/dev/sda1",
        "format": "btrfs",
        "path": "/opt",
        "wipeFilesystem": false
      }
    ]
  }
}
</screen>
              <para>
          Normalmente, o diretório pessoal de um usuário comum está localizado no diretório <filename>/home/<replaceable>USER_NAME</replaceable></filename>. Como <filename>/home</filename> não é montado por padrão no initrd, a montagem deve ser definida claramente para que a criação do usuário seja bem-sucedida:
        </para>
              <screen>
{
  "ignition": {
    "version": "3.1.0"
  },
  "passwd": {
    "users": [
      {
        "name": "root",
        "passwordHash": "<replaceable>PASSWORD_HASH</replaceable>",
        "sshAuthorizedKeys": [
          "ssh-rsa <replaceable>SSH_KEY_HASH</replaceable>"
        ]
      }
    ]
  },
  "storage": {
    "filesystems": [
      {
        "device": "/dev/sda3",
        "format": "btrfs",
        "mountOptions": [
          "subvol=/@/home"
        ],
        "path": "/home",
        "wipeFilesystem": false
      }
    ]
  }
}
</screen>
            </section>
            <section xml:id="sec-storage-files">
              <title>O atributo <literal>files</literal></title>
              <para>
          Você pode usar o atributo <literal>files</literal> para criar qualquer arquivo em sua máquina. Para criar arquivos fora do esquema de particionamento padrão, lembre-se de que você precisará definir os diretórios usando o atributo <literal>filesystems</literal>.
        </para>
              <para>
          No exemplo a seguir, um nome de host é criado usando o atributo <literal>files</literal>. O arquivo <filename>/etc/hostname</filename> será criado com o nome de host <emphasis>sl-micro1</emphasis>:
        </para>
              <important>
                <para>
            Lembre-se de que o JSON aceita modos de arquivo em números decimais, por exemplo, <literal>420</literal>.
          </para>
              </important>
              <para>
          JSON:
        </para>
              <screen>
{
  "ignition": {
    "version": "3.0.0"
  },
  "storage": {
    "files": [
      {
        "overwrite": true,
        "path": "/etc/hostname",
        "contents": {
          "source": "data:,sl-micro1"
        },
        "mode": 420
      }
    ]
  }
}
</screen>
            </section>
            <section xml:id="sec-storage-directories">
              <title>O atributo <literal>directories</literal></title>
              <para>
          O atributo <literal>directories</literal> é uma lista dos diretórios que serão criados no sistema de arquivos. O atributo <literal>directories</literal> deve conter pelo menos um atributo <literal>path</literal>.
        </para>
              <para>
          Por exemplo:
        </para>
              <screen>
{
  "ignition": {
    "version": "3.0.0"
  },
  "storage": {
    "directories": [
      {
        "path": "/home/tux",
        "user": {
          "name": "tux"
        }
      }
    ]
  }
}
</screen>
            </section>
          </section>
          <section xml:id="sec-ignition-users">
            <title>Administração de usuários</title>
            <para>
        O atributo <literal>passwd</literal> é usado para adicionar usuários. Como alguns serviços (por exemplo, o Cockpit) exigem login de um usuário não root, defina pelo menos um usuário sem privilégios. Se preferir, crie esse usuário de um sistema em execução conforme descrito na <xref linkend="deployment-postinstall-adding-users"/>.
      </para>
            <para>
        Para efetuar login no sistema, crie um usuário <systemitem class="username">root</systemitem> e um usuário comum e defina as respectivas senhas. Você precisa criar o hash das senhas, por exemplo, usando o comando <command>openssl</command>:
      </para>
            <screen>
 openssl passwd -6
 </screen>
            <para>
        O comando cria um hash da senha escolhida. Use esse hash como o valor do atributo <literal>password_hash</literal>.
      </para>
            <para>
       Por exemplo:
      </para>
            <screen>
{
  "ignition": {
    "version": "3.0.0"
  },
  "passwd": {
    "users": [
      {
        "name": "root",
        "passwordHash": "<replaceable>PASSWORD_HASH</replaceable>",
        "sshAuthorizedKeys": [
          "ssh-rsa <replaceable>SSH_KEY_HASH</replaceable> <replaceable>USER</replaceable>@<replaceable>HOST</replaceable>"
        ]
      }
    ]
  }
}
</screen>
            <para>
        O atributo <literal>users</literal> deve conter pelo menos um atributo <literal>name</literal>. <literal>ssh_authorized_keys</literal> é uma lista de chaves SSH para o usuário.
      </para>
          </section>
          <section xml:id="sec-ignition-systemd">
            <title>Habilitando serviços <literal>systemd</literal></title>
            <para>
        Você pode habilitar serviços <systemitem class="daemon">systemd</systemitem> especificando-os no atributo <literal>systemd</literal>.
      </para>
            <para>
        Por exemplo:
      </para>
            <screen>
{
  "ignition": {
    "version": "3.0.0"
  },
  "systemd": {
    "units": [
      {
        "enabled": true,
        "name": "sshd.service"
      }
    ]
  }
}
</screen>
          </section>
        </section>
      </section>
    </section>
    <section xml:lang="pt-br" role="concept" version="5.1" xml:id="deployment-configuring-with-combustion">
      <info>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" name="maintainer" content="tbazant@suse.com" its:translate="no"/>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">Configurando a implantação do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> com o Combustion</title>
        <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">
          <para>
        Combustion é um módulo do dracut que permite configurar o sistema na primeira inicialização. Você pode usar o Combustion, por exemplo, para mudar as partições padrão, definir senhas de usuários, criar arquivos ou instalar pacotes.
      </para>
        </abstract>
      </info>
      <section xml:id="how-it-works-combustion">
        <title>Como funciona o Combustion?</title>
        <para>
      O Combustion é invocado depois que o argumento <literal>ignition.firstboot</literal> é passado para a linha de comando do kernel. O Combustion lê um arquivo fornecido chamado <filename>script</filename>, executa os comandos incluídos e, deste modo, realiza mudanças no sistema de arquivos. Se <filename>script</filename> incluir o flag de rede, o Combustion tentará configurar a rede. Após a montagem de <literal>/sysroot</literal>, o Combustion tentará ativar todos os pontos de montagem em <filename>/etc/fstab</filename> e, em seguida, chamará <command>transactional-update</command> para aplicar outras mudanças, por exemplo, definir a senha de <systemitem class="username">root</systemitem> ou instalar pacotes.
    </para>
        <para condition="deployment-bare-metal">
        O arquivo de configuração <filename>script</filename> deve residir no subdiretório <filename>combustion</filename> da mídia de configuração chamada <literal>combustion</literal>. A estrutura de diretórios deve ter a seguinte aparência:
      </para>
        <screen condition="deployment-bare-metal">
&lt;root directory&gt;
└── combustion
    └── script
    └── other files
</screen>
        <tip>
          <title>Usando Combustion junto com Ignition</title>
          <para>
          O Combustion pode ser usado junto com o Ignition. Se você pretende fazer isso, defina o rótulo do meio de configuração <literal>ignition</literal> e inclua o diretório <filename>ignition</filename> com o <filename>config.ign</filename> em sua estrutura de diretórios, conforme mostrado abaixo:
        </para>
          <screen>
&lt;root directory&gt;
└── combustion
    └── script
    └── other files
└── ignition
    └── config.ign
</screen>
          <para>
          Neste cenário, o Ignition é executado antes do Combustion.
        </para>
        </tip>
      </section>
      <section xml:lang="pt-br" role="reference" version="5.1" xml:id="deployment-combustion-configuration">
        <info>
          <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" name="maintainer" content="tbazant@suse.com" its:translate="no"/>
          <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">Exemplos de configuração do Combustion</title>
        </info>
        <section xml:id="configuring-combustion-script">
          <title>O arquivo de configuração <filename>script</filename></title>
          <para>
      O arquivo de configuração <filename>script</filename> é um conjunto de comandos que são analisados e executados pelo Combustion em um shell <command>transactional-update</command>. Este artigo mostra exemplos de tarefas de configuração executadas pelo Combustion.
    </para>
          <important>
            <title>Incluir declaração do interpretador</title>
            <para>
        Como o arquivo <filename>script</filename> é interpretado pelo shell, inicie-o sempre com a declaração do interpretador em sua primeira linha. Por exemplo, no caso do Bash:
      </para>
            <screen>#!/bin/<replaceable>bash</replaceable></screen>
          </important>
          <para>
      Para efetuar login no sistema, inclua pelo menos a senha de <systemitem class="username">root</systemitem>. No entanto, é recomendável estabelecer a autenticação por meio de chaves SSH. Se você precisa usar uma senha de <systemitem class="username">root</systemitem>, configure uma que seja segura. Para uma senha gerada aleatoriamente, use pelo menos 10 caracteres. Se você criar a senha manualmente, use mais do que 10 caracteres e combine letras maiúsculas, letras minúsculas e números.
    </para>
          <section xml:id="deployment-combustion-network">
            <title>Configuração de rede</title>
            <para>
        Para configurar e usar a conexão de rede durante a primeira inicialização, adicione a seguinte declaração ao <filename>script</filename>:
      </para>
            <screen># combustion: network</screen>
            <para>
        O uso dessa declaração transmite o argumento <literal>rd.neednet=1</literal> para o dracut. A configuração de rede é padronizada para usar DHCP. Se uma configuração de rede diferente for necessária, proceda conforme descrito na <xref linkend="combustion-prepare-statement"/>.
      </para>
            <para>
        Se você não usar a declaração, o sistema permanecerá configurado sem nenhuma conexão de rede.
      </para>
          </section>
          <section xml:id="combustion-prepare-statement">
            <title>Fazendo modificações no initramfs</title>
            <para>
        Talvez seja necessário fazer mudanças no ambiente initramfs, por exemplo, para gravar uma configuração de rede personalizada para o NetworkManager em <filename>/etc/NetworkManager/system-connections/</filename>. Para fazer isso, use a declaração <literal>prepare</literal>.
      </para>
            <para>
        Por exemplo, para criar uma conexão com um endereço IP estático e configurar o DNS:
      </para>
            <screen>
#!/bin/bash
# combustion: network prepare
set -euxo pipefail
          
nm_config() {
  umask 077 # Required for NM config
  mkdir -p /etc/NetworkManager/system-connections/
  cat &gt;/etc/NetworkManager/system-connections/static.nmconnection &lt;&lt;-EOF
  [connection]
  id=static
  type=ethernet
  autoconnect=true
          
  [ipv4]
  method=manual
  dns=192.168.100.1
  address1=192.168.100.42/24,192.168.100.1
EOF
}
          
if [ "${1-}" = "--prepare" ]; then
  nm_config # Configure NM in the initrd
  exit 0
fi
          
# Redirect output to the console
exec &gt; &gt;(exec tee -a /dev/tty0) 2&gt;&amp;1
          
  nm_config # Configure NM in the system
  curl example.com
# Leave a marker
echo "Configured with combustion" &gt; /etc/issue.d/combustion</screen>
          </section>
          <section xml:id="combustion-script-partitioning">
            <title>Particionamento</title>
            <para>As imagens brutas do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> são fornecidas com um esquema de particionamento padrão, conforme descrito na <xref linkend="deployment-default-partitioning"/>. Você pode usar um particionamento diferente. O conjunto de trechos de exemplo a seguir move <filename>/home</filename> para uma partição diferente.
      </para>
            <note>
              <title>Executar mudanças fora dos diretórios incluídos nos instantâneos</title>
              <para>
          O script a seguir executa mudanças que não estão incluídas nos instantâneos. Se o script falhar e o instantâneo for descartado, algumas mudanças permanecerão visíveis e não poderão ser revertidas, por exemplo, as mudanças feitas no dispositivo <literal>/dev/vdb</literal>.
        </para>
            </note>
            <para>
        O trecho a seguir cria um esquema de particionamento GPT com uma única partição no dispositivo <literal>/dev/vdb</literal>:
      </para>
            <screen>
sfdisk /dev/vdb &lt;&lt;EOF
label: gpt
type=linux
EOF

partition=/dev/vdb1
</screen>
            <para>
        A partição é formatada como Btrfs:
      </para>
            <screen>
wipefs --all ${partition}
mkfs.btrfs ${partition}
</screen>
            <para>
        O conteúdo possível de <filename>/home</filename> é movido para o novo local da pasta <filename>/home</filename> pelo seguinte trecho:
      </para>
            <screen>
mount /home
mount ${partition} /mnt
rsync -aAXP /home/ /mnt/
umount /home /mnt
</screen>
            <para>
        O seguinte trecho remove uma entrada antiga de <filename>/etc/fstab</filename> e cria uma nova:
      </para>
            <screen>
awk -i inplace '$2 != "/home"' /etc/fstab
echo "$(blkid -o export ${partition} | grep ^UUID=) /home btrfs defaults 0 0" &gt;&gt;/etc/fstab
</screen>
          </section>
          <section xml:id="combustion-adding-users">
            <title>Criando novos usuários</title>
            <para>
        Como alguns serviços (por exemplo, o Cockpit) exigem login de um usuário não root, defina pelo menos um usuário sem privilégios. Se preferir, crie esse usuário de um sistema em execução conforme descrito na <xref linkend="deployment-postinstall-adding-users"/>.
      </para>
            <para>
        Para adicionar uma nova conta de usuário, primeiro crie uma string de hash que represente a senha do usuário. Use o comando <command>openssl passwd -6</command>.
      </para>
            <para>
        Após obter o hash da senha, adicione as seguintes linhas ao <filename>script</filename>:
      </para>
            <screen>mount /home
useradd -m <replaceable>EXAMPLE_USER</replaceable>
echo '<replaceable>EXAMPLE_USER</replaceable>:<replaceable>PASSWORD_HASH</replaceable>' | chpasswd -e</screen>
          </section>
          <section xml:id="combustion-script-security">
            <title>Definindo uma senha de <systemitem class="username">root</systemitem></title>
            <para>
        Antes de definir a senha de <systemitem class="username">root</systemitem>, gere um hash da senha, por exemplo, usando <command>openssl passwd
        -6</command>. Para definir a senha, adicione a seguinte linha ao <filename>script</filename>:
      </para>
            <screen>echo 'root:<replaceable>PASSWORD_HASH</replaceable>' | chpasswd -e</screen>
          </section>
          <section xml:id="combustion-script-sshkeys">
            <title>Adicionando chaves SSH</title>
            <para>
        O trecho a seguir cria um diretório para armazenar a chave SSH de <systemitem class="username">root</systemitem> e, em seguida, copia a chave SSH pública localizada no dispositivo de configuração para o arquivo <filename>authorized_keys</filename>.
      </para>
            <screen>
mkdir -pm700 /root/.ssh/
cat id_rsa_new.pub &gt;&gt; /root/.ssh/authorized_keys
</screen>
            <note>
              <para>
          O serviço SSH deve ser habilitado, caso você tenha que usar login remoto via SSH. Para obter informações detalhadas, consulte a <xref linkend="combustion-script-services"/>.
        </para>
            </note>
          </section>
          <section xml:id="combustion-script-services">
            <title>Habilitando serviços</title>
            <para>
        Para habilitar serviços do sistema, como SSH, adicione a seguinte linha ao <filename>script</filename>:
      </para>
            <screen>systemctl enable sshd.service</screen>
          </section>
          <section xml:id="combustion-script-install">
            <title>Instalando pacotes</title>
            <important>
              <title>Conexão de rede e registro do sistema podem ser necessários</title>
              <para>
          Como alguns pacotes podem exigir assinatura adicional, talvez seja necessário registrar seu sistema primeiro. Uma conexão de rede disponível também pode ser necessária para instalar pacotes adicionais.
        </para>
            </important>
            <para>
        Durante a primeira configuração de boot, você pode instalar pacotes adicionais no sistema. Por exemplo, você pode instalar o editor <literal>vim</literal> adicionando:
      </para>
            <screen>zypper --non-interactive install vim-small</screen>
            <note>
              <para>
          Lembre-se de que você não poderá usar o <command>zypper</command> depois que a configuração for concluída e você fizer a inicialização no sistema configurado. Para executar mudanças mais tarde, você deve usar o comando <command>transactional-update</command> para criar um instantâneo modificado.
        </para>
            </note>
          </section>
        </section>
      </section>
    </section>
  </section>
  <section xml:lang="pt-br" role="task" version="5.1" xml:id="task-prepare-alp-vm">
    <info>
      <title xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">Preparando a máquina virtual</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" name="maintainer" content="tbazant@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">
        <para>
        Esta seção descreve como preparar uma nova máquina virtual e quais etapas executar para implantar o <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> nessa máquina.
      </para>
      </abstract>
    </info>
    <procedure>
      <step>
        <para>
        Faça download da imagem de disco do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> no Servidor de Host de VM em que você pretende executar o <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> virtualizado.
      </para>
      </step>
      <step>
        <para>
        Inicie o Gerenciador de Máquinas Virtuais e selecione <menuchoice><guimenu>Arquivo</guimenu><guimenu>Nova Máquina Virtual</guimenu></menuchoice>.
      </para>
      </step>
      <step>
        <para>
        Selecione <guimenu>Importar imagem de disco existente</guimenu>. Confirme com <guimenu>Avançar</guimenu>.
      </para>
      </step>
      <step>
        <para>
        Especifique o caminho para a imagem de disco do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> da qual você já fez download e o tipo de OS Linux que você está implantando, por exemplo, <literal>Generic Linux 2020</literal>. Confirme com <guimenu>Avançar</guimenu>.
      </para>
      </step>
      <step>
        <para>
        Especifique a quantidade de memória e o número de processadores que deseja atribuir à máquina virtual do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> e clique em <guimenu>Encaminhar</guimenu> para confirmar.
      </para>
      </step>
      <step>
        <para>
        Especifique o nome da máquina virtual e da rede que serão usadas.
      </para>
      </step>
      <step>
        <para>
        Se você estiver implantando uma imagem criptografada do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase>, execute estas etapas adicionais:
      </para>
        <substeps>
          <step>
            <para>
            Habilite <guimenu>Personalizar configuração antes de instalar</guimenu> e clique em <guimenu>Concluir</guimenu> para confirmar.
          </para>
          </step>
          <step>
            <para>
            Clique em <guimenu>Visão geral</guimenu> no menu esquerdo e mude o método de boot de BIOS para UEFI para um boot seguro. Confirme com <guimenu>Aplicar</guimenu>.
          </para>
            <figure>
              <title>Definir o firmware UEFI para a imagem criptografada do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase></title>
              <mediaobject>
                <imageobject role="fo">
                  <imagedata fileref="deploy-encrypted-uefi.png" width="75%"/>
                </imageobject>
                <imageobject role="html">
                  <imagedata fileref="deploy-encrypted-uefi.png" width="75%"/>
                </imageobject>
                <textobject role="description">
                  <phrase>Definir o firmware UEFI para a imagem criptografada do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase></phrase>
                </textobject>
              </mediaobject>
            </figure>
          </step>
          <step>
            <para>
            Adicione um dispositivo Trusted Platform Module (TPM). Clique em <guimenu>Adicionar Hardware</guimenu>, selecione <guimenu>TPM</guimenu> no menu esquerdo e escolha o tipo <guimenu>Emulado</guimenu>.
          </para>
            <figure>
              <title>Adicionar um dispositivo TPM emulado</title>
              <mediaobject>
                <imageobject role="fo">
                  <imagedata fileref="alp-deploy-encrypted-tpm.png" width="75%"/>
                </imageobject>
                <imageobject role="html">
                  <imagedata fileref="alp-deploy-encrypted-tpm.png" width="75%"/>
                </imageobject>
                <textobject role="description">
                  <phrase>Adicionar um dispositivo TPM emulado</phrase>
                </textobject>
              </mediaobject>
            </figure>
            <para>
            Confirme com <guimenu>Concluir</guimenu> e inicie a implantação do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> clicando em <guimenu>Começar Instalação</guimenu> no menu superior.
          </para>
          </step>
        </substeps>
      </step>
    </procedure>
  </section>
  <section role="task" xml:lang="pt-br" version="5.2" xml:id="deployment-jeos-firstboot">
    <info>
      <title xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">Configurando com o JeOS Firstboot</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
      <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
        <para>
        Quando você inicializar o <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> pela primeira vez sem fornecer um dispositivo de configuração, o <emphasis>JeOS Firstboot</emphasis> permitirá a execução de uma configuração mínima do sistema. Se você precisar de mais controle sobre o processo de implantação, use um dispositivo com a configuração do Ignition ou do Combustion. Encontre mais informações na <xref linkend="deployment-configuring-with-ignition"/> e na <xref linkend="deployment-configuring-with-combustion"/>.
      </para>
      </abstract>
    </info>
    <para>
    Para configurar o sistema com o <emphasis>JeOS Firstboot</emphasis>, faça o seguinte:
  </para>
    <procedure>
      <step>
        <para>O <guimenu>JeOS Firstboot</guimenu> exibe uma tela de boas-vindas. Confirme com <keycap function="enter"/>.
      </para>
      </step>
      <step>
        <para>
        Nas próximas telas, selecione o teclado, confirme o contrato de licença e escolha o fuso horário.
      </para>
      </step>
      <step>
        <para>
        Na janela da caixa de diálogo <guimenu>Enter root password</guimenu> (Digitar senha de root), insira e confirme uma senha de <systemitem class="username">root</systemitem>.
      </para>
        <figure>
          <title>Digitar senha de root</title>
          <mediaobject>
            <imageobject role="fo">
              <imagedata fileref="alp-deploy-rootpwd.png" width="50%"/>
            </imageobject>
            <imageobject role="html">
              <imagedata fileref="alp-deploy-rootpwd.png" width="50%"/>
            </imageobject>
            <textobject role="description">
              <phrase>Digitar senha de root</phrase>
            </textobject>
          </mediaobject>
        </figure>
      </step>
      <step condition="raw_image">
        <para>
        Para implantações criptografadas, o JeOS Firstboot faz o seguinte:
      </para>
        <itemizedlist>
          <listitem>
            <para>
            Solicita uma nova frase secreta para substituir a frase secreta padrão.
          </para>
          </listitem>
          <listitem>
            <para>
            Gera uma nova chave LUKS e criptografa novamente a partição.
          </para>
          </listitem>
          <listitem>
            <para>
            Adiciona um slot de chave secundária ao cabeçalho LUKS e criptografa-o no dispositivo TPM.
          </para>
          </listitem>
        </itemizedlist>
        <para>
        Se você estiver implantando uma imagem criptografada, siga estas etapas:
      </para>
        <substeps>
          <step>
            <para>
            Selecione o método de proteção desejado e clique em <guimenu>OK</guimenu> para confirmar.
          </para>
          </step>
          <step>
            <para>
            Insira uma senha de recuperação para a criptografia LUKS e digite-a novamente. A nova criptografia do sistema de arquivos raiz é iniciada.
          </para>
          </step>
        </substeps>
        <figure>
          <title>Selecionar método de criptografia</title>
          <mediaobject>
            <imageobject role="fo">
              <imagedata fileref="deploy-encrypted-passkey.png" width="50%"/>
            </imageobject>
            <imageobject role="html">
              <imagedata fileref="deploy-encrypted-passkey.png" width="50%"/>
            </imageobject>
            <textobject role="description">
              <phrase>Selecionar método de criptografia</phrase>
            </textobject>
          </mediaobject>
        </figure>
      </step>
      <step>
        <para>
        Após a implantação bem-sucedida, registre seu sistema e crie um usuário sem privilégios conforme descrito na <xref linkend="deployment-registering-system"/>.
      </para>
      </step>
    </procedure>
  </section>
  <section xml:id="deployment-raw-image-vm-post-deployement">
    <info>
      <title xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">Etapas pós-implantação</title>
    </info>
    <section role="task" xml:lang="pt-br" version="5.2" xml:id="alp-expanding-encrypted-images">
      <info>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Expandindo imagens de disco criptografadas</title>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="tbazant@suse.com" its:translate="no"/>
        <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
          <para>
        As imagens de disco brutas criptografadas do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> não se expandem automaticamente até a capacidade total do disco. Este procedimento descreve as etapas para expandi-las até o tamanho desejado.
      </para>
        </abstract>
      </info>
      <procedure>
        <title>Expandindo imagens de disco criptografadas</title>
        <step>
          <para>
        Use o comando <command>qemu-img</command> para aumentar a imagem de disco para o tamanho desejado.
      </para>
        </step>
        <step>
          <para>
        Use o comando <command>parted</command> para redimensionar a partição em que o dispositivo LUKS reside (por exemplo, a partição número 3) para o tamanho desejado.
      </para>
        </step>
        <step>
          <para>
        Execute o comando <command>cryptsetup resize luks</command>. Quando solicitado, digite a frase secreta para redimensionar o dispositivo criptografado.
      </para>
        </step>
        <step>
          <para>
        Execute o comando <command>transactional-update shell</command> para abrir um shell de leitura-gravação no instantâneo do disco atual. Em seguida, redimensione o sistema de arquivos Btrfs para o tamanho desejado, por exemplo:
      </para>
          <screen><prompt role="root"># </prompt>btrfs fi resize max /</screen>
        </step>
        <step>
          <para>
        Saia do shell com <command>exit</command> e reinicialize o sistema com <command>reboot</command>.
      </para>
        </step>
      </procedure>
    </section>
    <section role="task" xml:lang="pt-br" version="5.2" xml:id="deployment-reencryption">
      <info>
        <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
          <para/>
        </abstract>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Criptografando novamente o sistema criptografado</title>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
      </info>
      <warning>
        <title>O sistema não está protegido</title>
        <para>
      O sistema não está protegido. Portanto, não armazene dados confidenciais nele até que a nova criptografia de disco esteja concluída.
    </para>
      </warning>
      <note>
        <title>A etapa não é necessária se você implantou o sistema usando o JeOS Firstboot</title>
        <para>
    O JeOS Firstboot solicita uma nova frase secreta durante a fase de implantação. Depois que você inseri-la, o sistema será recriptografado automaticamente e, portanto, nenhuma outra ação será necessária.
    </para>
      </note>
      <para>As imagens criptografadas do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> são fornecidas com uma frase secreta LUKS padrão. Para proteger seu sistema, mude-a após a implantação do sistema. Para isso, proceda conforme descrito abaixo. Execute as etapas na mesma sessão de shell.
  </para>
      <procedure>
        <step>
          <para>
        Importe as funções necessárias para o shell:
      </para>
          <screen><prompt role="root"># </prompt>source /usr/share/fde/luks</screen>
        </step>
        <step>
          <para>
        Identifique o dispositivo LUKS subjacente e defina outras variáveis usadas:
      </para>
          <screen><prompt role="root"># </prompt>luks_name=$(expr "`df --output=source / | grep /dev/`" :
      ".*/\(.*\)")</screen>
          <para>
        E:
      </para>
          <screen><prompt role="root"># </prompt>luks_dev=$(luks_get_underlying_device "$luks_name")</screen>
        </step>
        <step xml:id="creating-key-files">
          <para>
        Crie um arquivo de chave que armazene a frase secreta padrão <emphasis>1234</emphasis> e um arquivo de chave com a nova frase secreta.
      </para>
        </step>
        <step>
          <para>
        Mude a senha de recuperação:
      </para>
          <screen><prompt role="root"># </prompt>cryptsetup luksChangeKey --key-file <replaceable>PATH_TO_DEFAULT</replaceable> --pbkdf pbkdf2 "${luks_dev}" <replaceable>PATH_TO_NEW</replaceable></screen>
          <para><replaceable>PATH_TO_DEFAULT</replaceable> é o caminho para o arquivo de chave com a frase secreta padrão. <replaceable>PATH_TO_NEW</replaceable> é o caminho para o arquivo de chave com a sua nova frase secreta.
   </para>
        </step>
        <step>
          <para>
        Criptografe novamente o dispositivo LUKS:
      </para>
          <screen><prompt role="root"># </prompt>cryptsetup reencrypt --key-file <replaceable>PATH_TO_NEW</replaceable> ${luks_dev}</screen>
        </step>
        <step>
          <para>
        Crie uma nova chave aleatória e criptografe-a com o TPM:
      </para>
          <screen><prompt>&gt; </prompt><command>sudo</command> fdectl regenerate-key --passfile <replaceable>PATH_TO_NEW</replaceable></screen>
        </step>
        <step>
          <para>
        Remova os dois arquivos de chave criados no <xref linkend="creating-key-files" xrefstyle="template:step 3"/>.
      </para>
        </step>
        <step>
          <para>Atualize o arquivo <filename>grub.cfg</filename> executando:</para>
          <screen><prompt>&gt; </prompt><command>sudo</command> transactional-update grub.cfg</screen>
        </step>
        <step>
          <para>
        Reinicialize o sistema.
      </para>
        </step>
      </procedure>
    </section>
    <section role="task" xml:lang="pt-br" version="5.2" xml:id="deployment-postinstall-adding-users">
      <info>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Adicionando usuários</title>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
        <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
          <para>
        Como o <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> requer um usuário sem privilégios para efetuar login por SSH ou para acessar o Cockpit, você precisa criar essa conta.
      </para>
        </abstract>
      </info>
      <para condition="x86-64">
    Esta etapa é opcional se você definiu um usuário sem privilégios no Ignition ou Combustion. Se você implantou o sistema usando o JeOS Firstboot, configure apenas a senha de <systemitem class="username">root</systemitem> e crie a conta sem privilégios manualmente conforme descrito abaixo:
  </para>
      <procedure>
        <step>
          <para>
        Execute o comando <command>useradd</command> da seguinte maneira:
      </para>
          <screen>
            <prompt role="root"># </prompt>
            <command>useradd -m <replaceable>USER_NAME</replaceable></command>
          </screen>
        </step>
        <step>
          <para>
        Defina uma senha para essa conta:
      </para>
          <screen><prompt role="root"># </prompt>passwd <replaceable>USER_NAME</replaceable></screen>
        </step>
        <step>
          <para>
        Se necessário, adicione o usuário ao grupo <literal>wheel</literal>:
      </para>
          <screen><prompt role="root"># </prompt>usermod -aG wheel <replaceable>USER_NAME</replaceable></screen>
        </step>
      </procedure>
    </section>
    <section role="task" xml:lang="pt-br" version="5.2" xml:id="deployment-registering-system">
      <info>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">Registrando o <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> da CLI</title>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
        <abstract xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">
          <para>
        Após a implantação bem-sucedida, você precisará registrar o sistema para obter suporte técnico e receber atualizações. É possível registrar o sistema da linha de comando usando o comando <command>transactional-update
        register</command>.
      </para>
        </abstract>
      </info>
      <para>
    Para registrar o <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> no SUSE Customer Center, faça o seguinte:
  </para>
      <procedure>
        <step>
          <para>
        Execute <command>transactional-update register</command> da seguinte maneira:
      </para>
          <screen><prompt role="root"># </prompt>transactional-update register -r <replaceable>REGISTRATION_CODE</replaceable> -e <replaceable>EMAIL_ADDRESS</replaceable></screen>
          <para>
        Para o registro com um servidor de registro local, especifique também o URL para o servidor:
      </para>
          <screen><prompt role="root"># </prompt>transactional-update register -r <replaceable>REGISTRATION_CODE</replaceable> -e <replaceable>EMAIL_ADDRESS</replaceable> \
 --url "https://suse_register.example.com/"</screen>
          <para>
        Substitua <replaceable>REGISTRATION_CODE</replaceable> pelo código de registro que você recebeu com a cópia do <phrase><phrase os="slmicro">SLE Micro</phrase></phrase>. Substitua <replaceable>EMAIL_ADDRESS</replaceable> pelo endereço de e-mail associado à conta do SUSE que você ou sua organização usa para gerenciar assinaturas.
      </para>
        </step>
        <step>
          <para>
        Reinicialize o sistema para alternar para o instantâneo mais recente.
      </para>
        </step>
        <step>
          <para>O <phrase><phrase os="slmicro">SLE Micro</phrase></phrase> agora está registrado.
      </para>
        </step>
      </procedure>
      <note>
        <title>Outras opções de registro</title>
        <para>
      Para obter informações que não fazem parte do escopo desta seção, consulte a documentação em linha com <command>SUSEConnect --help</command>.
    </para>
      </note>
    </section>
  </section>
  <section version="5.2" xml:id="legal-disclaimer">
    <info>
      <title xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">Informações legais</title>
    </info>
    <para> Copyright © 2006-<?dbtimestamp format="Y"?>

 SUSE LLC e colaboradores. Todos os direitos reservados. </para>
    <para>
    Permissão concedida para copiar, distribuir e/ou modificar este documento sob os termos da Licença GNU de Documentação Livre, Versão 1.2 ou (por sua opção) versão 1.3; com a Seção Invariante sendo estas informações de copyright e a licença. Uma cópia da versão 1.2 da licença está incluída na seção intitulada <quote>GNU Free Documentation License</quote> (Licença GNU de Documentação Livre).
  </para>
    <para>
    Para ver as marcas registradas da SUSE, visite <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.suse.com/company/legal/"/>. Todas as marcas comerciais de terceiros pertencem a seus respectivos proprietários. Os símbolos de marca registrada (®, ™ etc.) indicam marcas registradas da SUSE e de suas afiliadas. Os asteriscos (*) indicam marcas registradas de terceiros.
  </para>
    <para>
    Todas as informações deste manual foram compiladas com a maior atenção possível aos detalhes. Entretanto, isso não garante uma precisão absoluta. A SUSE LLC, suas afiliadas, os autores ou tradutores não serão responsáveis por possíveis erros nem pelas consequências resultantes de tais erros.
  </para>
  </section>
  <appendix xmlns:its="http://www.w3.org/2005/11/its" version="5.2" role="legal" its:translate="no" xml:id="doc-gfdl-license">
    <info>
      <title xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">Licença GFDL (GNU Free Documentation License)</title>
    </info>
    <para>
  Copyright (C) 2000, 2001, 2002 Free Software Foundation, Inc. 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 EUA. Qualquer pessoa está autorizada a reproduzir e distribuir cópias literais deste documento de licença, mas não a mudar seu conteúdo.
 </para>
    <bridgehead renderas="sect4">
    0. PREÂMBULO
  </bridgehead>
    <para>
  A finalidade desta Licença é tornar um manual, um livro ou outro documento funcional e útil “livre”, no sentido de garantir a todos a liberdade efetiva para copiá-lo e redistribuí-lo, com ou sem modificações, para fins comerciais ou não. Em segundo lugar, esta Licença preserva ao autor e ao editor o direito de obter créditos pelo seu trabalho, não sendo considerados responsáveis pelas modificações feitas por outras pessoas.
 </para>
    <para>
  Esta Licença é um tipo de “copyleft”, significando que trabalhos derivados do documento também devem ser livres no mesmo sentido. Ela complementa a Licença Pública Geral GNU, que é uma licença de copyleft criada para software livre.
 </para>
    <para>
  Criamos esta Licença para usá-la em manuais de software livre, pois o software livre precisa de documentação livre: um programa livre deve incluir manuais que ofereçam a mesma liberdade que o software. Contudo, essa Licença não está limitada a manuais de software, pois pode ser usada para qualquer trabalho de texto, independentemente do assunto ou do fato de ser publicado como manual impresso. Esta licença é recomendável principalmente para trabalhos cuja finalidade seja instrução ou referência.
 </para>
    <bridgehead renderas="sect4">
    1. APLICABILIDADE E DEFINIÇÕES
  </bridgehead>
    <para>
  Esta Licença se aplica a qualquer manual ou outro trabalho, em qualquer meio, que contenha um aviso incluído pelo detentor dos direitos autorais indicando que ele pode ser distribuído segundo os termos desta Licença. Esse aviso concede uma licença em nível mundial, isenta do pagamento de royalties e de duração ilimitada, para usar o trabalho sob as condições aqui previstas. O “Documento” a seguir refere-se a tal manual ou trabalho. Qualquer membro do público pode ser um licenciado e é tratado como “você”. Você aceitará a licença se copiar, modificar ou distribuir o trabalho de um modo que necessite de permissão de acordo com a lei de direitos autorais.
 </para>
    <para>
  Uma “Versão Modificada” do Documento significa qualquer trabalho que contenha o Documento ou parte dele, que pode ser sua cópia fiel ou com modificações e/ou traduzido para outro idioma.
 </para>
    <para>
  Uma “Seção Secundária” é um apêndice nomeado ou uma seção de introdução do Documento, que trata exclusivamente da relação dos editores ou autores do Documento com seu assunto geral (ou questões relacionadas), e não contém nada que possa estar diretamente ligado ao assunto geral. (Portanto, se o documento for parcialmente um livro de matemática, uma seção secundária não poderá explicar nada de matemática.) Tal relação pode ser uma conexão histórica com o assunto ou com temas relacionados, ou tratar de questões legais, comerciais, filosóficas, éticas ou políticas com relação a eles.
 </para>
    <para>
  As “Seções Invariáveis” são determinadas Seções Secundárias cujos títulos são designados como sendo referentes a essas Seções Invariáveis, no aviso que indica que o Documento foi lançado sob esta Licença. Se uma seção não se encaixar na definição acima de secundária, não poderá ser designada como invariável. O documento pode não conter Seções Invariáveis. Se o documento não identificar seções invariáveis, isso significa que não há nenhuma.
 </para>
    <para>
  Os “Textos de Capa” são pequenos trechos de texto, como Textos de Folha de Rosto ou de Contracapa, incluídos no aviso que indica que o Documento foi lançado sob esta licença. O Texto de Folha de Rosto pode ter no máximo 5 palavras, e o Texto de Contracapa pode ter no máximo 25.
 </para>
    <para>
  Uma cópia “Transparente” do Documento significa uma cópia que pode ser lida por computador, representada em um formato cuja especificação esteja disponível ao público em geral, que seja adequada para a imediata revisão do documento usando editores de texto genéricos ou (para imagens compostas de pixels) programas gráficos genéricos ou (para desenhos) algum editor de desenho amplamente disponível, e que seja adequado para inclusão em formatadores de texto ou para a conversão automática em diversos formatos adequados para entrada em formatadores de texto. Uma cópia feita em outro formato de arquivo Transparente cuja marcação, ou ausência desta, foi manipulada para impedir ou desencorajar modificação subsequente pelos leitores não é Transparente. Um formato de imagem não é Transparente se usado em lugar de qualquer quantidade substancial de texto. Uma cópia que não é “Transparente” é chamada “Opaca”.
 </para>
    <para>
  Exemplos de formatos apropriados para cópias Transparentes incluem ASCII simples sem marcação, formato de entrada Texinfo, LaTeX, SGML ou XML usando um DTD publicamente disponível, e HTML padrão simples, PostScript ou PDF projetados para modificação manual. Exemplos de formatos de imagem transparentes são PNG, XCF e JPG. Formatos Opacos incluem formatos proprietários que podem ser lidos e editados somente por processadores de texto proprietários, SGML ou XML para os quais o DTD e/ou ferramentas de processamento não são amplamente disponibilizadas, e HTML, PostScript ou PDF gerados automaticamente com finalidade apenas de saída por alguns processadores de texto.
 </para>
    <para>
  A “Página de Título” significa, para um livro impresso, a própria página do título, além das páginas subsequentes necessárias para conter, de forma legível, o material que esta Licença requer que apareça na página de título. Para trabalhos em formatos que não tenham uma página de título assim, a “Página de Título” significa o texto próximo à ocorrência mais proeminente do título do trabalho, precedendo o início do corpo do texto.
 </para>
    <para>
  Uma seção “Intitulada XYZ” significa uma subunidade nomeada do Documento cujo título seja precisamente XYZ ou contenha XYZ entre parênteses após o texto que traduz XYZ para outro idioma. (Aqui, XYZ representa o nome de uma seção específica mencionada abaixo, como “Agradecimentos”, “Dedicatória”, “Apoio” ou “Histórico”.) “Preservar o Título” de tal seção quando você modifica o Documento significa que ela continua sendo uma seção “Intitulada XYZ” de acordo com essa definição.
 </para>
    <para>
  O Documento pode incluir Isenções de Responsabilidade quanto a Garantia próximas ao aviso que indica que esta Licença se aplica a este Documento. As Isenções de Responsabilidade de Garantia são consideradas incluídas por referência nesta Licença, mas apenas no que diz respeito à isenção de garantias: qualquer outra implicação que essas Isenções de Responsabilidade de Garantia possam ter será anulada e não terá efeito no significado desta Licença.
 </para>
    <bridgehead renderas="sect4">
    2. CÓPIAS LITERAIS
  </bridgehead>
    <para>
  Você pode copiar e distribuir o Documento em qualquer meio, comercialmente ou não, desde que esta Licença, as informações de copyright e as informações de licença afirmando que esta Licença se aplica ao Documento sejam reproduzidas em todas as cópias, e que você não inclua outras condições, quaisquer que sejam, às condições desta Licença. Você não pode usar de medidas técnicas para obstruir ou controlar a leitura ou cópia futura das cópias que você fizer ou distribuir. Contudo, você pode aceitar remuneração em troca das cópias. Se você distribuir um número suficientemente grande de cópias, deverá também respeitar as condições na seção 3.
 </para>
    <para>
  Você também pode emprestar cópias, sob as mesmas condições mencionadas acima, além de exibi-las publicamente.
 </para>
    <bridgehead renderas="sect4">
    3. COPIANDO EM QUANTIDADE
  </bridgehead>
    <para>
  Se você publicar cópias impressas (ou cópias em uma mídia que normalmente tem capas impressas) do Documento, em número superior a 100, e o aviso de licença do Documento exigir Textos de Capa, deverá encadernar as cópias em capas que contenham, de forma clara e legível, todos estes Textos de Capa: Textos de Folha de Rosto na folha de rosto e Textos de Contracapa na contracapa. As duas capas também devem identificar, de forma clara e legível, você como o editor das cópias. A capa frontal deve apresentar o título completo com todas as palavras deste igualmente proeminentes e visíveis. Você pode adicionar outros materiais nas capas. Cópias com mudanças limitadas às capas, desde que preservando o título do Documento e satisfazendo a essas condições, podem ser tratadas como cópias literais em outros aspectos.
 </para>
    <para>
  Se os textos necessários a qualquer uma das capas forem muito volumosos para serem incluídos de forma legível, você deverá colocar os primeiros listados (quantos couberem razoavelmente) na própria capa, e continuar o restante nas páginas adjacentes.
 </para>
    <para>
  Se você publicar ou distribuir cópias Opacas do Documento em número superior a 100, deverá incluir uma cópia Transparente legível por computador juntamente com cada cópia Opaca, ou informar em, ou juntamente com, cada cópia Opaca um endereço de rede do qual o público geral possa acessar e obter, usando protocolos de rede públicos padrão, uma cópia Transparente completa do Documento, livre de material adicionado. Se você decidir pela segunda opção, deverá seguir etapas razoavelmente prudentes, quando começar a distribuir as cópias Opacas em quantidade, para garantir que essa cópia transparente permaneça acessível no local indicado por pelo menos um ano após a última vez que você distribuir uma cópia Opaca (diretamente ou através de seus agentes ou distribuidores) dessa edição ao público.
 </para>
    <para>
  É solicitado, mas não exigido, que você contate os autores do Documento muito antes de redistribuir qualquer número grande de cópias, para dar-lhes a oportunidade de lhe fornecer uma versão atualizada do Documento.
 </para>
    <bridgehead renderas="sect4">
    4. MODIFICAÇÕES
  </bridgehead>
    <para>
  Você pode copiar e distribuir uma Versão Modificada do Documento sob as condições das seções 2 e 3 acima, desde que forneça a Versão Modificada estritamente sob esta Licença, com a Versão Modificada no lugar do Documento, permitindo assim a distribuição e modificação da Versão Modificada a quem quer que possua uma cópia desta. Além disso, você deve executar os seguintes procedimentos na Versão Modificada:
 </para>
    <orderedlist numeration="upperalpha" spacing="normal">
      <listitem>
        <para>
    Use na Página de Título (e nas capas, se houver) um título distinto do título do Documento, e dos de versões anteriores (os quais devem, se houver algum, ser listados na seção “Histórico” do Documento). Você pode usar o mesmo título de uma versão anterior se o editor original dessa versão assim o permitir.
   </para>
      </listitem>
      <listitem>
        <para>
    Liste na Página de Título, como autores, uma ou mais pessoas ou entidades responsáveis pela autoria das modificações na Versão Modificada, juntamente com pelo menos cinco dos autores principais do Documento (todos seus autores principais, se houver menos que cinco), a menos que eles lhe desobriguem dessa exigência.
   </para>
      </listitem>
      <listitem>
        <para>
    Mencione na Página de Título o nome do editor da Versão Modificada, como seu editor.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve todas as informações de copyright do Documento.
   </para>
      </listitem>
      <listitem>
        <para>
    Adicione as informações de copyright adequadas para suas modificações ao lado das outras informações de copyright.
   </para>
      </listitem>
      <listitem>
        <para>
    Inclua, imediatamente após as informações de copyright, informações de licença concedendo ao público permissão para usar a Versão Modificada sob os termos desta Licença, na forma mostrada no Adendo abaixo.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve, nesse aviso de licença, as listas completas de Seções Invariáveis e os Textos de Capa necessários fornecidos no aviso de licença do Documento.
   </para>
      </listitem>
      <listitem>
        <para>
    Inclua uma cópia inalterada desta Licença.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve a seção intitulada “Histórico”, Preserve seu Título e adicione à seção um item mencionando pelo menos o título, o ano, os novos autores e o editor da Versão Modificada, como mostrado na Página de Título. Se não houver uma seção intitulada “Histórico” no Documento, crie uma mencionando o título, o ano, os autores e o editor do Documento, como mostrado na Página de Título; em seguida, adicione um item que descreva a Versão Modificada, como mencionado na frase anterior.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve a localização de rede, se houver, indicada no Documento para acesso público a uma cópia Transparente deste e, da mesma maneira, as localizações de rede indicadas no Documento para versões anteriores nas quais ele se baseia. Essas informações podem ser incluídas na seção “Histórico”. Você pode omitir uma localização de rede para um trabalho que foi publicado pelo menos quatro anos antes do Documento em si, ou se o editor original da versão à qual a localização se refere der permissão.
   </para>
      </listitem>
      <listitem>
        <para>
    Para qualquer seção intitulada “Agradecimentos” ou “Dedicatória”, Preserve o Título da seção, e preserve dentro da seção toda a essência e o tom de cada um dos agradecimentos e/ou dedicatórias aos colaboradores nela mencionados.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve todas as Seções Invariantes do Documento, inalteradas em seu texto e títulos. Números de seção ou o equivalente não são considerados parte dos títulos das seções.
   </para>
      </listitem>
      <listitem>
        <para>
    Apague qualquer seção intitulada “Apoio”. Tal seção não pode ser incluída na Versão Modificada.
   </para>
      </listitem>
      <listitem>
        <para>
    Não modifique o título de qualquer seção existente para “Apoio” nem de forma a gerar conflito com o título de qualquer Seção Invariável.
   </para>
      </listitem>
      <listitem>
        <para>
    Preserve as Isenções de Responsabilidade quanto a Garantia.
   </para>
      </listitem>
    </orderedlist>
    <para>
  Se a Versão Modificada incluir novas seções iniciais ou apêndices que sejam qualificados como Seções Secundárias, e não contiver material copiado do Documento, você poderá, a seu critério, tornar invariantes algumas dessas seções ou todas elas. Para fazer isso, adicione seus títulos à lista de Seções Invariáveis no aviso de licença da Versão Modificada. Esses títulos devem ser diferentes de outros títulos de seção.
 </para>
    <para>
  Você pode adicionar uma seção intitulada “Apoio”, desde que ela não contenha nada além do apoio recebido para sua Versão Modificada por várias partes; por exemplo, notas do revisor ou de que o texto foi aprovado por uma organização como a definição oficial de um padrão.
 </para>
    <para>
  Você pode adicionar uma passagem de até cinco palavras como Texto de Folha de Rosto, e uma passagem de até 25 palavras como Texto de Contracapa, ao fim da lista de Textos de Capa na Versão Modificada. Somente uma passagem de Texto de Folha de Rosto e uma de Texto de Contracapa pode ser adicionada por (ou através de arranjos feitos por) uma entidade qualquer. Se o Documento já incluir um texto de capa para a mesma capa, anteriormente incluído por você ou por arranjo feito pela mesma entidade em cujo nome você está agindo, não será possível adicionar outro, mas sim substituir o antigo, com permissão explícita do editor anterior que o incluiu.
 </para>
    <para>
  O(s) autor(es) e editor(es) do Documento, por esta Licença, não dá(ão) permissão para seu(s) nome(s) ser(em) usado(s) para publicidade ou defesa ou apoio implícito para qualquer Versão Modificada.
 </para>
    <bridgehead renderas="sect4">
    5. COMBINANDO DOCUMENTOS
  </bridgehead>
    <para>
  Você pode combinar o documento com outros documentos publicados sob esta Licença, sob os termos definidos na seção 4 acima para versões modificadas, desde que você inclua na combinação todas as Seções Invariantes de todos os documentos originais, sem modificações, e as liste como Seções Invariantes de seu trabalho combinado, na sua nota de licença, e que você preserve todas as Notas de Garantia.
 </para>
    <para>
  O trabalho combinado somente precisa conter uma cópia desta Licença, e várias Seções Invariantes idênticas podem ser substituídas por uma única cópia. Se houver várias Seções Invariantes com o mesmo nome, mas com conteúdos diferentes, torne o título de cada uma dessas seções único, adicionando ao fim dele, entre parênteses, o nome do autor ou editor original da seção, se conhecido, ou então um número exclusivo. Faça o mesmo ajuste nos títulos de seção na lista de Seções Invariantes nas informações de licença do trabalho combinado.
 </para>
    <para>
  Na combinação, você deve combinar quaisquer seções intituladas “Histórico” nos vários documentos originais, formando uma seção intitulada “Histórico”; do mesmo modo, combine quaisquer seções intituladas “Agradecimentos” e quaisquer seções intituladas “Dedicatória”. Você deve eliminar todas as seções intituladas “Apoio”.
 </para>
    <bridgehead renderas="sect4">
    6. COLEÇÕES DE DOCUMENTOS
  </bridgehead>
    <para>
  Você pode fazer uma coleção consistindo do Documento e outros documentos publicados sob esta Licença, e substituir as cópias individuais desta Licença, nos vários documentos, por uma única cópia a ser incluída na coleção, desde que você siga as regras desta Licença para cópias literais de cada documento em todos os outros aspectos.
 </para>
    <para>
  Você pode extrair um único documento dessa coleção e distribuí-lo individualmente sob esta Licença, desde que insira uma cópia desta Licença no documento extraído e siga esta Licença em todos os outros aspectos com relação à cópia literal do documento.
 </para>
    <bridgehead renderas="sect4">
    7. AGREGAÇÃO A TRABALHOS INDEPENDENTES
  </bridgehead>
    <para>
  Uma compilação do Documento, ou seus derivados com outros documentos ou trabalhos separados e independentes, dentro de ou junto a um volume de uma mídia de armazenamento ou distribuição, constituirá um “agregado” se os direitos autorais resultantes da compilação não forem usados para limitar os direitos legais dos usuários dessa compilação além do que os trabalhos individuais permitem. Quando o Documento é incluído em um agregado, a Licença não se aplica a outros trabalhos no agregado que não sejam, por sua vez, derivados do Documento.
 </para>
    <para>
  Se o requisito do Texto de Capa da seção 3 for aplicável a estas cópias do Documento e, ainda, se o Documento for menor do que a metade do agregado inteiro, os Textos de Capa do Documento poderão ser colocados em capas que encerrem o Documento dentro do agregado, ou no equivalente eletrônico das capas, se o Documento estiver em formato eletrônico. Caso contrário, eles deverão aparecer como capas impressas que envolvam o agregado inteiro.
 </para>
    <bridgehead renderas="sect4">
    8. TRADUÇÃO
  </bridgehead>
    <para>
  A tradução é considerada um tipo de modificação, portanto, você pode distribuir traduções do Documento em conformidade com os termos da seção 4. A substituição de Seções Invariantes por traduções requer permissão especial de seus detentores de direitos autorais, mas você pode incluir traduções de algumas ou de todas as Seções Invariantes, além das versões originais dessas Seções Invariantes. Você pode incluir uma tradução desta Licença e todos os avisos de licença no Documento, bem como qualquer Isenção de Responsabilidade quanto a Garantia, desde que também inclua a versão original em Inglês desta Licença e as versões originais dos avisos e das isenções de responsabilidade. Em caso de discordância entre a tradução e a versão original desta Licença ou informações de licença ou isenção de responsabilidade, a versão original prevalecerá.
 </para>
    <para>
  Se uma seção do Documento for intitulada “Agradecimentos”, “Dedicatória” ou “Histórico”, o requisito (seção 4) para Preservar seu Título (seção 1) normalmente exigirá a mudança do título em si.
 </para>
    <bridgehead renderas="sect4">
    9. REVOGAÇÃO
  </bridgehead>
    <para>
  Você não pode copiar, modificar, sublicenciar ou distribuir o Documento, exceto como expressamente previsto por esta Licença. Qualquer outra tentativa de copiar, modificar, sublicenciar ou distribuir o Documento é anulada, e implicará a revogação automática de seus direitos sob esta Licença. Porém, terceiros a quem você forneceu cópias ou direitos sob os termos desta Licença não terão suas licenças revogadas, desde que permaneçam em total concordância com ela.
 </para>
    <bridgehead renderas="sect4">
    10. REVISÕES FUTURAS DESTA LICENÇA
  </bridgehead>
    <para>
  A Free Software Foundation pode publicar ocasionalmente novas versões revisadas da Licença de Documentação Livre GNU. As novas versőes serão semelhantes à versão atual, mas poderão diferir em detalhes para atender a novos problemas ou situaçőes. Consulte <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.gnu.org/copyleft/"/>.
 </para>
    <para>
  A cada versão da Licença é atribuído um número de versão exclusivo. Se o Documento especificar que um número de versão específico desta Licença, “ou de qualquer versão posterior”, aplica-se a ele, você terá a opção de seguir os termos e condições da versão especificada ou de qualquer versão posterior que tenha sido publicada (não como rascunho) pela Free Software Foundation. Se o documento não especificar um número de versão desta Licença, você poderá escolher qualquer versão já publicada (não como rascunho) pela Free Software Foundation.
 </para>
    <bridgehead renderas="sect4">
    ADENDO: Como usar esta Licença em seus documentos
  </bridgehead>
    <screen>Copyright (c) YEAR YOUR NAME.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled “GNU
Free Documentation License”.</screen>
    <para>
  Se você tiver Seções Invariantes, Textos de Capa Frontal e Textos de Contracapa, substitua a linha “with...Texts” por isto:
 </para>
    <screen>with the Invariant Sections being LIST THEIR TITLES, with the
Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</screen>
    <para>
  Se você tiver Seções Invariantes sem Textos de Capa ou alguma outra combinação das três, utilize essas duas alternativas para se adequar à situação.
 </para>
    <para>
  Se seu documento contiver exemplos incomuns de código de programação, recomendamos publicar esses exemplos paralelamente, sob a licença de software livre de sua preferência como, por exemplo, a Licença Pública Geral GNU, para permitir seu uso em software livre.
</para>
  </appendix>
</article>
