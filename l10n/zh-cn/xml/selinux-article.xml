<?xml version="1.0"?>
<article xmlns="http://docbook.org/ns/docbook" version="5.2" xml:id="selinux-article" xml:lang="zh-cn">
  <info>
    <title xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">了解 SELinux 基础知识</title>
    <revhistory xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" xml:id="rh-selinux-article">
      <revision>
        <date>2024-11-10</date>
        <revdescription>
          <para>
              Initial version
            </para>
        </revdescription>
      </revision>
    </revhistory>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="architecture" its:translate="no">
      <phrase>AMD64/Intel&#xA0;64</phrase>
      <phrase>POWER</phrase>
      <phrase>IBM</phrase>
      <phrase>AArch64</phrase>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="productname" its:translate="no">
      <productname version="6.1">SUSE Linux Micro</productname>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="title" its:translate="yes">SELinux 策略、环境和查错</meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="description" its:translate="yes">本文概述了 SELinux 的基本组件。</meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="social-descr" its:translate="yes">SELinux 基本组件概述。</meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="task" its:translate="no">
      <phrase>Security</phrase>
      <phrase>Configuration</phrase>
    </meta>
    <meta xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its" name="series" its:translate="no">Products &amp; Solutions</meta>
    <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
      <dm:bugtracker>
        <dm:url>https://bugzilla.suse.com/enter_bug.cgi</dm:url>
        <dm:component>Documentation</dm:component>
        <dm:product>SUSE Linux Micro 6.1</dm:product>
        <dm:assignee>jsindelarova@suse.com</dm:assignee>
      </dm:bugtracker>
      <dm:translation>no</dm:translation>
    </dm:docmanager>
    <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
      <variablelist>
        <varlistentry>
          <term>内容</term>
          <listitem>
            <para>
              本文提供有关安全增强型 Linux 的基本信息。
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>原因</term>
          <listitem>
            <para>
              您想要了解 SELinux，以及如何在 <phrase><phrase os="slmicro">SUSE Linux Micro</phrase></phrase> 上配置它。
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>工作量</term>
          <listitem>
            <para>
                读完本文大约需要 40 分钟。
              </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </abstract>
  </info>
  <section role="concept" xml:lang="zh-cn" version="5.2" xml:id="selinux-about">
    <info>
      <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
        <para/>
      </abstract>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">关于 SELinux</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
    </info>
    <para>
    SELinux 是作为附加的 Linux 安全解决方案开发的，它运用了 Linux 内核中的安全框架。其目的是实现更精细的安全策略，可以超越标准的自由访问控制 (DAC)，即传统的所有者/组/全局和读取/写入/执行文件权限控制。
  </para>
    <para>
    SELinux 使用附加到对象（例如文件和网络套接字）的标签来做出访问控制决策。
  </para>
    <para>
    SELinux 的默认操作是拒绝任何访问。SELinux 仅允许 SELinux 策略中明确允许的操作。另一项提高安全性的 SELinux 功能是，SELinux 允许严格限制进程，以至于进程无法访问同一系统上其他进程的文件。
  </para>
    <para>
    SELinux 旨在增强而不是取代现有安全解决方案。例如，即使系统使用 SELinux，也仍会应用自由访问控制 (DAC)。如果 DAC 首先拒绝访问，则不会使用 SELinux，因为访问已由另一机制阻止。
  </para>
  </section>
  <section role="task" xml:lang="zh-cn" version="5.2" xml:id="getting-selinux">
    <info>
      <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
        <para/>
      </abstract>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">获取 SELinux</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
    </info>
    <para>
    通过 YaST 安装 <phrase><phrase os="slmicro">SUSE Linux Micro</phrase></phrase> 时默认会安装 SELinux，有时会将其安装为预构建映像的一部分。
  </para>
    <para>
    如果您的系统上未安装 SELinux，请运行以下命令：
  </para>
    <screen><prompt role="root"># </prompt>transactional-update setup-selinux</screen>
    <para>
    该命令完成后，重引导您的系统。该命令将安装 SELinux 策略（如果尚未安装），设置 <literal>enforcing</literal> SELinux 模式并重构建 <literal>initrd</literal>。
  </para>
  </section>
  <section role="concept" xml:lang="zh-cn" version="5.2" xml:id="selinux-modes">
    <info>
      <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
        <para/>
      </abstract>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">SELinux 模式</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
    </info>
    <para>
    SELinux 可在以下三种模式之一下运行：<literal>disabled</literal>、<literal>permissive</literal> 或 <literal>enforcing</literal>。
  </para>
    <para>
    使用 <literal>disabled</literal> 模式意味着不应用 SELinux 策略中的规则，因而您的系统不受保护。因此我们不建议使用 <literal>disabled</literal> 模式。
  </para>
    <para>
    在 <literal>permissive</literal> 模式下，SELinux 处于活动状态，将加载安全策略、标记文件系统，并记录拒绝访问错误项。但是，不会实施策略，因此实际上并未拒绝访问。
  </para>
    <para>
    在 <literal>enforced</literal> 模式下，将应用安全策略。将拒绝未受策略明确允许的每种访问。
    
  </para>
    <para>
    有关在 SELinux 模式之间切换的信息，请参见<xref linkend="selinux-switching-modes" role="internalbook"/>。
  </para>
    <section role="task" xml:lang="zh-cn" version="5.2" xml:id="selinux-switching-modes">
      <info>
        <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
          <para/>
        </abstract>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">更改 SELinux 模式</title>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
      </info>
      <para>
    可以暂时或永久切换 SELinux 模式。
  </para>
      <section xml:id="sellinux-temporary-mode-changes">
        <title>暂时更改 SELinux 模式</title>
        <para>
      要暂时将 SELinux 设置为 <literal>permissive</literal> 或 <literal>enforcing</literal> 模式，请使用 <command>setenforce</command> 命令。
    </para>
        <para>
      <command>setenforce</command> 命令的语法如下：
    </para>
        <screen><prompt role="root"># </prompt>setenforce <replaceable>MODE_ID</replaceable></screen>
        <para>
      其中，<replaceable>MODE_ID</replaceable> 为 <replaceable>0</replaceable>（对于 <literal>permissive</literal> 模式）或 <replaceable>1</replaceable>（对于 <literal>enforced</literal> 模式）。
    </para>
        <para>
      请记住，无法使用 <command>setenforce</command> 命令禁用 SELinux。
    </para>
      </section>
      <section xml:id="selinux-permanent-mode-changes">
        <title>永久更改 SELinux 模式</title>
        <para>
      要对 SELinux 模式执行更改，使其在重引导系统后仍会保留，请编辑 <filename>/etc/selinux/config</filename> 配置文件。在此文件中，还可以禁用系统上的 SELinux。但不建议执行此操作。如果 SELinux 可能会给您的系统造成问题，请切换到 <literal>permissive</literal> 模式并调试系统。
    </para>
        <para>
      在文件 <filename>/etc/selinux/config</filename> 中，将 <literal>SELINUX</literal> 的值更改为 <literal>disabled</literal>、<literal>permissive</literal> 或 <literal>enforced</literal>，如下所示：
    </para>
        <screen>SELINUX=disabled</screen>
        <para>
      在该文件中所做的更改将在下次重引导后应用。
    </para>
        <note>
          <title>从 <literal>disabled</literal> 模式切换后重新标记系统</title>
          <para>
        如果您在系统上禁用 SELinux，然后又重新启用，请务必重新标记您的系统。如果您禁用 SELinux 并对文件系统执行更改，更改将不再反映在环境中（例如，新文件没有任何环境）。因此，需要使用 <command>restorecon</command> 命令、使用 <literal>autorelabel</literal> 引导参数或通过创建一个在下次引导时触发重新标记的文件，来重新标记您的系统。要创建该文件，请运行以下命令：
      </para>
          <screen><prompt role="root"># </prompt>touch /etc/selinux/.autorelabel</screen>
          <para>
        重引导后，文件 <filename>/etc/selinux/.autorelabel</filename> 将由另一个标志文件 <filename>/etc/selinux/.relabelled</filename> 替换，以防止在后续重引导时进行重新标记。
      </para>
        </note>
      </section>
      <section xml:id="selinux-verify-mode">
        <title>校验活动的 SELinux 模式</title>
        <para>
      要校验模式，请运行以下命令：
    </para>
        <screen><prompt role="root"># </prompt>getenforce</screen>
        <para>
      该命令应返回 <literal>permissive</literal> 或 <literal>enforced</literal>，具体取决于提供的 <replaceable>MODE_ID</replaceable>。
    </para>
      </section>
    </section>
    <section role="task" xml:lang="zh-cn" version="5.2" xml:id="task-verification">
      <info>
        <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
          <para/>
        </abstract>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">校验 SELinux 是否正常运行</title>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
      </info>
      <para>
    如果您正在执行配置更改，切换到宽松模式可能很有用。在此期间，用户可能会错误地标记文件，从而在切换回强制模式时导致出现问题。
  </para>
      <para>
    要将系统恢复为受保护状态，请执行以下步骤：
  </para>
      <procedure>
        <step>
          <para>
        重置安全环境：
      </para>
          <screen>
            <prompt>&gt; </prompt>
            <command>sudo</command>
            <command>restorecon -R /</command>
          </screen>
        </step>
        <step>
          <para>
        通过在 <filename>/etc/selinux/config</filename> 中设置 <option>SELINUX=enforcing</option> 切换到强制模式。
      </para>
        </step>
        <step>
          <para>
        重引导系统并再次登录。
      </para>
        </step>
        <step>
          <para>
        运行 <command>sestatus -v</command> 命令：该命令应返回如下所示的输出：
      </para>
          <screen><prompt>&gt; </prompt><command>sudo</command><command>sestatus -v</command>
SELinux status:                 enabled
SELinuxfs mount:                /sys/fs/selinux
SELinux root directory:         /etc/selinux
Loaded policy name:             targeted
Current mode:                   enforcing
Mode from config file:          enforcing
Policy MLS status:              enabled
Policy deny_unknown status:     allowed
Memory protection checking:     requested(insecure)
Max kernel policy version:      33

Process contexts:
Current context:                unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
Init context:                   system_u:system_r:init_t:s0
/usr/sbin/sshd                  system_u:system_r:sshd_t:s0-s0:c0.c1023

File contexts:
Controlling terminal:           unconfined_u:object_r:user_tty_device_t:s0
/etc/passwd                     system_u:object_r:passwd_file_t:s0
/etc/shadow                     system_u:object_r:shadow_t:s0
/bin/bash                       system_u:object_r:shell_exec_t:s0 \
                                -&gt; system_u:object_r:shell_exec_t:s0
/bin/login                      system_u:object_r:login_exec_t:s0
/bin/sh                         system_u:object_r:bin_t:s0 \
                                -&gt; system_u:object_r:shell_exec_t:s0
/sbin/agetty                    system_u:object_r:bin_t:s0 \
                                -&gt; system_u:object_r:getty_exec_t:s0
/sbin/init                      system_u:object_r:bin_t:s0 -&gt; \
                                system_u:object_r:init_exec_t:s0
/usr/sbin/sshd                  system_u:object_r:sshd_exec_t:s0</screen>
        </step>
        <step>
          <para>
        如果系统工作不正常，请检查 <filename>/var/log/audit/audit.log</filename> 中的日志文件。有关详细信息，请参考 <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://documentation.suse.com/sle-micro/6.0/html/Micro-setroubleshoot/setroubleshoot.html">SELinux troubleshooting</link>。
      </para>
        </step>
      </procedure>
    </section>
  </section>
  <section role="concept" xml:lang="zh-cn" version="5.2" xml:id="selinux-context">
    <info>
      <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
        <para/>
      </abstract>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">SELinux 安全环境</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
    </info>
    <para>
    安全环境是指派给文件或进程的一系列信息。它由 SELinux 用户、角色、类型、级别和类别组成。此信息用于做出访问控制决策。
  </para>
    <variablelist>
      <title>SELinux 环境字段</title>
      <varlistentry>
        <term>SELinux 用户</term>
        <listitem>
          <para>
          策略中定义的身份，已根据特定的一组角色和特定的<emphasis>级别</emphasis>范围为其授权。每个 Linux 用户只会映射到一个 SELinux 用户。但是，一个 SELinux 用户可以拥有多个角色。
        </para>
          <para>
          SELinux 不使用 Linux 在 <filename>/etc/passwd</filename> 中维护的用户帐户列表，而是使用自身的数据库和映射。按照惯例，身份名称以 <literal>_u</literal> 为后缀，例如：<literal>user_u</literal>。
        </para>
          <para>
          如果创建了新的 Linux 帐户但未为该帐户指派 SELinux 用户，则会使用默认的 SELinux 用户。默认值通常为 <literal>unconfined_u</literal>。有关更改默认值的过程，请参见<xref linkend="semanage-login-command" role="internalbook"/>。
        </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>角色</term>
        <listitem>
          <para>
          定义可为用户授予的一组权限。角色定义了指派到此角色的用户可以访问哪些<emphasis>类型</emphasis>。按照惯例，角色名称以 <literal>_r</literal> 为后缀，例如：<literal>system_r</literal>。
        </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>类型</term>
        <listitem>
          <para>
          类型传达了有关特定文件和进程如何交互的信息。进程由具有具体 SELinux 类型的文件组成，它无法访问此类型之外的文件。按照惯例，类型名称以 <literal>_t</literal> 为后缀，例如：<literal>var_t</literal>。
        </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>级别</term>
        <listitem>
          <para>
          一个可选属性，用于指定多级别安全性中的许可级别范围。
        </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>类别</term>
        <listitem>
          <para>
          一个可选属性，用于为进程、文件和用户添加类别。然后用户可以访问具有相同类别的文件。
        </para>
        </listitem>
      </varlistentry>
    </variablelist>
    <para>
    下面是 SELinux 环境的示例：
  </para>
    <screen>allow user_t bin_t:file {read execute gettattr};</screen>
    <para>
    此示例规则规定，允许环境类型为 <systemitem class="username">user_t</systemitem> 的用户（此用户称为源对象）使用权限 <literal>read</literal>、<literal>execute</literal> 和 <literal>getattr</literal>，来访问环境类型为 <filename>bin_t</filename> 的类<emphasis>文件</emphasis>（目标）的对象。
  </para>
  </section>
  <section role="concept" xml:lang="zh-cn" version="5.2" xml:id="selinux-policy">
    <info>
      <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
        <para/>
      </abstract>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">SELinux 策略概览</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
    </info>
    <para>
    策略是 SELinux 中的关键组件。SELinux 策略定义了规则，这些规则指定哪些对象可以访问系统上的哪些文件、目录、端口和进程。为此，需为所有这些对象定义一个安全环境。
  </para>
    <para>
    SELinux 策略包含巨量的规则。为使其更易于管理，通常会将策略分割成多个模块。这样，管理员便可为不同的系统组件打开或关闭保护。
  </para>
    <para>
    为系统编译策略时，您可以选择使用模块化策略或单体式策略，如果选择后者，将使用一个巨型策略来保护系统上的一切组件。我们强烈建议使用模块化策略而不是单体式策略。模块化策略要容易管理得多。
  </para>
    <para><phrase><phrase os="slmicro">SUSE Linux Micro</phrase></phrase> 随附了 <literal>targeted</literal> SELinux 策略。
  </para>
    <section role="task" xml:lang="zh-cn" version="5.2" xml:id="selinux-switching-modules">
      <info>
        <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
          <para/>
        </abstract>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">使用 SELinux 模块</title>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
      </info>
      <para>
    作为管理员，您可以开启或关闭模块。如果您只想禁用 SELinux 策略的某个部分，并且不希望在关闭 SELinux 保护的情况下运行特定的服务，则此功能可能很有用。
  </para>
      <para>
    要查看正在使用的所有 SELinux 策略模块，请运行以下命令：
  </para>
      <screen>
        <command>semodule -l</command>
      </screen>
      <para>
    获取要关闭的模块名称后，运行以下命令：
  </para>
      <screen>
        <prompt>&gt; </prompt>
        <command>sudo</command>
        <command>semodule -d <replaceable>MODULENAME</replaceable></command>
      </screen>
      <para>
    要打开策略模块，请运行以下命令：
  </para>
      <screen>
        <prompt>&gt; </prompt>
        <command>sudo</command>
        <command>semodule -e <replaceable>MODULENAME</replaceable></command>
      </screen>
    </section>
    <section role="task" xml:lang="zh-cn" version="5.2" xml:id="creating-policy-containers">
      <info>
        <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
          <para/>
        </abstract>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">为容器创建策略</title>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
      </info>
      <para><phrase><phrase os="slmicro">SUSE Linux Micro</phrase></phrase> 附带的某个策略在默认情况下不允许容器访问容器数据之外的文件。另一方面，它允许进行各种网络访问。通常，容器是使用绑定挂载点创建的，应该能够访问 <filename>/home</filename> 或 <filename>/var</filename> 等其他目录。您可能希望能够允许访问这些目录，或者相反，您希望即使系统上使用了 SELinux，也仅限容器访问某些端口。在这种情况下，需要创建新的策略规则来启用或禁用访问。<phrase><phrase os="slmicro">SUSE Linux Micro</phrase></phrase> 为此提供了 Udica 工具。
  </para>
      <para>
    以下过程说明如何为容器创建自定义策略：
  </para>
      <procedure>
        <step>
          <para>
        确保 SELinux 处于强制模式。有关细节，请参见<xref linkend="selinux-switching-modes" role="internalbook"/>。
      </para>
        </step>
        <step>
          <para>
        使用以下参数启动容器：
      </para>
          <screen><prompt role="root"># </prompt>podman run -v /home:/home:rw -v /var/:/var/:rw -p 21:21 -it sle15 bash</screen>
          <para>
        容器使用默认策略运行，该策略不允许访问挂载点，但不限制其他端口。
      </para>
        </step>
        <step>
          <para>
        您可以退出容器。
      </para>
        </step>
        <step>
          <para>
        获取容器 ID：
      </para>
          <screen><prompt role="root"># </prompt>podman ps -a

CONTAINER ID  IMAGE                                                                              COMMAND     CREATED        STATUS            PORTS               NAMES
e59f9d0f86f2  registry.opensuse.org/devel/bci/tumbleweed/containerfile/opensuse/bci/ruby:latest  /bin/bash   8 minutes ago  Up 8 seconds ago  0.0.0.0:21-&gt;21/tcp  zen_ramanujan
        </screen>
        </step>
        <step>
          <para>
        创建一个 JSON 文件，供 Udica 用来为容器创建自定义策略：
      </para>
          <screen><prompt role="root"># </prompt>podman inspect e59f9d0f86f2 &gt; <replaceable>OUTPUT_JSON_FILE</replaceable></screen>
          <para>
        例如，将 <replaceable>OUTPUT_JSON_FILE</replaceable> 替换为 <filename>container.json</filename>。
      </para>
        </step>
        <step>
          <para>
        运行 Udica 以根据容器参数生成策略：
      </para>
          <screen><prompt role="root"># </prompt>udica -j <replaceable>OUTPUT_JSON_FILE</replaceable><replaceable>CUSTOM_CONTAINER_POLICY</replaceable></screen>
          <para>
        例如：
      </para>
          <screen><prompt role="root"># </prompt>udica -j container.json custom_policy</screen>
        </step>
        <step>
          <para>
        根据提供的说明，运行以下命令来加载策略模块：
      </para>
          <screen><prompt role="root"># </prompt>semodule -i custom_policy.cil /usr/share/udica/templates/{base_container.cil,net_container.cil,home_container.cil}</screen>
        </step>
        <step>
          <para>
        使用 <option>--security-opt</option> 选项通过新策略模块运行容器，如下所示：
      </para>
          <screen><prompt role="root"># </prompt>podman run --security-opt label=type:custom_policy.process -v /home:/home:rw -v /var/:/var/:rw -p 21:21 -it sle15 bash</screen>
        </step>
      </procedure>
    </section>
  </section>
  <section role="concept" xml:lang="zh-cn" version="5.2" xml:id="selinux-booleans">
    <info>
      <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
        <para/>
      </abstract>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">SELinux 布尔值</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
    </info>
    <para>
    SELinux 布尔值支持灵活的策略管理方法。例如，使用布尔值可以在一台服务器上禁用特定策略，却在另一台服务器上使该策略保持有效状态。换句话说，可将布尔值理解为策略规则的开关。您无需更改特定的策略，而是可以选择将其关闭。在策略代码中，布尔值称为<emphasis>可调参数</emphasis>。由于布尔值包含在策略中，因此在加载策略后即可供使用。
  </para>
    <para>
    对布尔值所做的更改可以是永久性的，也可以是暂时性的（保留到会话结束为止）。
  </para>
    <para>
    使用 SELinux 提供的工具可以列出和查看细节，或更改布尔值的状态。有关细节，请参见以下几节。
  </para>
    <section role="task" xml:lang="zh-cn" version="5.2" xml:id="selinux-working-with-booleans">
      <info>
        <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
          <para/>
        </abstract>
        <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">使用布尔值</title>
        <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
      </info>
      <section xml:id="listing-booleans">
        <title>列出布尔值</title>
        <para>
      可以使用 <command>getsebool</command> 或 <command>semanage</command> 命令列出当前定义的布尔值。要列出当前定义的所有布尔值及其状态，请运行以下命令：
    </para>
        <screen><prompt role="root"># </prompt>getsebool -a

abrt_anon_write --&gt; off
abrt_handle_event --&gt; off
abrt_upload_watch_anon_write --&gt; on
...
  </screen>
        <para>
      要获取有关特定布尔值的更多细节，可如下所示使用 <command>semanage</command> 命令：
    </para>
        <screen><prompt role="root"># </prompt>semanage boolean -l

SELinux boolean               State   Default     Description

abrt_anon_write               (off  ,  off)       Allow abrt to anon write
abrt_handle_event             (off  ,  off)       Allow abrt to handle event
abrt_upload_watch_anon_write  (on   ,   on)       Allow abrt to upload watch anon write
  </screen>
        <para>
      要获取单个布尔值的状态，可使用以下命令：
    </para>
        <screen><prompt role="root"># </prompt>getsebool <replaceable>BOOLEAN_NAME</replaceable></screen>
        <para>
      或者，可以对 <command>semanage boolean</command> 输出使用 <command>grep</command> 命令：
    </para>
        <screen><prompt role="root"># </prompt>semanage boolean -l | grep <replaceable>BOOLEAN_NAME</replaceable></screen>
      </section>
      <section xml:id="switching-booleans">
        <title>切换布尔值</title>
        <para>
      <command>setsebool</command> 和 <command>semanage</command> 命令可用于切换布尔值。可以永久或暂时（保留到会话结束为止）更改布尔值的状态。要暂时更改布尔值，请运行以下命令：
    </para>
        <screen><prompt role="root"># </prompt>setsebool <replaceable>BOOLEAN_NAME</replaceable><replaceable>BOOLEAN_VALUE</replaceable></screen>
        <para>
      其中 <replaceable>BOOLEAN_VALUE</replaceable> 为 <literal>on</literal> 或 <literal>off</literal>。
    </para>
        <para>
      要永久更改布尔值，请运行以下两个命令之一：
    </para>
        <screen><prompt role="root"># </prompt>setsebool -P <replaceable>BOOLEAN_NAME</replaceable><replaceable>BOOLEAN_VALUE</replaceable></screen>
        <para>
      或者，使用 <command>semanage</command> 命令：
    </para>
        <screen><prompt role="root"># </prompt>semanage boolean -m --<replaceable>BOOLEAN_VALUE</replaceable><replaceable>BOOLEAN_NAME</replaceable></screen>
        <para>
      其中 <replaceable>BOOLEAN_VALUE</replaceable> 为 <literal>on</literal> 或 <literal>off</literal>。
    </para>
        <para>
      一个布尔值可以启用或禁用多个策略规则。要查看特定布尔值启用或禁用了哪些策略规则，请使用 <command>sedispol</command> 工具，它可以分析策略文件：
    </para>
        <screen><prompt role="root"># </prompt>sedispol /etc/selinux/targeted/policy/policy.32</screen>
        <para>
      由于策略规则通常很大，我们建议通过选择 <option>f</option> 并指定文件名来设置输出文件。指定文件名后，按 <option>6</option>。然后您可以检查该文件。
    </para>
      </section>
    </section>
  </section>
  <section role="reference" xml:lang="zh-cn" version="5.2" xml:id="selinux-tools">
    <info>
      <abstract xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" xmlns:its="http://www.w3.org/2005/11/its">
        <para/>
      </abstract>
      <title xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion">用于管理 SELinux 的工具</title>
      <meta xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:trans="http://docbook.org/ns/transclusion" name="maintainer" content="jsindelarova@suse.com" its:translate="no"/>
    </info>
    <para><phrase><phrase os="slmicro">SUSE Linux Micro</phrase></phrase> 提供了用于管理系统上的 SELinux 的工具。如果您的系统上未安装下述工具，请运行以下命令安装这些工具：
  </para>
    <screen><prompt role="root"># </prompt>transactional-update pkg install policycoreutils-python-utils</screen>
    <para>
    安装成功后，重引导系统。
  </para>
    <section xml:id="selinux-z-option">
      <title>使用 <option>Z</option> 选项</title>
      <para>
      安装并配置 SELinux 后，可将 <option>-Z</option> 用于 <command>ls</command>、<command>id</command> 或 <command>ps</command> 等普通命令。使用此选项可以显示文件或进程的安全环境。例如，使用 <command>ls</command> 命令：
    </para>
      <screen><prompt>&gt; </prompt>ls -Z /etc/shadow

        system_u:object_r:shadow_t:s0 /etc/shadow
      </screen>
    </section>
    <section xml:id="sec-chcon-command">
      <title><command>chcon</command> 命令</title>
      <para>
      命令名称 <command>chcon</command> 代表更改环境。该命令可将文件的整个安全环境更改为 CLI 中提供的值，或者可以更改环境的某些部分。或者，您可以提供某个文件作为参考。
    </para>
      <para>
      要更改文件的整个安全环境，命令语法如下：
    </para>
      <screen><prompt role="root"># </prompt>chcon <replaceable>SECURITY_CONTEXT</replaceable><replaceable>FILENAME</replaceable></screen>
      <para>
      其中：
    </para>
      <itemizedlist>
        <listitem>
          <para><replaceable>SECURITY_CONTEXT</replaceable> 的格式为：<replaceable>SELinux_USER</replaceable>:<replaceable>ROLE</replaceable>:<replaceable>TYPE</replaceable>:<replaceable>LEVEL</replaceable>:<replaceable>CATEGORY</replaceable>。例如，环境可能是：<emphasis>system_u:object_r:httpd_config_t:s0</emphasis>。
        </para>
        </listitem>
        <listitem>
          <para><replaceable>FILENAME</replaceable> 是要更改其环境的文件的路径。
        </para>
        </listitem>
      </itemizedlist>
      <para>
      要根据作为参考提供的文件设置安全环境，请如下所示运行 <command>chcon</command>：
    </para>
      <screen><prompt role="root"># </prompt>chcon --reference=<replaceable>REFERENCE_FILE</replaceable><replaceable>FILENAME</replaceable></screen>
      <para>
      其中：
    </para>
      <itemizedlist>
        <listitem>
          <para><replaceable>REFERENCE_FILE</replaceable> 是要用作参考的文件的路径。
        </para>
        </listitem>
        <listitem>
          <para><replaceable>FILENAME</replaceable> 是要更改其环境的文件的路径。
        </para>
        </listitem>
      </itemizedlist>
      <para>
      或者，可以仅更改安全环境的某个部分。<command>chcon</command> 命令的一般语法如下：
    </para>
      <screen><prompt role="root"># </prompt>chcon <replaceable>CONTEXT_OPTION</replaceable><replaceable>CONTEXT_PART</replaceable><replaceable>FILENAME</replaceable></screen>
      <para>
      选项和参数的含义如下：
    </para>
      <itemizedlist>
        <listitem>
          <para>
          根据环境部分，<replaceable>CONTEXT_OPTION</replaceable> 可为下列其中一项：
        </para>
          <variablelist>
            <varlistentry>
              <term><option>-u</option>，表示 <option>--user</option></term>
              <listitem>
                <para>
                表示根据提供的文件更改 SELinux 用户环境：
              </para>
                <screen><prompt role="root"># </prompt>chcon -u system_u logind.conf</screen>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-r</option>，表示 <option>--role</option></term>
              <listitem>
                <para>
                仅更改所提供文件的环境中的角色部分：
              </para>
                <screen><prompt role="root"># </prompt>chcon -r object_r logind.conf</screen>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-t</option>，表示 <option>--type</option></term>
              <listitem>
                <para>
                仅更改所提供文件的环境中的类型部分：
              </para>
                <screen><prompt role="root"># </prompt>chcon -t etc_t logind.conf</screen>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-l</option>，表示 <option>--range</option></term>
              <listitem>
                <para>
                仅更改安全环境的范围部分：
              </para>
                <screen><prompt role="root"># </prompt>chcon -l s0 logind.conf</screen>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
        <listitem>
          <para><replaceable>CONTEXT_PART</replaceable> 是要设置的安全环境的特定值。
        </para>
        </listitem>
        <listitem>
          <para><replaceable>FILENAME</replaceable> 是要更改其环境的文件的路径。
        </para>
        </listitem>
      </itemizedlist>
      <note>
        <title>对符号链接使用 <command>chcon</command></title>
        <para>
        默认情况下，当您更改符号链接的安全环境时，链接目标的环境将会更改，而符号链接环境则<emphasis role="bold">不会</emphasis>更改。要强制 <command>chcon</command> 更改符号链接而不是链接目标的环境，请如下所示使用 <option>--no-dereference</option> 选项：
      </para>
        <screen><prompt role="root"># </prompt>chcon --no-dereference -u system_u -t etc_t network.conf</screen>
      </note>
      <para>
      可以使用 recursive 选项更改目录中所有文件的环境：
    </para>
      <screen><prompt role="root"># </prompt>chcon --recursive  system_u:object_r:httpd_config_t:s0 conf.d</screen>
    </section>
    <section xml:id="sec-getenforce-setenforce">
      <title><command>getenforce</command> 和 <command>setenforce</command> 命令</title>
      <para>
      <command>getenforce</command> 命令返回当前的 SELinux 模式：<literal>Enforcing</literal>、<literal>Permissive</literal> 或 <literal>Disabled</literal>。
    </para>
      <screen><prompt role="root"># </prompt>getenforce

Permissive
    </screen>
      <para>
      <command>setenforce</command> 命令暂时将 SELinux 模式更改为强制或宽松。无法使用此命令禁用 SELinux。请记住，更改只能保留到下次重引导为止。要永久更改状态，请按照<xref linkend="selinux-switching-modes" role="internalbook"/>中的说明操作。
    </para>
      <screen><prompt role="root"># </prompt>setenforce <replaceable>MODE_ID</replaceable></screen>
      <para>
      其中，<replaceable>MODE_ID</replaceable> 为 <replaceable>0</replaceable>（对于 <literal>permissive</literal> 模式）或 <replaceable>1</replaceable>（对于 <literal>enforced</literal> 模式）。
    </para>
    </section>
    <section xml:id="sec-fixfiles-command">
      <title><command>fixfiles</command> 脚本</title>
      <para>
      使用该脚本可对安全环境执行以下任务：
    </para>
      <itemizedlist>
        <listitem>
          <para>
          检查环境是否正确
        </para>
        </listitem>
        <listitem>
          <para>
          更改任何错误的文件环境标签
        </para>
        </listitem>
        <listitem>
          <para>
          在添加新策略后重新标记您的系统
        </para>
        </listitem>
      </itemizedlist>
      <para>
      该脚本的语法如下：
    </para>
      <screen><prompt role="root"># </prompt>fixfiles [<replaceable>OPTIONS</replaceable>] <replaceable>ARGUMENT</replaceable></screen>
      <para>
      其中：
    </para>
      <itemizedlist>
        <listitem>
          <para><replaceable>OPTIONS</replaceable> 可为下列其中一项：
        </para>
          <variablelist>
            <varlistentry>
              <term>
                <option>-l</option>
                <replaceable>LOGFILE</replaceable>
              </term>
              <listitem>
                <para>
                将输出保存到提供的文件
              </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>
                <option>-o</option>
                <replaceable>OUTPUT_FILE</replaceable>
              </term>
              <listitem>
                <para>
                将文件环境与默认环境不同的所有文件的名称保存到提供的输出文件
              </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>
                <option>-F</option>
              </term>
              <listitem>
                <para>
                强制重置环境
              </para>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
        <listitem>
          <para><replaceable>ARGUMENT</replaceable> 可为下列其中一项：
        </para>
          <variablelist>
            <varlistentry>
              <term>
                <command>check</command>
              </term>
              <listitem>
                <para>
                显示错误标签的先前和当前文件环境，但不执行任何更改
              </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>
                <command>relabel</command>
              </term>
              <listitem>
                <para>
                根据当前加载的策略重新标记错误的文件环境
              </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>
                <command>restore</command>
              </term>
              <listitem>
                <para>
                将错误的文件环境恢复为默认值
              </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>
                <command>verify</command>
              </term>
              <listitem>
                <para>
                列出具有错误文件环境标签的所有文件，但不执行任何更改
              </para>
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sec-semanage-command">
      <title><command>semanage</command> 命令</title>
      <para>
      <command>semanage</command> 命令可用于配置策略的各个部分，而无需从源开始重新编译策略。使用该命令可执行以下任务：
    </para>
      <itemizedlist>
        <listitem>
          <para>
          使用 <option>boolean</option> 参数管理布尔值。有关布尔值的细节，请参见<xref linkend="selinux-working-with-booleans" role="internalbook"/>。
        </para>
        </listitem>
        <listitem>
          <para>
          使用 <option>fcontext</option> 参数调整文件的环境
        </para>
        </listitem>
        <listitem>
          <para>
          使用 <option>login</option> 参数管理用户映射
        </para>
        </listitem>
        <listitem>
          <para>
          使用 <option>user</option> 参数管理 SELinux 用户
        </para>
        </listitem>
        <listitem>
          <para>
          使用 <option>module</option> 参数管理 SELinux 策略模块
        </para>
        </listitem>
      </itemizedlist>
      <para>
      一般命令语法如下：
    </para>
      <screen><prompt role="root"># </prompt>semanage <replaceable>ARGUMENT</replaceable><replaceable>OPTIONS</replaceable> [<replaceable>OBJECT_NAME</replaceable>]</screen>
      <para>
      其中：
    </para>
      <itemizedlist>
        <listitem>
          <para><replaceable>ARGUMENT</replaceable> 为下列其中一项：<command>login</command>、<command>user</command>、<command>fcontext</command>、<command>boolean</command>、<command>module</command>。
        </para>
        </listitem>
        <listitem>
          <para><replaceable>OPTIONS</replaceable> 取决于提供的 <replaceable>ARGUMENT</replaceable>。<xref linkend="list-common-options" role="internalbook"/>中介绍了通用选项。
        </para>
        </listitem>
        <listitem>
          <para>根据提供的 <replaceable>ARGUMENT</replaceable>，<replaceable>OBJECT_NAME</replaceable> 可为登录名、模块名、文件名或 SELinux 用户。
        </para>
        </listitem>
      </itemizedlist>
      <variablelist xml:id="list-common-options">
        <title>通用选项</title>
        <varlistentry>
          <term><option>-a</option>、<option>--add</option></term>
          <listitem>
            <para>
            添加提供的对象
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term><option>-h</option>、<option>--help</option></term>
          <listitem>
            <para>
            列显命令帮助
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>--extract</term>
          <listitem>
            <para>
            显示用于更改系统（布尔值、文件环境等）的命令
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term><option>-l</option>、<option>--list</option></term>
          <listitem>
            <para>
            列出所有对象
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term><option>-m</option>、<option>--modify</option></term>
          <listitem>
            <para>
            修改提供的对象
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term><option>-n</option>、<option>--noheading</option></term>
          <listitem>
            <para>
            通过省略标题来修改列出操作的输出
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term><option>-s</option>、<option>--seuser</option></term>
          <listitem>
            <para>
            指定 SELinux 用户
          </para>
          </listitem>
        </varlistentry>
      </variablelist>
      <para>
      其他选项与特定的 <command>semanage</command> 命令相关，已在相应章节中予以介绍。
    </para>
      <section xml:id="sec-semanage-fcontext">
        <title><command>semanage fcontext</command> 命令</title>
        <para>
        使用 <command>semanage fcontext</command> 命令可执行以下任务：
      </para>
        <itemizedlist>
          <listitem>
            <para>
            查询文件环境定义
          </para>
          </listitem>
          <listitem>
            <para>
            添加文件的环境
          </para>
          </listitem>
          <listitem>
            <para>
            添加您自己的规则
          </para>
          </listitem>
        </itemizedlist>
        <para>
        使用 <command>semanage
        fcontext</command> 命令对文件环境执行更改后不需要修改或重新编译策略。
      </para>
        <para>
        除了<xref linkend="list-common-options" role="internalbook"/>中所述的通用选项外，<command>semanage
        fcontext</command> 命令还接受以下选项：
      </para>
        <variablelist>
          <varlistentry>
            <term><option>-e</option>、<option>--equal</option></term>
            <listitem>
              <para>
              该选项可让您使用提供的路径环境来标记其他目录（提供的目标路径）中的文件。例如，您希望将 <filename>/home</filename> 具有的同一环境指派给另一个主目录 <filename>/export/home</filename>。如果使用此选项，则需要提供源路径和目标路径：
            </para>
              <screen><prompt role="root"># </prompt>semanage fcontext -a -e /home /export/home</screen>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term><option>-f</option>、<option>--ftype</option></term>
            <listitem>
              <para>
              指定文件类型。使用以下值之一：
            </para>
              <itemizedlist>
                <listitem>
                  <para><option>a</option> - 所有文件，这也是默认值
                </para>
                </listitem>
                <listitem>
                  <para><option>b</option> - 块设备
                </para>
                </listitem>
                <listitem>
                  <para><option>c</option> - 字符设备
                </para>
                </listitem>
                <listitem>
                  <para><option>d</option> - 目录
                </para>
                </listitem>
                <listitem>
                  <para><option>f</option> - 常规文件
                </para>
                </listitem>
                <listitem>
                  <para><option>l</option> - 符号链接
                </para>
                </listitem>
                <listitem>
                  <para><option>p</option> - 命名管道
                </para>
                </listitem>
                <listitem>
                  <para><option>s</option> - 套接字
                </para>
                </listitem>
              </itemizedlist>
            </listitem>
          </varlistentry>
        </variablelist>
      </section>
      <section xml:id="semanage-login-command">
        <title><command>semanage login</command> 命令</title>
        <para>
        使用 <command>semanage login</command> 可执行以下任务：
      </para>
        <itemizedlist>
          <listitem>
            <para>
            将 Linux 用户映射到特定的 SELinux 用户。例如，要将 Linux 用户 <emphasis>tux</emphasis> 映射到 <literal>sysadm_u</literal>，请运行以下命令：
          </para>
            <screen>
              <prompt role="root"># </prompt>
              <command>semanage login -a -s sysadm_u tux</command>
            </screen>
          </listitem>
          <listitem>
            <para>
            将一组 Linux 用户映射到特定的 SELinux 用户。例如，要将 <emphasis>writers</emphasis> 组的用户映射到 <literal>user_u</literal>，请运行以下命令属性：
          </para>
            <screen>
              <prompt role="root"># </prompt>
              <command>semanage login -a -s user_u %writers</command>
            </screen>
            <para>
            然后，该组将列在 <command>semanage login
            -l</command> 的输出中（以 % 字符为前缀）。
          </para>
            <para>
            请注意，用户组应该是主组，因为将 SELinux 用户映射到补充组可能会产生不兼容的映射。
          </para>
            <screen>
              <prompt role="root"># </prompt>
              <command>semanage login -m -s staff_u %writers</command>
            </screen>
          </listitem>
          <listitem>
            <para>
            在特定 SELinux MLS/MCS 安全范围内映射 Linux 用户。
          </para>
          </listitem>
          <listitem>
            <para>
            修改已创建的映射。为此，只需将前面命令中的 <option>-a</option> 选项替换为 <option>-m</option> 即可。
          </para>
          </listitem>
          <listitem>
            <para>
            为新的 Linux 用户设置默认的 SELinux 用户。默认的 SELinux 用户通常是 <literal>unconfined_u</literal>。要将值更改为 <literal>staff_u</literal>，请运行以下命令：
          </para>
            <screen>
              <prompt role="root"># </prompt>
              <command>semanage login -m -s staff_u __default__</command>
            </screen>
          </listitem>
        </itemizedlist>
      </section>
      <section xml:id="semanage-boolean-command">
        <title><command>semanage boolean</command> 命令</title>
        <para>
        <command>semanage boolean</command> 命令用于控制 SELinux 策略中的布尔值。
      </para>
        <para>
        命令摘要如下：
      </para>
        <screen>semanage boolean [-h] [-n]  [ --extract |
       --deleteall | --list [-C] | --modify ( --on | --off | -1 | -0 ) boolean ]</screen>
        <para>
        除了通用选项之外，还可使用以下特定于 <command>semanage boolean</command> 命令的选项：
      </para>
        <variablelist>
          <varlistentry>
            <term>--list -C</term>
            <listitem>
              <para>
              显示在本地对布尔值所做修改的列表。
            </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>-m --on |-1</term>
            <listitem>
              <para>
              打开提供的布尔值。
            </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>-m --off | -0</term>
            <listitem>
              <para>
              关闭提供的布尔值。
            </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>-D、--deleteall</term>
            <listitem>
              <para>
              删除在本地对布尔值所做的全部修改。
            </para>
            </listitem>
          </varlistentry>
        </variablelist>
        <para>
        该命令最常用来打开或关闭特定的布尔值。例如，要打开 <literal>authlogin_yubikey</literal> 布尔值，请运行：
      </para>
        <screen>
          <prompt role="root"># </prompt>
          <command>semanage boolean -m on authlogin_yubikey</command>
        </screen>
      </section>
      <section xml:id="semanage-user-command">
        <title><command>semanage user</command> 命令</title>
        <para>
        <command>semanage user</command> 命令控制 SELinux 用户、角色和 MLS/MCS 级别之间的映射。
      </para>
        <para>
        除了<xref linkend="list-common-options" role="internalbook"/>中所述的通用选项外，<command>semanage
        use</command> 命令还接受以下选项：
      </para>
        <variablelist>
          <varlistentry>
            <term>-R [ROLES]、--roles [ROLES]</term>
            <listitem>
              <para>
              SELinux 角色列表。可将多个角色括在双引号中并用空格分隔，或者可以多次使用 <option>-R</option>。
            </para>
            </listitem>
          </varlistentry>
        </variablelist>
        <para>
        使用此命令可执行以下任务：
      </para>
        <itemizedlist>
          <listitem>
            <para>
            运行以下命令列出 SELinux 用户与角色的映射：
          </para>
            <screen>
              <prompt role="root"># </prompt>
              <command>semanage user -l</command>
            </screen>
          </listitem>
          <listitem>
            <para>
            更改指派给 <literal>user_u</literal> SELinux 用户的角色：
          </para>
            <screen>
              <prompt role="root"># </prompt>
              <command>semanage user -m -R "system_r unconfined_r user_r"</command>
            </screen>
          </listitem>
          <listitem>
            <para>
            为 <literal>admin_u</literal> 指派角色 <literal>staff_r</literal> 和类别 <literal>s0</literal>：
          </para>
            <screen>
              <prompt role="root"># </prompt>
              <command>semanage user -a -R "staff_r -r s0 admin_u</command>
            </screen>
          </listitem>
          <listitem>
            <para>
            例如，创建角色为 <literal>staff_r</literal> 的新 SELinux 用户 <literal>admin_u</literal>。您还需要使用 <option>-P</option> 为此用户定义标记前缀：
          </para>
            <screen>
              <prompt role="root"># </prompt>
              <command>semanage user -a -R "staff_r" -P admin admin_u</command>
            </screen>
          </listitem>
        </itemizedlist>
      </section>
      <section xml:id="semanage-module-command">
        <title><command>semanage module</command> 命令</title>
        <para>
        <command>semanage module</command> 命令可以安装、去除、禁用或启用 SELinux 策略模块。
      </para>
        <para>
        除了<xref linkend="list-common-options" role="internalbook"/>中所述的通用选项外，<command>semanage
        fcontext</command> 命令还接受以下选项：
      </para>
        <variablelist>
          <varlistentry>
            <term><option>-d</option>、<option>--disable</option></term>
            <listitem>
              <para>
              要禁用提供的 SELinux 策略模块，请运行以下命令：
            </para>
              <screen>
                <prompt role="root"># </prompt>
                <command>semanage module --disable <replaceable>MODULE_NAME</replaceable></command>
              </screen>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term><option>-e</option>、<option>--enable</option></term>
            <listitem>
              <para>
              要启用提供的 SELinux 策略模块，请运行以下命令：
            </para>
              <screen>
                <prompt role="root"># </prompt>
                <command>semanage module --enable <replaceable>MODULE_NAME</replaceable></command>
              </screen>
            </listitem>
          </varlistentry>
        </variablelist>
      </section>
    </section>
    <section xml:id="sestatus-command">
      <title><command>sestatus</command> 命令</title>
      <para>
      <command>sestatus</command> 获取运行 SELinux 的系统的状态。
    </para>
      <para>
      该命令的一般语法如下所示：
    </para>
      <screen>sestatus <replaceable>[OPTION]</replaceable> </screen>
      <para>
      如果不结合任何选项和参数运行该命令，它将输出以下信息：
    </para>
      <screen><prompt role="root"># </prompt><command>sestatus</command>

SELinux status:                 enabled
SELinuxfs mount:                /sys/fs/selinux
SELinux root directory:         /etc/selinux
Loaded policy name:             targeted
Current mode:                   enforcing
Mode from config file:          enforcing
Policy MLS status:              enabled
Policy deny_unknown status:     allowed
Memory protection checking:     requested (insecure)
Max kernel policy version:      33
      </screen>
      <para>
      该命令接受以下选项：
    </para>
      <variablelist>
        <varlistentry>
          <term>-b</term>
          <listitem>
            <para>
            显示系统上布尔值的状态。
          </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>-v</term>
          <listitem>
            <para>
            显示 <filename>/etc/sestatus.conf</filename> 文件中列出的文件和进程的安全环境。
          </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
  <section version="5.2" xml:id="legal-disclaimer">
    <info>
      <title xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">法律声明</title>
    </info>
    <para> 版权所有 © 2006–<?dbtimestamp format="Y"?>
 SUSE LLC 和贡献者。保留所有权利。 </para>
    <para>
    根据 GNU 自由文档许可证 (GNU Free Documentation License) 版本 1.2 或（根据您的选择）版本 1.3 中的条款，在此授予您复制、分发和/或修改本文档的权限；本版权声明和许可证附带不可变部分。许可版本 1.2 的副本包含在题为<quote>GNU Free Documentation License</quote>的部分。
  </para>
    <para>
    有关 SUSE 商标，请参见 <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.suse.com/company/legal/"/>。所有其他第三方商标分别为相应所有者的财产。商标符号（®、™ 等）代表 SUSE 及其关联公司的商标。星号 (*) 代表第三方商标。
  </para>
    <para>
    本指南力求涵盖所有细节，但这不能确保本指南准确无误。SUSE LLC 及其关联公司、作者和译者对于可能出现的错误或由此造成的后果皆不承担责任。
  </para>
  </section>
  <appendix xmlns:its="http://www.w3.org/2005/11/its" version="5.2" role="legal" its:translate="no" xml:id="doc-gfdl-license">
    <info>
      <title xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">GNU 自由文档许可证</title>
    </info>
    <para>
  Copyright (C) 2000, 2001, 2002 Free Software Foundation, Inc. 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.允许任何人复制和分发此许可证文档的逐字副本，但禁止对其进行更改。
 </para>
    <bridgehead renderas="sect4">
    0. 导言
  </bridgehead>
    <para>
  此许可证的目的是赋予手册、教科书或其他功能性的和有用的文档以“自由”：即保证每个人都有复制和再分发此类文档的有效自由，无论是否进行修改，也无论将其用于商业或非商业用途。其次，此许可证为作者和出版者保留了因工作获得声誉但不视为对他人所做修改负责的方式。
 </para>
    <para>
  本许可证是一种“非盈利版权”，这意味着从该文档衍生的作品也必须是以同一方式自由的。它补充了 GNU 通用公共许可证（为自由软件设计的非盈利版权许可证）。
 </para>
    <para>
  我们设计此许可证旨在将其用于免费软件的手册，因为免费软件需要自由文档：免费程序所附手册应具有与软件本身同样的自由。但是此许可证不限于软件手册；它可以用于任何文本作品，无论主题如何或它是否作为印刷书籍出版。建议本许可证主要用于目的是指导或参考的作品。
 </para>
    <bridgehead renderas="sect4">
    1. 适用性和定义
  </bridgehead>
    <para>
  此许可证适用的对象：由版权所有者在其中明确声明可按照此许可证条款以任何媒体分发的任何手册和其他作品。此类声明授予在此处所述的条款和条件下使用该作品的全球无限期无版权许可证。下述“文档”指任何此类手册或作品。任何公众成员都是一个被许可人，以下称为“您”。如果您以需要版权法许可的任何方式复制、修改或分发该作品，则表示您接受该许可证。
 </para>
    <para>
  该文档的“修改版本”表示包含该文档或其一部分（或者逐字复制或者有修改和/或翻译为另一语言）的任何作品。
 </para>
    <para>
  “次要章节”是该文档的命名附录或扉页章节，专门讲述该文档的出版者或作者与该文档整个主题（或相关问题）的关系，不包含与整个主题相关的内容。（因此，如果该文档是数学课本的一部分，则辅助部分可能不说明任何数学问题。）这种关系可以是与主题或相关问题的历史联系，或与它们相关的法律、商业、哲学、伦理或政治地位。
 </para>
    <para>
  在该文档基于此许可证项发布的声明中，“固定章节”是将其标题指定为固定章节标题的一些辅助章节。如果一个章节不适用上述辅助章节的定义，则不允许将其指定为固定章节。该文档可能不包含固定章节。如果该文档不标识任何固定章节，则表示没有固定章节。
 </para>
    <para>
  在该文档基于此许可证项发布的声明中，“封页文本”是作为封面文本或封底文本列出的简短文本段落。封面文本最多 5 个单词，封底文本最多 25 个单词。
 </para>
    <para>
  文档的“透明”副本是一个机器可读的副本，使用公众可以得到其规范的格式表达，这样的副本适合于使用通用文本编辑器、（对于像素构成的图像）通用绘图程序、（对于绘制的图形）广泛使用的绘画编辑器直接修改文档，也适用于输入到文本格式处理程序或自动翻译成各种适于适用于输入到文本格式处理程序的格式。一个用其他透明文件格式表示的副本，如果该格式的标记（或缺少标记）已经构成了对读者的后续修改的障碍，那么就是不透明的。表示实质性数量的文本的图像格式都是不透明的。不“透明”的副本称为“不透明”。
 </para>
    <para>
  适于作为透明副本的格式的示例有：没有标记的纯 ASCII 文本、Texinfo 输入格式、LaTeX 输入格式、使用公共可用 DTD 的 SGML 或 XML，符合标准的简单 HTML、可以人为修改的 PostScript 或 PDF。透明图像格式的示例有 PNG、XCF 和 JPG。不透明的格式包括：仅可以被私有版权的字处理软件使用的私有版权格式、所用的 DTD 和/或处理工具不是广泛可用的的 SGML 或 XML、机器生成的 HTML、一些字处理器生成的只用于输出目的的 PostScript 或 PDF。
 </para>
    <para>
  对于印刷书籍，“扉页”就是扉页本身以及随后的一些用于补充的页，显然本许可资料需要出现在扉页上。对于那些没有扉页的作品形式，“扉页”代表接近作品最突出标题的、在文本正文之前的文本。
 </para>
    <para>
  “命名为 XYZ”的章节表示文档的一个特定的子单元，其标题就是 XYZ 或在括号中包含 XYZ 且后跟 XYZ 的其他语言翻译文本。（这里 XYZ 代表下面提及的特定章节名称，比如“致谢”、“题献”、“签名”或“历史”。）要在修改文档时对这类章节“保留标题”就是依据此定义保持这样一个“命名为 XYZ”的章节。
 </para>
    <para>
  文档可能在文档遵照此许可证的声明后面包含免责声明。这些免责声明应作为参考信息包含在此许可证中，但是只能将其视作免责声明：这些免责声明暗指的任何其他含义均无效，且对此许可证的含义不产生任何影响。
 </para>
    <bridgehead renderas="sect4">
    2. 逐字复制
  </bridgehead>
    <para>
  您可以用任何媒体复制并分发文档，无论是出于商业还是非商业目的，只要保证此许可证、版权声明和声称此许可证应用于文档的声明都完整地、无任何附加条件地存在于所有副本中。不能使用任何技术手段阻碍或控制您制作或发布的副本的阅读或再次复制。不过您可以在副本交易中得到报酬。如果发布足够多的副本，则您必须遵循下面第三节中的条件。
 </para>
    <para>
  您也可以在如上的条件下出租副本和向公众放映副本。
 </para>
    <bridgehead renderas="sect4">
    3. 大量复制
  </bridgehead>
    <para>
  如果您出版的文档印刷版副本（或是有印制封页的其他媒体副本）多于 100 份，而文档的许可证声明中要求有封页文本，则您必须将它清晰地置于封页之上，封面文本在封面上，封底文本在封底上。封面和封底上还必须标明您是这些副本的出版者。封面必须同等显著地完整展现标题的所有文字。您可以在封页上加入其他资料。改动仅限于封页的复制，只要保持文档的标题不变并满足这些条件，可以在其他方面被视为逐字复制。
 </para>
    <para>
  如果需要加上的文本对于封面或封底过多，无法明显地表示，您应该在封页上列出前面的（在合理的前提下尽量多），把其他的放在邻近的页面上。
 </para>
    <para>
  如果您出版或分发了超过 100 份文档的不透明副本，则必须在每个不透明副本中包含一份计算机可读的透明副本，或是在每个不透明副本中给出一个计算机网络地址，通过这个地址，网络公共用户可以使用标准网络协议下载文档的无任何附加资料的完整透明副本。如果您选择后者，则必须在开始大量分发非透明副本的时候采用相当谨慎的步骤，保证透明副本在其所给出的位置在（直接或通过代理和零售商）分发最后一次该版本的非透明副本的时间之后一年之内始终是有效的。
 </para>
    <para>
  在重新大量发布副本之前，请您（但不是必须）与文档的作者联系，以便他们可以有机会向您提供文档的更新版本。
 </para>
    <bridgehead renderas="sect4">
    4. 修改
  </bridgehead>
    <para>
  在上述第 2、3 节的条件下，您可以复制和分发文档的修改版本，前提是严格按照此许可证发布修改后的文档，将修改版本用作文档，从而允许任何拥有此修改版副本的人执行分发或修改。另外，在修改版中，您需要做到如下几点：
 </para>
    <orderedlist numeration="upperalpha" spacing="normal">
      <listitem>
        <para>
    用于与文档以及以前各个版本（如果有，应该列在文档的“历史”章节中）显著不同的扉页（和封页，如果有）。如果那个版本的原始发行者允许的话，您可以使用和以前版本相同的标题。
   </para>
      </listitem>
      <listitem>
        <para>
    与作者一样，在扉页上列出承担修改版本中的修改的作者责任的一个或多个人或实体和至少五个文档的原作者（如果原作者不足五个就全部列出），除非他们免除了您的这个责任。
   </para>
      </listitem>
      <listitem>
        <para>
    与原来的发行者一样，在扉页上列出修改版的发行者的姓名。
   </para>
      </listitem>
      <listitem>
        <para>
    保持该文档的全部版权声明不变。
   </para>
      </listitem>
      <listitem>
        <para>
    在与其他版权声明邻近的位置加入恰当的针对您的修改的版权声明。
   </para>
      </listitem>
      <listitem>
        <para>
    在紧接着版权声明的位置加入许可声明，按照下面附录中给出的形式，以本许可证给公众授于是用修订版本的权利。
   </para>
      </listitem>
      <listitem>
        <para>
    保持原文档的许可声明中的全部不可变章节、封面文字和封底文字的声明不变。
   </para>
      </listitem>
      <listitem>
        <para>
    包含一份未作任何修改的本协议的副本。
   </para>
      </listitem>
      <listitem>
        <para>
    保持命名为“历史”的章节不变，保持它的标题不变，并在其中加入一项，至少声明扉页上的已修改版本的标题、年份、新作者和出版者。如果文档中没有命名为“历史”章节，则请新建它，并加入一项以声明原文档扉页上所列的标题、年份、作者与出版者，再在其后加入如上所说的描述修改版本的项。
   </para>
      </listitem>
      <listitem>
        <para>
    如果文档中有用于公共用户访问的文档透明副本的网址，则保持网址不变，并同样提供它所基于的以前文档版本的网址。这些网址可以放在“历史”章节。您可以不给出那些在原文档发行之前已经发行至少四年的版本给出的网址，或者该版本的发行者授权不列出网址。
   </para>
      </listitem>
      <listitem>
        <para>
    对于任何命名为“致谢”或“题献”的章节，保持其标题不变，并保持其全部内容以及对每位贡献者致谢和/或题献的语气不变。
   </para>
      </listitem>
      <listitem>
        <para>
    保持文档的所有固定章节不变，不改变它们的标题和内容。章节的编号或相当的内容不被认为是章节标题的一部分。
   </para>
      </listitem>
      <listitem>
        <para>
    删除命名为“签名”的章节。这样的章节不可以被包含在修改后的版本中。
   </para>
      </listitem>
      <listitem>
        <para>
    不要把任何现有章节重命名为“签名”或与任何不可变章节相冲突的标题。
   </para>
      </listitem>
      <listitem>
        <para>
    保持任何免责声明不变。
   </para>
      </listitem>
    </orderedlist>
    <para>
  如果修改版本加入了新的符合次要章节定义的引言或附录章节，并且不含有从原文档中复制的内容，您可以选择将其标记为固定。如果需要这样做，则将它们的标题加入修改版本许可声明的不可变章节列表之中。这些标题必须和其他章节的标题相区分。
 </para>
    <para>
  您可以加入一个命名为“签名”的章节，只要它只包含对您的修改版本由不同的各方给出的签名，例如书评或是声明文本已经被一个组织认定为一个标准的权威定义。
 </para>
    <para>
  您可以加入一个最多 5 个字的段落作为封面文本和一个最多 25 个字的段落作为封底文本，将它们加入修改版本的封页文本列表末端。一个实体只可以添加（或编排）一段封面和一段封底文本。如果原文档已经为该封页（封面或封底）包含了封页文本，由您或您所代表的实体先前加入或排列的文本，不能再新加入一个，但您可以在原来的发行者的明确许可下替换掉原来的那个。
 </para>
    <para>
  作者和发行者不能通过本许可证授权公众使用他们的名字推荐或暗示认可任何一个修改版本。
 </para>
    <bridgehead renderas="sect4">
    5. 组合文档
  </bridgehead>
    <para>
  遵照第 4 节所说的修改版本的规定，您以将文档和其他文档合并并以本许可证发布，只要您在合并结果中包含原文档的所有不可变章节，对它们不加以任何改动，并在合并结果的许可声明中将它们全部列为不可变章节，而且维持原作者的免责声明不变。
 </para>
    <para>
  合并作品仅需要包含一份此许可证，多个相同的固定章节可以由一个副本取代。如果有多个名称相同但内容不同的固定章节，通过在章节名称后面的括号中加上原作者或出版者的姓名（如果已知）来加以区别，或者使用唯一编号加以区别。并对合并作品许可声明中的固定章节列表中的章节标题做相同的调整。
 </para>
    <para>
  在合并过程中，必须合并不同原始文档中任何命名为“历史”的章节，从而形成新的命名为“历史”的章节；类似地，还要合并命名为“致谢”和“题献”的章节。必须删除所有命名为“签名”的章节。
 </para>
    <bridgehead renderas="sect4">
    6. 文档的合集
  </bridgehead>
    <para>
  您可以制作一个文档和其他文档的合集，在本许可证下发布，并在合集中将不同文档中的多个本许可证的副本以一个单独的副本来代替，只要您在文档的其他方面遵循本许可证的逐字复制的条款即可。
 </para>
    <para>
  您可以从一个这样的合集中提取一个单独的文档，并将它在本许可证下单独发布，只要您想这个提取出的文档中加入一份本许可证的副本，并在文档的其他方面遵循本许可证的逐字复制的原则。
 </para>
    <bridgehead renderas="sect4">
    7. 独立作品的聚合体
  </bridgehead>
    <para>
  将文档或其派生品以及其他独立和无关文档或作品编撰在一个储存卷中或分发媒体上，这称为文档的“聚合体”，前提是编撰成品的著作权对其使用者的法律权限的限制未超出各个独立作品的许可范围。当基于此许可证发布的文档包含在一个聚合体中时，此许可证不适用于聚合体中的本非该文档派生作品的其他作品。
 </para>
    <para>
  如果第 3 节中的封页文本要求适用于这些文档的副本，则若文档在聚合体中所占的比重小于全作品的一半，文档的封页文本可以放置在聚合体内包含文档部分的封页上，或是电子文档中的等效部分。否则，它必须位于整个聚合体的印刷的封页上。
 </para>
    <bridgehead renderas="sect4">
    8. 翻译
  </bridgehead>
    <para>
  翻译被视为一种修改，因此您可以根据第 4 节的条款分发文档的翻译。将固定章节替换为翻译内容需要经得其版权所有者的特别许可，但除了这些固定章节的原始版本之外，您还可以包含一部分或所有固定章节的翻译。您可以包含一个此许可证以及所有许可证声明和免责声明的翻译版本，前提是同时包含它们的原始英文版本。当翻译版本和英文版发生冲突的时候，原始版本有效。
 </para>
    <para>
  如果在文档中有命名为“致谢”、“题献”或“历史”的章节，保持标题（第 1 节）的要求（第 4 节）恰恰需要更换实际的标题。
 </para>
    <bridgehead renderas="sect4">
    9. 终止
  </bridgehead>
    <para>
  除非此许可证中有明确规定，否则您不能对该文档进行复制、修改、分授许可或分发。在此许可证规定外对该文档所进行的任何复制、修改、分授许可或分发都是无效的，并且将自动终止您在此许可证下所拥有的权利。但是，对于在此许可证的规定下从您这里获得副本或权利的各方，只要其完全遵守此许可证的规定，其许可证将不会被终止。
 </para>
    <bridgehead renderas="sect4">
    10. 本许可的未来修订版本
  </bridgehead>
    <para>
  自由软件基金会有时会发布 GNU 自由文档许可证的新的修订版版本。这些新版本的主旨和精神与当前版本是一致的，但在解决新问题的具体细节方面可能有所不同。请参见 <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.gnu.org/copyleft/"/>。
 </para>
    <para>
  许可证的每个版本都有一个不同的版本号。如果文档指定了适用于它的此许可证“或任何后续版本”的特定带编号版本，则您可以选择遵从指定版本或自由软件基金会发布的任何随后版本（非草稿）的条款和条件。如果文档没有指定此许可证的版本号，您可以选择自由软件基金会发布的任何许可证版本（非草稿）。
 </para>
    <bridgehead renderas="sect4">
    附录：如何针对您的文档使用此许可证
  </bridgehead>
    <screen>Copyright (c) YEAR YOUR NAME.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled &#x201C;GNU
Free Documentation License&#x201D;.</screen>
    <para>
  如果您有固定章节、封面文本和封底文本，请将“附带...文本”行替换为：
 </para>
    <screen>with the Invariant Sections being LIST THEIR TITLES, with the
Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</screen>
    <para>
  如果有不可变章节而没有封页文本，或这三种内容（不可变章节、封面文本、封底文本）的任何其他组合，请合并这两个备选项以适应您的情况。
 </para>
    <para>
  如果您的文档包含不一般的程序代码示例，建议同时选择自由软件许可证（如 GNU 通用公共许可证）发布这些示例，以允许它们可以用于自由软件。
</para>
  </appendix>
</article>
