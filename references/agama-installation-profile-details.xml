<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="agama-installation-profile-details"
 role="reference" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Details of an &agama; installation profile</title>
    <!-- can be changed via merge in the assembly -->
    <!--add author's email address-->
    <meta name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
    <abstract>
      <!-- can be changed via merge in the assembly -->
      <para>
        The &agama; profile contains various sections to configure different aspects of the system
        installation. For real deployments where you would want to simultaneously install multiple
        systems with the same initial configuration, prepare a customized profile with all the
        necessary details. You can start with the template of the minimal example and add details
        progressively. This section gives you an idea of the most useful details you should
        consider for real deployments.
      </para>
    </abstract>
  </info>
  <section xml:id="product-configuration-agama-installation-profile">
    <title>Product configuration for an &agama; installation profile</title>
    <para>
      The <literal>product</literal> section defines the &suse; product to be installed and
      includes optional registration data and add-on modules. This is essential for systems
      requiring access to subscription repositories or additional functionality.
    </para>
    <example>
      <title>Sample <literal>product</literal> configuration for an &agama; installation profile</title>
<screen>
"product": {
  "id": "<replaceable>&productname; &productnumber;</replaceable>",
  "registrationCode": "<replaceable>REGISTRATION-CODE</replaceable>",
  "registrationEmail": "<replaceable>EMAIL-ADDRESS</replaceable>",
  "registrationUrl": "<replaceable>REGISTRATION-URL</replaceable>",
  "addons": [
    {
      "id": "<replaceable>ADDON-ID</replaceable>",
      "version": "<replaceable>ADDON-VERSION</replaceable>",
      "registrationCode": "<replaceable>ADDON-REGISTRATION-CODE</replaceable>"
    }
  ]
}
</screen>
    </example>
    <para>
      This section contains the following fields:
    </para>
    <variablelist>
      <varlistentry>
        <term>id</term>
        <listitem>
          <para>
            The product identifier used to select the base &suse; product to be installed.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>registrationCode</term>
        <listitem>
          <para>
            The registration code for the product obtained from the &scc; and used to activate
            repositories and receive updates.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>registrationEmail</term>
        <listitem>
          <para>
            The e-mail address associated with the registration account used during product
            activation.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>registrationUrl</term>
        <listitem>
          <para>
            The full URL of the registration server. If you are using the &scc;, you can omit this
            field. However, it is useful when registering from a custom server.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>addons</term>
        <listitem>
          <para>
            A list of <emphasis>optional</emphasis> add-on modules or extensions to be activated
            alongside the base product.
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <literal>id</literal>: Identifier of the add-on. For example,
                <literal>sle-ha</literal> for High Availability.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>version</literal>: Specific version of the add-on to be installed. This is
                required if multiple versions are available.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>registrationCode</literal>: Optional registration code for the add-on if
                separate activation is required.
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="hostname-configuration-agama-installation-profile">
    <title>Host name configuration for an &agama; installation profile</title>
    <para>
      The <literal>hostname</literal> section sets the system's static and transient host name. The
      static host name is persistent across reboots, while the transient host name is used
      temporarily at runtime and may be overridden by network services like DHCP.
    </para>
    <example>
      <title>Sample <literal>hostname</literal> configuration for an &agama; installation profile</title>
<screen>
"hostname": {
  "static": "<replaceable>STATIC-HOSTNAME</replaceable>",
  "transient": "<replaceable>TRANSIENT-HOSTNAME</replaceable>"
}
</screen>
    </example>
    <para>
      This section contains the following fields:
    </para>
    <variablelist>
      <varlistentry>
        <term>static</term>
        <listitem>
          <para>
            The persistent host name written to <filename>/etc/hostname</filename>. This name
            remains consistent across system reboots and is used by default if no transient
            host name is specified.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>transient</term>
        <listitem>
          <para>
            A temporary host name applied at runtime. This may be used during deployment or
            installation to reflect an ephemeral identity. For example, it can be set via DHCP or
            by installation tooling like &agama;.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="root-authentication-agama-installation-profile">
    <title>Root authentication for an &agama; installation profile</title>
    <para>
      The <literal>root</literal> section defines authentication settings for the system's
      &rootuser; account. This includes a root password (either plain or pre-hashed) and an
      optional SSH public key for remote access.
    </para>
    <example>
      <title>Sample &rootuser; configuration for an &agama; installation profile</title>
<screen>
"root": {
  "hashedPassword": true,
  "password": "<replaceable>HASHED-ROOT-PASSWORD</replaceable>",
  "sshPublicKey": "<replaceable>SSH-PUBLIC-KEY</replaceable>"
}
</screen>
    </example>
    <para>
      This section contains the following fields:
    </para>
    <variablelist>
      <varlistentry>
        <term>hashedPassword</term>
        <listitem>
          <para>
            Boolean flag indicating whether the <literal>password</literal> field contains a hashed
            value. If set to <literal>true</literal>, the password must be a SHA-512 crypt hash
            (starting with <literal>$6$</literal>). If <literal>false</literal> or omitted, the
            value is treated as plain text.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>password</term>
        <listitem>
          <para>
            The root user's password. If <literal>hashedPassword</literal> is
            <literal>true</literal>, this must be a pre-generated hash (for example, using
            <command>openssl passwd -6</command>). Otherwise, plain text is accepted and will be
            hashed during installation.
          </para>
          <para>
            You can generate a hashed password by running the following command:
          </para>
<screen>&prompt.sudo;<command>openssl passwd -6</command></screen>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>sshPublicKey</term>
        <listitem>
          <para>
            An optional SSH public key to be added to the root user's
            <filename>~/.ssh/authorized_keys</filename> file. This allows passwordless root login
            over SSH. The key must be in OpenSSH format. For example, starting with
            <literal>ssh-rsa</literal> or <literal>ssh-ed25519</literal>.
          </para>
          <para>
            You can generate an SSH public key by running the following command:
          </para>
<screen>&prompt.sudo;<command>ssh-keygen -t rsa -b 4096 -C "<replaceable>YOUR-EMAIL@EXAMPLE.COM</replaceable>"
</command></screen>
          <para>
            Based on your requirements, choose the key type and the key size. However, it is better
            to adopt stronger security.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="user-configuration-agama-installation-profile">
    <title>User configuration for an &agama; installation profile</title>
    <para>
      The <literal>user</literal> section defines the initial non-root user account created during
      installation. This includes the user's full name, login name, password (plain or hashed), and
      optional automatic login preference.
    </para>
    <example>
      <title>Sample <literal>user</literal> configuration for an &agama; installation profile</title>
<screen>
"user": {
  "hashedPassword": false,
  "fullName": "<replaceable>FULL-NAME</replaceable>",
  "userName": "<replaceable>LOGIN-NAME</replaceable>",
  "password": "<replaceable>USER-PASSWORD</replaceable>",
  "autologin": false
}
</screen>
    </example>
    <para>
      This section contains the following fields:
    </para>
    <variablelist>
      <varlistentry>
        <term>hashedPassword</term>
        <listitem>
          <para>
            Boolean flag indicating whether the <literal>password</literal> field contains a hashed
            value. If set to <literal>true</literal>, the password must be a pre-hashed SHA-512
            crypt value. Otherwise, the plain text password will be hashed during installation.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>fullName</term>
        <listitem>
          <para>
            The full name of the user, typically used for display purposes in graphical
            environments. For example, <literal>Jane Doe</literal>.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>userName</term>
        <listitem>
          <para>
            The system login name for the user. This becomes their Linux username and home
            directory under <filename>/home</filename>. For example, <literal>jane</literal>.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>password</term>
        <listitem>
          <para>
            The user's password, in plain text or pre-hashed, depending on the
            <literal>hashedPassword</literal> flag. If plaintext is provided, it will be
            automatically hashed.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>autologin</term>
        <listitem>
          <para>
            Optional boolean that determines whether the user should be automatically logged into a
            graphical session at boot. This setting is only relevant for desktop installations.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="localization-configuration-agama-installation-profile">
    <title>Localization configuration for an &agama; installation profile</title>
    <para>
      The <literal>localization</literal> section defines the system language, keyboard layout, and
      time zone settings. These parameters determine the default locale and input behavior after
      installation.
    </para>
    <example>
      <title>Sample <literal>localization</literal> configuration for an &agama; installation profile</title>
<screen>
"localization": {
  "language": "<replaceable>LANGUAGE-ID</replaceable>",
  "keyboard": "<replaceable>KEYBOARD-LAYOUT</replaceable>",
  "timezone": "<replaceable>TIMEZONE</replaceable>"
}
</screen>
    </example>
    <para>
      This section contains the following fields:
    </para>
    <variablelist>
      <varlistentry>
        <term>language</term>
        <listitem>
          <para>
            The system language and locale specified as a locale string. For example,
            <literal>en_US.UTF-8</literal> or <literal>de_DE</literal>. This controls messages,
            number formats, date formats, and default encoding.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>keyboard</term>
        <listitem>
          <para>
            The default keyboard layout identifier. For example, <literal>us</literal> or
            <literal>de</literal>. This affects key mapping on both text consoles and graphical
            desktops.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>timezone</term>
        <listitem>
          <para>
            The system time zone using a region/location format. For example,
            <literal>Europe/Berlin</literal>. This sets the default system clock and affects
            date/time display.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="software-configuration-agama-installation-profile">
    <title>Software configuration for an &agama; installation profile</title>
    <para>
      The <literal>software</literal> section defines which software components are installed on
      the system via &suse;'s pattern and package management infrastructure.
    </para>
    <example>
      <title>Sample <literal>software</literal> configuration for an &agama; installation profile</title>
<screen>
"software": {
  "patterns": [
    "<replaceable>minimal_base</replaceable>",
    "<replaceable>app_server</replaceable>"
  ],
  "packages": [
    "<replaceable>vim</replaceable>",
    "<replaceable>htop</replaceable>",
    "<replaceable>curl</replaceable>"
  ]
}
  </screen>
    </example>
    <para>
      This section contains the following fields:
    </para>
    <variablelist>
      <varlistentry>
        <term>patterns</term>
        <listitem>
          <para>
            A list of software patterns to be installed. Patterns are curated collections of
            packages designed to serve a functional role. For example,
            <literal>minimal_base</literal>, <literal>gnome</literal>,
            <literal>app_server</literal>. For a complete list of patterns available for
            &productname; and your target architecture, refer to the &scc;.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>packages</term>
        <listitem>
          <para>
            A list of individual packages to install in addition to those brought in by selected
            patterns. For example, <package>vim</package>, <package>htop</package> and
            <package>curl</package>. For a complete list of packages available from the official
            &productname; repositories for your target architecture, refer to the &scc;.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
    <note>
     <title>Trust the GPG key for the Package Hub repository</title>
     <para>
      When enabling &ph; during a manual installation, users are prompted to trust the repository's GPG key. To trust the key automatically during an unattended installation, use the following snippet:
     </para>
<screen>
{
  product: {
    id: 'SLES',
    registrationCode: '<replaceable>SLES_REG_CODE</replaceable>',
    addons: [
      {
        id: 'PackageHub',
      }
    ]
  },
  questions: {
    policy: 'auto',
    answers: [
      {
        answer: 'Trust',
        class: 'software.import_gpg',
        data: {
          fingerprint: '<replaceable>BF3F 9A67 D3A2 FF98 A73F 5E07 488C 583D 287A 0027</replaceable>',
          name: '<replaceable>openSUSE Backports for SUSE Linux 16 sle-backports-202500514@opensuse.org</replaceable>',
          id: '<replaceable>488C583D287A0027</replaceable>'
        }
      }
    ]
  }
}
</screen>
    </note>
  </section>
  <section xml:id="storage-configuration-agama-installation-profile">
    <title>Storage configuration for an &agama; installation profile</title>
    <para>
      The <literal>storage</literal> section defines the system's target disk layout, such as
      partitions, filesystems, and volume management, to be applied during installation. This field
      references the Agama storage schema, which is referenced from the profile schema.
    </para>
    <note>
     <title>Advanced storage configuration</title>
     <para>
      An exhaustive description of all possible storage configurations using &agama; is beyond the
      scope of this section, as it will need careful consideration of the
      storage model schema. For information on advanced storage configuration, refer to <xref linkend="agama-advanced-storage-configuration"></xref>.
     </para>
    </note>
    <example>
      <title>Sample <literal>storage</literal> configuration for an &agama; installation profile</title>
<screen>
"storage": {
  "disks": [
    {
      "device": "<replaceable>/dev/sda</replaceable>",
      "partitions": [
        {
          "mountPoint": "/",
          "fsType": "ext4",
          "size": "20G"
        },
        {
          "mountPoint": "swap",
          "fsType": "swap",
          "size": "4G"
        }
      ]
    }
  ]
}
    </screen>
    </example>
    <para>
      This section contains the following fields:
    </para>
    <variablelist>
      <varlistentry>
        <term>disks</term>
        <listitem>
          <para>
            A list of disks on which partitions will be defined.
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <literal>device</literal>: The full device path, such as
                <filename>/dev/sda</filename>.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>partitions</literal>: A list of partitions to create on the disk.
              </para>
              <itemizedlist>
                <listitem>
                  <para>
                    <literal>mountPoint</literal>: The mount point for the partition, or
                    <literal>swap</literal> for swap areas.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    <literal>fsType</literal>: File system type, such as <literal>ext4</literal> or
                    <literal>swap</literal>.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    <literal>size</literal>: Size of the partition (e.g., <literal>20G</literal>).
                  </para>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="bootloader-configuration-agama-installation-profile">
    <title>Boot loader configuration for an &agama; installation profile</title>
    <para>
      The <literal>bootloader</literal> section defines boot-time behavior, including whether to
      pause at the boot menu and what extra kernel parameters to pass. It affects the installed
      system's GRUB configuration.
    </para>
    <example>
      <title>Sample <literal>bootloader</literal> configuration for an &agama; installation profile</title>
<screen>
"bootloader": {
  "stopOnBootMenu": false,
  "timeout": 5,
  "extraKernelParams": "<replaceable>KERNEL-PARAMETERS</replaceable>"
}
</screen>
    </example>
    <para>
      This section contains the following fields:
    </para>
    <variablelist>
      <varlistentry>
        <term>stopOnBootMenu</term>
        <listitem>
          <para>
            Boolean flag that, if set to <literal>true</literal>, forces the system to stop at the
            GRUB boot menu instead of proceeding automatically. This is useful for debugging or
            choosing alternate boot options manually.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>timeout</term>
        <listitem>
          <para>
            Number of seconds the GRUB boot menu is shown before continuing with the default entry.
            Set to <literal>0</literal> to boot immediately.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>extraKernelParams</term>
        <listitem>
          <para>
            Additional kernel command-line parameters to append to the default ones during boot.
            These are passed directly to the Linux kernel. For example,
            <literal>console=ttyS0</literal> or <literal>quiet splash</literal>.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="network-configuration-agama-installation-profile">
    <title>Network configuration for an &agama; installation profile</title>
    <para>
      The <literal>network</literal> section defines one or more network connections to be
      configured during installation. Each connection supports IP setup, interface binding,
      wireless settings, bonding, bridging, and optional enterprise-grade authentication mechanisms
      like IEEE 802.1X.
    </para>
    <example>
      <title>Sample <literal>network</literal> configuration for an &agama; installation profile</title>
<screen>
"network": {
  "connections": [
    {
      "id": "<replaceable>ETH0-CONNECTION</replaceable>",
      "interface": "<replaceable>eth0</replaceable>",
      "method4": "manual",
      "addresses": ["<replaceable>192.168.100.10/24</replaceable>"],
      "gateway4": "<replaceable>192.168.100.1</replaceable>",
      "nameservers": ["<replaceable>1.1.1.1</replaceable>", "<replaceable>8.8.8.8</replaceable>"],
      "autoconnect": true
    },
    {
      "id": "<replaceable>WIFI-HOME</replaceable>",
      "interface": "<replaceable>wlan0</replaceable>",
      "method4": "auto",
      "wireless": {
        "ssid": "<replaceable>MYSSID</replaceable>",
        "password": "<replaceable>MYWIFIPASSWORD</replaceable>",
        "security": "wpa-psk"
      }
    },
    {
      "id": "<replaceable>BRIDGE0</replaceable>",
      "interface": "<replaceable>br0</replaceable>",
      "method4": "auto",
      "bridge": {
        "stp": true,
        "forwardDelay": 15,
        "ports": ["<replaceable>eth0</replaceable>", "<replaceable>eth1</replaceable>"]
      }
    },
    {
      "id": "<replaceable>BOND0</replaceable>",
      "interface": "<replaceable>bond0</replaceable>",
      "method4": "manual",
      "addresses": ["<replaceable>10.0.0.100/24</replaceable>"],
      "gateway4": "<replaceable>10.0.0.1</replaceable>",
      "bond": {
        "mode": "active-backup",
        "options": "<replaceable>miimon=100</replaceable>",
        "ports": ["<replaceable>eth2</replaceable>", "<replaceable>eth3</replaceable>"]
      }
    },
    {
      "id": "<replaceable>SECURE-ETH</replaceable>",
      "interface": "<replaceable>eth4</replaceable>",
      "method4": "auto",
      "ieee-8021x": { <co xml:id="ieee-8021x"></co>
        "eap": ["peap"],
        "identity": "<replaceable>USERNAME</replaceable>",
        "password": "<replaceable>PASSWORD</replaceable>",
        "caCert": "<replaceable>/etc/certs/ca.pem</replaceable>"
      }
    }
  ]
}
  </screen>
      <calloutlist>
        <callout arearefs="ieee-8021x">
          <note>
            <para>
              Support for IEEE 802.1X authentication is intended for advanced enterprise
              deployments where authentication is required at the link layer, before an IP is
              assigned. This commonly involves integration with RADIUS and certificate-based trust.
              Misconfiguration can result in complete network inaccessibility. Refer to
              <literal>systemd-networkd</literal> documentation for authoritative guidance.
            </para>
          </note>
        </callout>
      </calloutlist>
    </example>
    <para>
      This section contains the following connection attributes:
    </para>
    <variablelist>
      <varlistentry>
        <term>id</term>
        <listitem>
          <para>
            Unique name for the network connection.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>interface</term>
        <listitem>
          <para>
            Name of the network interface to bind to (for example, <literal>eth0</literal>).
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>method4</term>
        <listitem>
          <para>
            IPv4 addressing method (<literal>auto</literal>, <literal>manual</literal>, etc.).
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>method6</term>
        <listitem>
          <para>
            IPv6 addressing method (<literal>auto</literal>, <literal>manual</literal>, etc.).
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>addresses</term>
        <listitem>
          <para>
            List of static addresses in CIDR format.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>gateway4 / gateway6</term>
        <listitem>
          <para>
            IPv4 and IPv6 default gateway addresses.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>nameservers</term>
        <listitem>
          <para>
            List of DNS server IPs.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>autoconnect</term>
        <listitem>
          <para>
            Boolean. Specifies whether the connection is brought up automatically.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>wireless</term>
        <listitem>
          <para>
            Defines wireless-specific settings:
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <literal>ssid</literal>: Wi-Fi network name.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>password</literal>: Wi-Fi passphrase.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>security</literal>: Key management (for example,
                <literal>wpa-psk</literal>).
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>bridge</term>
        <listitem>
          <para>
            Defines bridge-specific settings:
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <literal>stp</literal>: Boolean. Enables the Spanning Tree Protocol.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>forwardDelay</literal>: STP forwarding delay in seconds.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>ports</literal>: Interfaces to include in the bridge.
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>bond</term>
        <listitem>
          <para>
            Defines bonding configuration:
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <literal>mode</literal>: Bonding mode (for example,
                <literal>active-backup</literal>).
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>options</literal>: Optional bonding parameters (for example,
                <literal>miimon=100</literal>).
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>ports</literal>: List of interfaces in the bond.
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>ieee-8021x</term>
        <listitem>
          <para>
            Defines enterprise authentication settings:
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <literal>eap</literal>: List of EAP methods (for example, <literal>peap</literal>,
                <literal>tls</literal>).
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>identity</literal>: Login identity (typically username).
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>password</literal>: Authentication password (if needed).
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>caCert</literal>: Path to trusted CA certificate.
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="security-configuration-agama-installation-profile">
    <title>Security configuration for an &agama; installation profile</title>
    <para>
      The <literal>security</literal> section allows you to add trusted SSL certificates to the
      installed system. This is useful when connecting to internal package mirrors, registration
      servers, or other TLS services that require non-default certificate authorities.
    </para>
    <example>
      <title>Sample <literal>security</literal> configuration for an &agama; installation profile</title>
<screen>
"security": {
  "sslCertificates": [
    {
      "fingerprint": "<replaceable>FINGERPRINT</replaceable>",
      "algorithm": "SHA256"
    }
  ]
}
</screen>
    </example>
    <para>
      This section contains the following fields:
    </para>
    <variablelist>
      <varlistentry>
        <term>sslCertificates</term>
        <listitem>
          <para>
            A list of custom SSL certificates to install into the system’s trust store. Each item
            specifies the certificate’s fingerprint and the hashing algorithm used.
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <literal>fingerprint</literal>: The cryptographic fingerprint of the certificate,
                formatted as a colon-separated hex string. For example,
                <literal>A8:DE:08:B1:57:52:FE:70:DF:D5:31:EA:E3:53:BB:39:EE:01:FF:B9</literal>.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>algorithm</literal>: The fingerprint algorithm used to compute the hash.
                Supported values are <literal>SHA1</literal> and <literal>SHA256</literal>.
              </para>
              <warning>
                <title>Use SHA256 for better security</title>
                <para>
                  <literal>SHA1</literal> is cryptographically broken and should not be used. Use
                  <literal>SHA256</literal> wherever possible.
                </para>
              </warning>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
    </variablelist>
    <para>
      To verify the fingerprint of a certificate in PEM format:
    </para>
<screen>&prompt.sudo;<command>openssl x509 -in <replaceable>FILE.pem</replaceable> -noout -fingerprint -sha256</command></screen>
    <para>
      Trusted certificates can be installed permanently by placing them in
      <filename>/etc/pki/trust/anchors</filename> and then executing:
    </para>
<screen>&prompt.sudo;<command>update-ca-certificates</command></screen>
  </section>
  <section xml:id="scripts-configuration-agama-installation-profile">
    <title>Scripts configuration for an &agama; installation profile</title>
    <para>
      The <literal>scripts</literal> section allows you to define custom shell scripts to be
      executed at different stages of the &suse; installation lifecycle. These scripts can be
      embedded inline, fetched from a URL, and optionally executed in a chroot environment (where
      applicable).
    </para>
    <example>
      <title>Sample <literal>scripts</literal> configuration for an &agama; installation profile</title>
<screen>
"scripts": {
  "pre": [
    {
      "name": "<replaceable>PRE-CHECK-DISK.sh</replaceable>",
      "content": "#!/bin/bash\nif [ ! -e /dev/sda ]; then echo 'Disk not found' &gt;&amp;2; exit 1; fi"
    }
  ],
  "postPartitioning": [
    {
      "name": "<replaceable>CREATE-MOUNTS.sh</replaceable>",
      "url": "<replaceable>http://EXAMPLE.COM/SCRIPTS/MOUNTS.sh</replaceable>"
    }
  ],
  "post": [
    {
      "name": "<replaceable>FINALIZE-INSTALL.sh</replaceable>",
      "content": "#!/bin/bash\necho 'Installation complete'",
      "chroot": true
    }
  ],
  "init": [
    {
      "name": "<replaceable>FIRST-BOOT.sh</replaceable>",
      "content": "#!/bin/bash\necho 'System booted for the first time'"
    }
  ]
}
  </screen>
    </example>
    <para>
      This section defines the following script categories:
    </para>
    <variablelist>
      <varlistentry>
        <term>pre</term>
        <listitem>
          <para>
            Scripts executed before the installation begins. Useful for pre-flight checks or
            environment preparation.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>postPartitioning</term>
        <listitem>
          <para>
            Scripts run immediately after partitioning is completed, but before packages are
            installed.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>post</term>
        <listitem>
          <para>
            Scripts run after installation finishes. These can optionally execute within the target
            system’s root via chroot.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>init</term>
        <listitem>
          <para>
            Scripts executed during the first boot of the installed system. These are useful for
            final configuration, logging, or notifications.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
    <para>
      Each script object may contain one of the following keys:
    </para>
    <variablelist>
      <varlistentry>
        <term>name</term>
        <listitem>
          <para>
            File name used to identify the script on disk. Required for all scripts.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>content</term>
        <listitem>
          <para>
            Inline script body. Must begin with a shebang (for example,
            <literal>#!/bin/bash</literal>).
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>url</term>
        <listitem>
          <para>
            HTTP/HTTPS location from which to fetch the script. Cannot be combined with
            <literal>content</literal>.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>chroot</term>
        <listitem>
          <para>
            Boolean. If <literal>true</literal>, the script is executed inside the installed
            system’s root via chroot. Applies only to <literal>post</literal> scripts.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="files-configuration-agama-installation-profile">
    <title>Files configuration for an &agama; installation profile</title>
    <para>
      The <literal>files</literal> section allows deployment of custom user-defined files into the
      installed system. These files are written just before post-installation scripts run and can
      be useful for configuring services, dropping keys, or overriding system files.
    </para>
    <example>
      <title>Sample <literal>files</literal> configuration for an &agama; installation profile</title>
<screen>
"files": [
  {
    "destination": "<replaceable>ABSOLUTE-FILE-PATH</replaceable>",
    "content": "<replaceable>FILE-CONTENT</replaceable>",
    "permissions": "0644",
    "user": "<replaceable>USERNAME</replaceable>",
    "group": "<replaceable>GROUPNAME</replaceable>"
  }
]
</screen>
    </example>
    <para>
      This section contains an array of file definitions. Each entry supports the following fields:
    </para>
    <variablelist>
      <varlistentry>
        <term>destination</term>
        <listitem>
          <para>
            Required absolute path where the file will be written inside the target system. For
            example, <filename>/etc/<replaceable>MYAPP/CONFIG.YAML</replaceable></filename>.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>content</term>
        <listitem>
          <para>
            Inline string representing the content of the file. This field is mutually exclusive
            with <literal>url</literal>; one of the two must be present.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>url</term>
        <listitem>
          <para>
            URL (relative or absolute) to fetch the file content from. Used instead of inline
            <literal>content</literal>. One of <literal>url</literal> or <literal>content</literal>
            is required.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>permissions</term>
        <listitem>
          <para>
            Optional file mode string (octal), such as <literal>0644</literal> or
            <literal>0755</literal>, to set on the created file.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>user</term>
        <listitem>
          <para>
            Optional owner username to assign to the file. The user must already exist in the
            installed system.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>group</term>
        <listitem>
          <para>
            Optional owner group to assign to the file. The group must already exist in the
            installed system.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="legacy-autoyast-storage-configuration-agama-installation-profile">
    <title>Legacy AutoYaST storage configuration for an &agama; installation profile</title>
    <para>
      The <literal>legacyAutoyastStorage</literal> section allows reuse of Auto&yast;-style storage
      definitions by expressing them in JSON. It accepts an array of opaque objects directly
      representing the legacy partitioning structure, allowing migration or backward compatibility
      for existing storage configurations.
    </para>
    <example>
      <title>Sample <literal>legacyAutoyastStorage</literal> configuration for an &agama; installation profile</title>
<screen>
"legacyAutoyastStorage": [
  {
    "partitions": {
      "partition": [
        {
          "device": "/dev/sda1",
          "mount": "/",
          "size": "20G",
          "filesystem": "ext4"
        },
        {
          "device": "/dev/sda2",
          "mount": "swap",
          "size": "4G",
          "filesystem": "swap"
        }
      ]
    }
  }
]
</screen>
    </example>
    <para>
      This section contains the following:
    </para>
    <variablelist>
      <varlistentry>
        <term>legacyAutoyastStorage</term>
        <listitem>
          <para>
            An array of JSON objects compatible with the XML structure used in Auto&yast;’s
            <filename>partitioning</filename> section. This allows experienced administrators to
            reuse complex partitioning logic without switching to Agama-native storage syntax.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="iscsi-configuration-agama-installation-profile">
    <title>iSCSI configuration for an &agama; installation profile</title>
    <para>
      The <literal>iscsi</literal> section defines parameters required for configuring iSCSI
      targets that should be discovered and mounted during system installation. This is
      particularly relevant for systems that boot from SAN or use iSCSI-based storage volumes.
    </para>
    <example>
      <title>Sample <literal>iSCSI</literal> configuration for an &agama; installation profile</title>
<screen>
"iscsi": {
  "initiatorName": "<replaceable>IQN-OF-INITIATOR</replaceable>",
  "targets": [
    {
      "address": "<replaceable>TARGET-IP</replaceable>",
      "port": 3260,
      "target": "<replaceable>IQN-OF-TARGET</replaceable>",
      "user": "<replaceable>CHAP-USERNAME</replaceable>",
      "password": "<replaceable>CHAP-PASSWORD</replaceable>",
      "autoLogin": true
    }
  ]
}
  </screen>
    </example>
    <para>
      This section contains the following configuration keys:
    </para>
    <variablelist>
      <varlistentry>
        <term>initiatorName</term>
        <listitem>
          <para>
            The iSCSI initiator name (IQN) of the client system. Must follow the iSCSI naming
            convention. For example, <literal>iqn.2025-05.com.suse:agama-client</literal>.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>targets</term>
        <listitem>
          <para>
            An array of target definitions to connect to. Each target supports the following
            fields:
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <literal>address</literal>: IP address or host name of the iSCSI target.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>port</literal>: TCP port of the target. Default is
                <literal>3260</literal>.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>target</literal>: IQN of the iSCSI target to connect to.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>user</literal> and <literal>password</literal>: CHAP authentication
                credentials, if required by the target.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>autoLogin</literal>: Boolean flag indicating whether to automatically log
                in to the target during boot.
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section xml:id="dasd-devices-configuration-agama-installation-profile">
    <title>DASD devices configuration for an &agama; installation profile</title>
    <para>
      The <literal>dasd</literal> section is used to activate, configure, or format Direct Access
      Storage Device (DASD) volumes on &ibm; Z (s390x) systems. It is relevant only when installing
      &suse; on mainframe hardware.
    </para>
    <example>
      <title>Sample <literal>dasd</literal> devices configuration for an &agama; installation profile</title>
<screen>
"dasd": {
  "devices": [
    {
      "channel": "<replaceable>0.0.1234</replaceable>",
      "state": "active",
      "format": true,
      "diag": false
    },
    {
      "channel": "<replaceable>0.0.5678</replaceable>",
      "state": "offline"
    }
  ]
}
  </screen>
    </example>
    <para>
      This section defines the following keys:
    </para>
    <variablelist>
      <varlistentry>
        <term>devices</term>
        <listitem>
          <para>
            A list of DASD devices to configure. Each device is represented as an object with the
            following fields:
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <literal>channel</literal>: Required. The device channel path, typically in the
                format <literal>0.0.xxxx</literal>.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>state</literal>: Optional. Indicates whether the device should be made
                <literal>active</literal> or put <literal>offline</literal>. Defaults to
                <literal>active</literal>.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>format</literal>: Optional. Boolean indicating whether the device should
                be formatted. If unspecified, formatting happens only if necessary.
              </para>
            </listitem>
            <listitem>
              <para>
                <literal>diag</literal>: Optional. Boolean indicating whether the device should
                have its diagnostic (diag) flag set. If unspecified, the existing state is
                preserved.
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
</topic>
