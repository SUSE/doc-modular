<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: https://github.com/SUSE/doc-sleha/blob/main/xml/ha_bootstrap_install.xml -->
<topic xml:id="ha-crmsh-overview-init-script"
 role="reference" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
   <title>Overview of the <command>crm cluster init</command> script</title>
    <meta name="maintainer" content="tahlia.richardson@suse.com" its:translate="no"/>
    <abstract>
      <para>
       The <command>crm cluster init</command> command starts a script that defines the basic
       parameters needed for cluster communication, resulting in a running one-node cluster.
      </para>
    </abstract>
  </info>
  <para>
    The script checks and configures the following components:
  </para>
  <variablelist>
    <varlistentry>
      <term>NTP</term>
      <listitem>
        <para>
          Checks if &chrony; is configured to start at boot time. If not, a message appears.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>SSH</term>
      <listitem>
        <para>
          Detects or generates SSH keys for passwordless login between cluster nodes.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>&csync;</term>
      <listitem>
        <para>
          Configures &csync; to replicate configuration files across all nodes in a cluster.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>&corosync;</term>
      <listitem>
        <para>
          Configures the cluster communication system.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>&sbd;/watchdog</term>
      <listitem>
        <para>
          Checks if a watchdog exists and asks you whether to configure &sbd; as the
          node fencing mechanism.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>Virtual floating IP</term>
      <listitem>
        <para>
          Asks you whether to configure a virtual IP address for cluster administration with &hawk;.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>Firewall</term>
      <listitem>
        <para>
          Opens the ports in the firewall that are needed for cluster communication.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>Cluster name</term>
      <listitem>
        <para>
          Defines a name for the cluster, by default <systemitem>hacluster</systemitem>. This is
          optional for a basic cluster but is required when using &dlm;.
          <!-- (ha_geo pattern not available (yet?) in SLE16) A unique cluster name is
          also useful for &geo; clusters. Usually, the cluster name reflects the geographical
          location and makes it easier to distinguish a site inside a &geo; cluster.-->
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>&qdevice;/&qnet;</term>
      <listitem>
        <para>
          Asks you whether to configure &qdevice;/&qnet; to participate in quorum decisions.
          We recommend using &qdevice; and &qnet; for clusters with an even number of nodes,
          and especially for two-node clusters.
        </para>
      </listitem>
    </varlistentry>
  </variablelist>
  <note>
    <title>&pace; default settings</title>
    <para>
      The options set by the <command>crm cluster init</command> script might not be the same
      as the &pace; default settings. You can check which settings the script changed in
      <filename>/var/log/crmsh/crmsh.log</filename>. Any options set during the bootstrap
      process can be modified later with &crmsh;.
    </para>
  </note>
  <note>
    <title>Cluster configuration for different platforms</title>
    <para>
      The <command>crm cluster init</command> script detects the system environment (for example,
      &ms; Azure) and adjusts certain cluster settings based on the profile for that environment.
      For more information, see the file <filename>/etc/crm/profiles.yml</filename>.
    </para>
  </note>
</topic>
