<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
    <!ENTITY snapper "Snapper">
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="snapper-system-rollback-after-rollback"
 role="reference" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
   <title>Snapshots after a rollback</title><!-- can be changed via merge in the assembly -->
    <!--add author's email address-->
    <meta name="maintainer" content="daria.vladykina@suse.com" its:translate="no"/>
    <abstract><!-- can be changed via merge in the assembly -->
      <para>
        When you perform a rollback, &snapper; reverts the changes
        that were made after the snapshot was created, and the file system
        returns to the state it was in when the snapshot was taken.
      </para>
    </abstract>
  </info>
  <section xml:id="snapper-snapshots-after-rollback">
    <title>&snapper; snapshots following a rollback</title>
    <para>
      Before a rollback is performed, &snapper; creates a snapshot of the
      running file system. The <literal>Description</literal> references 
      the ID of the snapshot that was restored in the rollback.
    </para>
    <para>Snapshots created by rollbacks receive the value <literal>number</literal>
      for the <literal>Cleanup</literal> attribute. The rollback snapshots are
      therefore automatically deleted when the set number of snapshots is reached.
      <!--Refer to Section 10.7, “Automatic snapshot clean-up” for details.-->
      If the snapshot contains important data, extract the data from the snapshot
      before it is removed. 
      </para>
   </section>
   <section xml:id="snapper-rollback-snapshot-example">
    <title>Example of a rollback snapshot</title>
    <para>
      For example, after a fresh installation, the following snapshots are
      available on the system:
     </para>
 <screen>
 &prompt.root;<command>snapper</command> --iso list
 Type   | # |     | Cleanup | Description           | Userdata
 -------+---+ ... +---------+-----------------------+--------------
 single | 0 |     |         | current               |
 single | 1 |     |         | first root filesystem |
 single | 2 |     | number  | after installation    | important=yes
 </screen>
     <para>
      After running <command>sudo snapper rollback</command>, snapshot
      <literal>3</literal> is created and contains the state of the system
      before the rollback was executed. Its <literal>Description</literal>
      references snapshot <literal>1</literal> as the one used for the rollback.
      Snapshot <literal>4</literal> is the new default Btrfs subvolume and 
      thus the system after a reboot.
     </para>
 <screen>
 &prompt.root;<command>snapper</command> --iso list
 Type   | # |     | Cleanup | Description           | Userdata
 -------+---+ ... +---------+-----------------------+--------------
 single | 0 |     |         | current               |
 single | 1 |     | number  | first root filesystem |
 single | 2 |     | number  | after installation    | important=yes
 single | 3 |     | number  | rollback backup of #1 | important=yes
 single | 4 |     |         |                       |
 </screen>
  </section>
</topic>
