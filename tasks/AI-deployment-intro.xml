<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<topic xml:id="ai-deployment"
 role="concept" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Overview of the &productname; installation</title>
    <meta name="maintainer" content="tbazant@suse.com" its:translate="no"/>
    <abstract>
      <para>
        &productname; is a complex product consisting of multiple software
        layers and components. This topic outlines the complete workflow of
        deploying and installing all &productname;'s dependencies as well as
        installing &productname; itself. You can also find references to
        recommended hardware and software requirements, as well as steps to take
        after the product installation.
      </para>
    </abstract>
  </info>
  <tip>
    <title>Hardware and software requirements</title>
    <para>
      For hardware, software and application-specific requirements, refer to
      <link
      xlink:href="&dsc;/suse-ai/1.0/html/AI-requirements/index.html">&productname;
      requirements</link>.
    </para>
  </tip>
  <section xml:id="suse-ai-deploy-require">
    <title>Prerequisites for customers who are not already running a Rancher cluster</title>
    <procedure>
      <step>
        <para>
          Purchase the &rancherprime; entitlement.
        </para>
      </step>
      <step>
        <para>
          Install
          <link xlink:href="https://ranchermanager.docs.rancher.com/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster">&ranchermanager;</link>.
        </para>
      </step>
      <step>
        <para>
          Deploy and configure
          <link xlink:href="&dsc;/external-tree/en-us/cloudnative/rancher-manager/v2.8/en/integrations/neuvector/overview.html">&ssecurity;</link>.
        </para>
      </step>
      <step>
        <para>
          Deploy and configure
          <link xlink:href="https://docs.stackstate.com/6.0/get-started/k8s-suse-rancher-prime">&sobservability;</link>.
        </para>
      </step>
    </procedure>
  </section>
  <section xml:id="suse-ai-deploy-prepare">
    <title>Cluster preparation</title>
    <procedure>
      <step>
        <para>
          Install and register &slm; 6.0 or later on each &rke2; cluster node.
          Refer to <link xlink:href="&dsc;/sle-micro/6.0/"/> for details.
        </para>
      </step>
      <step>
        <para>
          Install the &nvidia; GPU driver on cluster nodes with GPUs. Refer to
          <link xlink:href="&dsc;/suse-ai/1.0/html/NVIDIA-GPU-driver-on-SL-Micro/index.html"/>
          for details.
        </para>
      </step>
      <step performance="optional">
        <para>
          Install the &nvidia;container toolkit on GPU enabled systems. Refer to
          <link
          xlink:href="&dsc;/suse-ai/1.0/html/NVIDIA-GPU-driver-on-SL-Micro/index.html#nvidia-gpu-validation"/>
          for details.
        </para>
      </step>
      <step>
        <para>
          Install &rke2; &kube; distribution on the cluster nodes. Refer to
          <link xlink:href="https://docs.rke2.io/"/> for details.
        </para>
      </step>
      <step>
        <para>
          Connect the &rke2; cluster to &ranchermanager;. Refer to
          <link
          xlink:href="https://ranchermanager.docs.rancher.com/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/register-existing-clusters"/>
          for details.
        </para>
      </step>
      <step>
        <para>
          Configure the GPU enabled nodes so that the &productname; containers
          are assigned to Pods that run on nodes equipped with &nvidia; GPU
          hardware. Find more details assigning Pods to nodes in
          <link
          xlink:href="https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/"/>.
<!-- TODO tbazant: add link to node assignment maybe?
-->
        </para>
      </step>
      <step>
        <para>
          Configure &ssecurity; to scan the nodes used for &productname;.
          Although this step is not required, we strongly encourage it to ensure
          the security in production environment.
        </para>
      </step>
      <step>
        <para>
          Configure &sobservability; to observe the nodes used for &productname;
          application.
        </para>
      </step>
<!-- TODO tbazant: consider inserting elswhere or removing
      <step>
        <para>
          Open the &ranchermanager; Web UI in your Web browser, log in with your
          credentials, and navigate to the <guimenu>Application
          Collection</guimenu>.
        </para>
      </step>
      <step>
        <para>
          From the list of available applications, select &productname;. The
          <guimenu>Application Collection</guimenu> performs the entitlement
          check and when successful, you are given access to &productname;
          &helm; charts and container images.
        </para>
      </step>
      <step>
        <para>
          Click the <guimenu>Install</guimenu> button in the top right. The
          installer guides you through the installation steps, where you can
          specify custom &helm; options, for example. On the last installer
          page, confirm the installation with <guimenu>Install</guimenu> at the
          bottom right.
        </para>
      </step>
-->
    </procedure>
  </section>
  <section xml:id="suse-ai-deploy-suse-ai">
    <title>&productname; installation</title>
    <para>
      &productname; is being delivered as a set of components that you can
      combine to meet specific use cases. This provides extraordinary
      flexibility but means that there is not a single &helm; chart that
      installs the whole stack, for example, for using the &owui; chatbot style
      application. To enable the full integrated stack, you need to deploy
      multiple applications in sequence. The applications with the fewest
      dependencies must be installed first, while depending applications after
      their dependencies have been installed into the cluster.
    </para>
    <procedure>
      <step>
        <para>
          Purchase the &productname; entitlement. It is a separate entitlement
          from &rancherprime;.
        </para>
      </step>
      <step>
        <para>
          Access &productname; via the &rancherappco; at
          <link
          xlink:href="https://apps.rancher.io/"/> to perform the
          check for the &productname; entitlement.
        </para>
      </step>
      <step>
        <para>
          If the entitlement check is successful, you are given access to the
          &productname;-related &helm; charts and container images, and can
          deploy directly from the &rancherappco;.
        </para>
        <tip>
          <para>
            Any overrides to the default values in the &helm; charts&mdash;such
            as &owui; password and URL customizations&mdash;occur at this step.
          </para>
        </tip>
      </step>
<!-- TODO tbazant: revisit Milvus related parts when available
      <step>
        <para>
          Install &apulsar;.
        </para>
      </step>
      <step>
        <para>
          Install &etcd;.
        </para>
      </step>
      <step>
        <para>
          Install &minio;.
        </para>
      </step>
      <step>
        <para>
          Install &milvus;.
        </para>
      </step>
-->
      <step performance="optional">
        <para>
          Install &ollama; as described in <xref linkend="ollama-installing"/>.
        </para>
      </step>
      <step>
        <para>
          Install &owui; as described in <xref linkend="owui-installing"/>.
        </para>
      </step>
    </procedure>
  </section>
  <section xml:id="suse-ai-deploy-post">
    <title>Steps after the installation is complete</title>
    <procedure>
      <step>
        <para>
          Log in to &productname; &owui; using the default credentials.
        </para>
      </step>
      <step>
        <para>
          After you have logged in, update the administrator password for
          &productname;.
        </para>
      </step>
      <step>
        <para>
          From the available language models, configure the one you prefer.
          Optionally, install a custom language model.
        </para>
      </step>
      <step>
        <para>
          Configure user management RBAC and SSO
          (https://docs.openwebui.com/tutorials/features/sso)
<!-- TODO tbazant: add link to RBAC
-->
        </para>
      </step>
      <step>
        <para>
          Configure RAG (Retrieval Augmented Generation) to include content
          relevant to the customer use case in results
          (https://docs.openwebui.com/tutorials/features/rag)
<!-- TODO tbazant: add link to RAG
-->
        </para>
      </step>
    </procedure>
  </section>
</topic>
