<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>

<!-- refers to legacy doc: https://github.com/SUSE/doc-sleha/blob/main/xml/ha_managing_resources.xml -->

<topic xml:id="ha-resources-editing-groups"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Editing resource groups</title>
    <meta name="maintainer" content="tahlia.richardson@suse.com" its:translate="no"/>
    <abstract>
      <para>
        You can edit resource groups with the &crmshell; (&crmsh;) or with &hawk;.
      </para>
    </abstract>
  </info>

  <variablelist role="tabs">
    <varlistentry>
      <term>&crmshell;</term>
      <listitem>
        <para>
          You can perform this procedure on any node in the cluster.
        </para>
        <procedure>
          <step>
            <para>
              Log in either as the &rootuser; user or as a user with <command>sudo</command>
              privileges.
            </para>
          </step>
          <step>
            <para>
              To remove a resource from a group, use the following command:
            </para>
<screen>&prompt.user;<command>sudo crm configure modgroup <replaceable>GROUP</replaceable> remove <replaceable>RESOURCE</replaceable></command></screen>
          </step>
          <step>
            <para>
              To add a resource to a group, use one of the following commands:
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  By default, a new resource is appended to the end of the group, meaning it starts
                  last and stops first:
                </para>
<screen>&prompt.user;<command>sudo crm configure modgroup <replaceable>GROUP</replaceable> add <replaceable>RESOURCE</replaceable></command></screen>
              </listitem>
              <listitem>
                <para>
                  Alternatively, you can use <option>before</option> or <option>after</option> to
                  add a new resource to a specific position in the group's order:
                </para>
<screen>&prompt.user;<command>sudo crm configure modgroup <replaceable>GROUP</replaceable> add <replaceable>RESOURCE0</replaceable> before <replaceable>RESOURCE1</replaceable></command></screen>
<screen>&prompt.user;<command>sudo crm configure modgroup <replaceable>GROUP</replaceable> add <replaceable>RESOURCE2</replaceable> after <replaceable>RESOURCE1</replaceable></command></screen>
              </listitem>
            </itemizedlist>
          </step>
          <step>
            <para>
              To change the order of resources that are already in a group, use the following command:
            </para>
<screen>&prompt.user;<command>sudo crm configure edit <replaceable>GROUP</replaceable></command></screen>
            <para>
              This command opens the CIB representation of the group in a text editor. You can make
              multiple changes to the group's configuration, then save and exit.
            </para>
            <important role="compact">
              <para>
                Don't use this command to rename a group. The change won't apply to related objects.
              </para>
            </important>
          </step>
          <step>
            <para>
              To rename a group, use the following command:
            </para>
<screen>&prompt.user;<command>sudo crm configure rename <replaceable>OLD_NAME</replaceable> <replaceable>NEW_NAME</replaceable></command></screen>
            <para>
              This also changes the group's name in related objects such as constraints
              and clones.
            </para>
          </step>
        </procedure>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>&hawk;</term>
      <listitem>
        <para>
          You can access the &hawk; Web interface from any machine that has network access to
          the nodes.
        </para>
        <procedure>
          <step>
            <para>
              In a Web browser, go to
              <literal>https://<replaceable>HAWKSERVER</replaceable>:7630/</literal>
              and log in.
            </para>
          </step>
          <step>
            <para>
              From the left navigation bar, select <menuchoice><guimenu>Configuration</guimenu>
              <guimenu>Edit Configuration</guimenu></menuchoice>.
            </para>
          </step>
          <step>
            <para>
              Find the group you want to edit. In the <guimenu>Operations</guimenu> column,
              click the <guimenu>Edit</guimenu> icon.
            </para>
          </step>
           <step>
            <para>
              At the top of the configuration screen, you can select the following operations:
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  <guimenu>Create</guimenu> a new group.
                </para>
              </listitem>
              <listitem>
                <para>
                  <guimenu>Rename</guimenu> the group.
                </para>
              </listitem>
              <listitem>
                <para>
                  <guimenu>Delete</guimenu> the group.
                </para>
              </listitem>
            </itemizedlist>
          </step>
          <step>
            <para>
              In the list of <guimenu>Children</guimenu>, you can make the following changes:
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  Add resources to the group.
                </para>
              </listitem>
              <listitem>
                <para>
                  Remove resources from the group.
                </para>
              </listitem>
              <listitem>
                <para>
                  Drag and drop resources into a different order using the icons on the right.
                </para>
              </listitem>
            </itemizedlist>
          </step>
          <step>
            <para>
              To add a new meta attribute, select an entry from the drop-down list.
            </para>
          </step>
          <step>
            <para>
              Click <guimenu>Apply</guimenu> to confirm the changes.
            </para>
            <para>
              A message at the top of the screen shows if the action was successful.
            </para>
          </step>
        </procedure>
      </listitem>
    </varlistentry>
  </variablelist>
</topic>
