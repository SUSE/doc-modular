<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>

<!-- refers to legacy doc: https://github.com/SUSE/doc-sleha/blob/main/xml/ha_managing_resources.xml -->

<topic xml:id="ha-resources-editing"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Editing cluster resources</title>
    <meta name="maintainer" content="tahlia.richardson@suse.com" its:translate="no"/>
    <abstract>
      <para>
        You can edit resources with the &crmshell; (&crmsh;) or with &hawk;.
      </para>
    </abstract>
  </info>

  <para>
   If you have created a resource, you can edit its configuration at any time
   by adjusting parameters, operations or meta attributes as needed.
  </para>

  <variablelist role="tabs">
    <varlistentry>
      <term>&crmshell;</term>
      <listitem>
        <para>
          You can perform this procedure on any node in the cluster.
        </para>
        <procedure>
          <step>
            <para>
              Log in either as the &rootuser; user or as a user with <command>sudo</command>
              privileges.
            </para>
          </step>
          <step>
            <para>
              crm configure monitor (need 2 monitor ops for promotable clones!)
            </para>
          </step>
          <step>
            <para>
              crm resource meta set/delete | param set/delete | utilization set/delete
            </para>
          </step>
          <step>
            <para>
              crm configure edit
            </para>
<screen>&prompt.user;<command>sudo crm configure edit <replaceable>RESOURCE</replaceable></command></screen>
            <para>
              This command opens the CIB representation of the resource in a text editor.
              You can make multiple changes to the resource's configuration, then save and exit.
            </para>
            <important role="compact">
              <para>
                Don't use this command to rename a resource. The change won't apply to related objects.
              </para>
            </important>
          </step>
          <step>
            <para>
              To rename a resource, first stop the resource, then use the following command:
            </para>
<screen>&prompt.user;<command>sudo crm configure rename <replaceable>OLD_NAME</replaceable> <replaceable>NEW_NAME</replaceable></command></screen>
            <para>
              This also changes the resource's name in related objects such as constraints,
              groups and clones.
            </para>
          </step>
        </procedure>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>&hawk;</term>
      <listitem>
        <para>
          You can access the &hawk; Web interface from any machine that has network access to
          the nodes.
        </para>
        <procedure>
          <step>
            <para>
              In a Web browser, go to
              <literal>https://<replaceable>HAWKSERVER</replaceable>:7630/</literal>
              and log in.
            </para>
          </step>
          <step>
            <para>
              From the left navigation bar, select <menuchoice><guimenu>Configuration</guimenu>
              <guimenu>Edit Configuration</guimenu></menuchoice>.
            </para>
          </step>
          <step>
            <para>
              Find the resource you want to edit. In the <guimenu>Operations</guimenu> column,
              click the <guimenu>Edit</guimenu> icon.
            </para>
          </step>
           <step>
            <para>
              At the top of the configuration screen, you can select the following operations:
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  <guimenu>Copy</guimenu> the resource.
                </para>
              </listitem>
              <listitem>
                <para>
                  <guimenu>Rename</guimenu> the resource. The resource must be stopped before
                  you perform this operation.
                </para>
              </listitem>
              <listitem>
                <para>
                  <guimenu>Delete</guimenu> the resource.
                </para>
              </listitem>
            </itemizedlist>
          </step>
          <step>
            <para>
              To add a new parameter, operation or meta attribute, select an item from one of the
              drop-down lists.
            </para>
          </step>
          <step>
            <para>
              To edit a value in the <guimenu>Operations</guimenu> category, click the
              <guimenu>Edit</guimenu> icon. A new window opens. Enter a different value for the
              operation, then click <guimenu>Apply</guimenu>.
            </para>
          </step>
          <step>
            <para>
              Click <guimenu>Apply</guimenu> to confirm the changes.
            </para>
            <para>
              A message at the top of the screen shows if the action was successful.
            </para>
          </step>
        </procedure>
      </listitem>
    </varlistentry>
  </variablelist>

  <itemizedlist>
    <title>For more information</title>
    <listitem>
      <para>
        <command>crm configure edit --help</command>
      </para>
    </listitem>
    <listitem>
      <para>
        <command>crm configure monitor --help</command>
      </para>
    </listitem>
    <listitem>
      <para>
        <command>crm configure rename --help</command>
      </para>
    </listitem>
    <listitem>
      <para>
        <command>crm resource meta --help</command>
      </para>
    </listitem>
    <listitem>
      <para>
        <command>crm resource param --help</command>
      </para>
    </listitem>
    <listitem>
      <para>
        <command>crm resource utilization --help</command>
      </para>
    </listitem>
  </itemizedlist>
</topic>
