<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>

<!-- refers to legacy doc: https://github.com/SUSE/doc-sleha/blob/main/xml/ha_managing_resources.xml -->

<topic xml:id="ha-resources-grouping-with-tags"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Grouping resources with tags</title>
    <meta name="maintainer" content="tahlia.richardson@suse.com" its:translate="no"/>
    <abstract>
      <para>
   Tags are a way to refer to multiple resources at once, without creating any
   colocation or ordering relationship between them. This can be useful for
   grouping conceptually related resources. For example, if you have
   several resources related to a database, create a tag called
   <literal>databases</literal> and add all resources related to the
   database to this tag. This allows you to stop or start them all with a
   single command.
  </para>
  <para>
   Tags can also be used in constraints. For example, the following
   location constraint <literal>loc-db-prefer</literal> applies to the set
   of resources tagged with <literal>databases</literal>:
  </para>
<screen>location loc-db-prefer databases 100: &node1;</screen>
  <para>
   You can create tags using either &hawk; or &crmsh;.
  </para>
    </abstract>
  </info>

<section xml:id="sec-conf-hawk2-rsc-tag">
   <title>Grouping resources by using tags with &hawk;</title>
   <procedure xml:id="pro-conf-hawk2-tag">
    <title>Adding a tag</title>
    <step>
     <para>
      Log in to &hawk;:
     </para>
 <screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
    </step>
    <step>
     <para>
      From the left navigation bar, select <menuchoice>
      <guimenu>Configuration</guimenu> <guimenu>Add
      Resource</guimenu> <guimenu>Tag</guimenu> </menuchoice>.
     </para>
    </step>
    <step>
     <para>
      Enter a unique <guimenu>Tag ID</guimenu>.
     </para>
    </step>
    <step>
     <para>
      From the <guimenu>Objects</guimenu> list, select the resources you want to
      refer to with the tag.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>Create</guimenu> to finish the configuration. A message at
      the top of the screen shows if the action has been successful.
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-ha-manual-config-tag">
   <title>Grouping resources by using tags with &crmsh;</title>
   <para>
    For example, if you have
    several resources related to a database, create a tag called
    <literal>databases</literal> and add all resources related to the
    database to this tag:
   </para>
 <screen>&prompt.root;<command>crm configure tag databases: db1 db2 db3</command></screen>
   <para>
    This allows you to start them all with a single command:
   </para>
 <screen>&prompt.root;<command>crm resource start databases</command></screen>
   <para>
    Similarly, you can stop them all too:
   </para>
 <screen>&prompt.root;<command>crm resource stop databases</command></screen>
  </section>
</topic>
