<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>

<!-- refers to legacy doc: https://github.com/SUSE/doc-sleha/blob/main/xml/ha_managing_resources.xml -->

<topic xml:id="ha-resources-removing"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Removing cluster resources</title>
    <meta name="maintainer" content="tahlia.richardson@suse.com" its:translate="no"/>
    <abstract>
      <para>
   To remove a resource from the cluster, follow either the
   &hawk; or &crmsh; procedure below to avoid configuration errors.
  </para>
    </abstract>
  </info>

<section xml:id="sec-conf-hawk2-manage-remove">
  <title>Removing cluster resources with &hawk;</title>
  <procedure xml:id="pro-hawk2-rsc-rm">
   <title>Removing a cluster resource</title>
   <step>
    <para>
     Log in to &hawk;:
    </para>
<screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para>
     Clean up the resource on all nodes as described in
     <xref linkend="pro-hawk2-clean"/>.
    </para>
   </step>
   <step>
    <para>
     Stop the resource:
    </para>
    <substeps>
     <step>
      <para>
       From the left navigation bar, select <menuchoice><guimenu>Monitoring</guimenu>
       <guimenu>Status</guimenu></menuchoice>. The list
       of <guimenu>Resources</guimenu> also shows the
       <guimenu>Status</guimenu>.
      </para>
     </step>
     <step>
      <para>
       In the <guimenu>Operations</guimenu> column, click the
       <guimenu>Stop</guimenu> button next to the resource.
      </para>
     </step>
     <step>
      <para>
       To continue, confirm the message that appears.
      </para>
      <para>
       The <guimenu>Status</guimenu> column reflects the change when the
       resource is stopped.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Delete the resource:
    </para>
    <substeps>
     <step>
      <para>
       From the left navigation bar, select
       <menuchoice><guimenu>Configuration</guimenu> <guimenu>Edit
       Configuration</guimenu></menuchoice>.
      </para>
     </step>
     <step>
      <para>
       In the list of <guimenu>Resources</guimenu>, go to the respective
       resource. From the <guimenu>Operations</guimenu> column, click the
       <guimenu>Delete</guimenu> icon next to the resource.
      </para>
     </step>
     <step>
      <para>
       To continue, confirm the message that appears.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>
  </section>

  <section xml:id="sec-ha-manual-config-remove">
   <title>Removing cluster resources with &crmsh;</title>
   <procedure>
    <title>Removing a cluster resource with &crmsh;</title>
    <step>
     <para>
      Log in as &rootuser; and start the <command>crm</command>
      interactive shell:
     </para>
 <screen>&prompt.root;<command>crm</command></screen>
    </step>
    <step>
     <para>
      Get a list of your resources:
     </para>
 <screen>&prompt.root;<command>crm resource status</command>
Full List of Resources:
  * admin-ip     (ocf:heartbeat:IPaddr2):     Started
  * stonith-sbd  (stonith:external/sbd):      Started
  * nfsserver    (ocf:heartbeat:nfsserver):   Started</screen>
    </step>
    <step>
      <para>
        Stop the resource you want to remove:
      </para>
<screen>&prompt.root;<command>crm resource stop <replaceable>RESOURCE</replaceable></command></screen>
    </step>
    <step>
     <para>
      Delete the resource:
     </para>
 <screen>&prompt.root;<command>crm configure delete <replaceable>RESOURCE</replaceable></command></screen>
    </step>
   </procedure>
  </section>
</topic>
