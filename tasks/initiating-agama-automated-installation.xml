<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="initiating-agama-automated-installation"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Initiating automated installation using &agama;</title>
    <!-- can be changed via merge
      in the assembly -->
    <!-- add author's e-mail -->
    <meta name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
    <abstract>
      <!-- can be changed via merge in the assembly -->
      <para>
        This topic guides you through starting an automated installation using &agama;. You can
        initiate the process either by specifying boot parameters or by using the &agama;
        command-line interface.
      </para>
    </abstract>
  </info>
  <section xml:id="initiating-agama-unattended-installation">
    <title>Initiating the unattended installation</title>
    <procedure xml:id="proc-initiating-agama-unattended-installation">
      <title>Initiating the unattended installation</title>
      <step>
        <para>
          Start the installation using kernel boot parameters.
        </para>
        <para>
          Add the <literal>inst.auto</literal> parameter to the kernel command line to specify the
          location of the &agama; profile:
        </para>
<screen>&prompt.sudo;<command>inst.auto=<replaceable>http://example.net/profile.json</replaceable></command></screen>
        <para>
          This method is suitable for PXE boot setups, custom ISO builds, or cloud-init workflows.
        </para>
      </step>
      <step>
        <para>
          If you want to access the &agama; CLI later, you need to log in as root using a text
          console. For that purpose, set a password using the
          <parameter>live.password=<replaceable>PASSWORD</replaceable></parameter> boot parameter.
        </para>
      </step>
      <step>
        <para>
          Log in as root through a text console, using the password set earlier by editing the boot
          parameters. If using a software such as the Virtual Machine Manager, use the
          <guilabel>Send Keys</guilabel> menu to send the signal
          <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>F1</keycap></keycombo> for a
          text console. To return to a graphical console, use
          <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>F2</keycap></keycombo> or
          <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>F7</keycap></keycombo>.
        </para>
        <para>
          After logging in as root using a text console, you will have the &agama; CLI available.
        </para>
      </step>
      <step>
        <para>
          Start the installation using the &agama; CLI.
        </para>
        <substeps>
          <step>
            <para>
              Load the profile with the following command:
            </para>
<screen>&prompt.root;<command>agama config load <replaceable>profile.json</replaceable></command></screen>
          </step>
          <step>
            <para>
              Edit the profile configuration with the following command:
            </para>
<screen>&prompt.root;<command>agama config edit <replaceable>profile.json</replaceable></command></screen>
          </step>
          <step>
            <para>
              Validate the profile:
            </para>
<screen>&prompt.root;<command>agama config validate <replaceable>profile.json</replaceable></command></screen>
          </step>
          <step>
            <para>
              Initiate the installation with the following command:
            </para>
<screen>&prompt.root;<command>agama install</command></screen>
          </step>
          <step>
            <para>
              Monitor the installation with the following command:
            </para>
<screen>&prompt.root;<command>agama monitor</command></screen>
          </step>
          <step>
            <para>
              Finish the installation with the following command:
            </para>
<screen>&prompt.root;<command>agama finish</command></screen>
          </step>
        </substeps>
      </step>
    </procedure>
  </section>
</topic>
