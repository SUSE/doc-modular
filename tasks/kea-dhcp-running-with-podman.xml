<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<topic xml:id="kea-dhcp-running-with-podman" xml:lang="en"
 role="task"
 xmlns="http://docbook.org/ns/docbook" version="5.1"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink">
  <info>
    <title>Running the &kea; DHCP server using &podman;</title>
    <abstract>
      <para>
        &kea; is an open-source DHCP server that supports both DHCPv4 and
        DHCPv6 protocols. It features, for example, IPv6 prefix delegation,
        host reservations optionally stored in a database, PXE boot, and
        high-availability setup.
      </para>
    </abstract>
  </info>
  <procedure>
    <step>
      <para>
        Identify the &kea-dhcp; server container image:
      </para>
<screen>&prompt.root;<command>podman search kea</command>
[...]
registry.opensuse.org/suse/alp/workloads/tumbleweed_containerfiles/suse/alp/workloads/kea</screen>
    </step>
    <step>
      <para>
        Pull the image from the registry:
      </para>
<screen>&prompt.root;<command>podman pull \
registry.opensuse.org/suse/alp/workloads/tumbleweed_containerfiles/suse/alp/workloads/kea:latest</command></screen>
    </step>
    <step>
      <para>
        Install all required parts of the &kea; workload:
      </para>
<screen>&prompt.root;<command>podman container runlabel install \
registry.opensuse.org/suse/alp/workloads/tumbleweed_containerfiles/suse/alp/workloads/kea:latest</command></screen>
      <para>
        The previous command installs:
      </para>
      <itemizedlist>
        <listitem>
          <para>
            Default configuration files in the <filename>/etc/kea</filename>
            directory
          </para>
        </listitem>
        <listitem>
          <para>
            The <command>keactrl</command> wrapper in the
            <filename>/usr/local/bin</filename> directory
          </para>
        </listitem>
        <listitem>
          <para>
            &systemd; service files for the dhcp4 and dhcp6 containers in the
            <filename>/etc/systemd/system/</filename> directory
          </para>
        </listitem>
      </itemizedlist>
    </step>
    <step>
      <para>
        Run the &kea; DHCP server. You can run it either using &systemd; unit
        files, or manually.
      </para>
      <substeps>
        <step>
          <para>
            To run &kea; as a &systemd; service, use one the following
            commands:
          </para>
<screen>&prompt.root;<command>systemctl start kea-dhcp4.service</command></screen>
          <para>
            Or, for DHCPv6:
          </para>
<screen>&prompt.root;<command>systemctl start kea-dhcp6.service</command></screen>
        </step>
        <step>
          <para>
            To run &kea; manually, use one of the following commands:
          </para>
<screen>&prompt.root;<command>podman container runlabel run \
registry.opensuse.org/suse/alp/workloads/tumbleweed_containerfiles/suse/alp/workloads/kea:latest</command></screen>
          <para>
            Or, for DHCPv6:
          </para>
<screen>&prompt.root;<command>podman container runlabel run_dhcp6 \
registry.opensuse.org/suse/alp/workloads/tumbleweed_containerfiles/suse/alp/workloads/kea:latest</command></screen>
        </step>
      </substeps>
    </step>
  </procedure>
</topic>
