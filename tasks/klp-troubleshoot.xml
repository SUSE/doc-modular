<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<topic xml:id="klp-troubleshoot"
 role="concept" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Troubleshooting &klp; issues</title>
    <meta name="maintainer" content="dpopov@suse.com" its:translate="yes"/>
  </info>
  <section xml:id="sec-klp-lifecycle">
    <title>Checking the live patch expiration date</title>
    <para>
      Ensure the <package>lifecycle-data-sle-module-live-patching</package> 
      package is installed. Then, run the <command>zypper lifecycle</command> 
      command. The output shows expiration dates for live patches in the 
      <literal>Package end of support if different from product</literal> section.
    </para>
    <para>
      Every live patch receives updates for 13 months from the release of the 
      underlying kernel package. The Maintained kernels, patch updates, and 
      lifecycle page lets you check expiration dates. Use this page to check dates 
      based on the running kernel version without installing the product 
      extension:
      <link xlink:href="https://www.suse.com/products/live-patching/current-patches/"/>
    </para>
  </section>
  <section xml:id="sec-klp-man-patch-check">
    <title>Checking installed kernel live patch packages</title>
    <para>
      A <package>kernel-livepatch-*</package> package is installed for the 
      running kernel if the kernel is live-patched.  Use the 
      <command>zypper se --details kernel-livepatch-*</command> command to check 
      which kernel live patch packages are installed.
     </para>
     </section>
  <section xml:id="sec-klp-man-patch-prevent-reboot">
    <title>Preventing a reboot</title>
    <para>
      When you install the <package>kernel-default</package> package, the update 
      manager prompts you to reboot the system. To prevent this, filter kernel 
      updates from the patching operation. You can do this by adding package locks 
      with Zypper. &susemgr; also lets you filter channel contents. See Live 
      Patching with SUSE Manager for more information:
      <link xlink:href="https://documentation.suse.com/external-tree/en-us/suma/4.1/suse-manager/administration/live-patching.html"/>
     </para>
  </section>
  <section xml:id="sec-klp-man-patch-check-status">
    <title>Checking the patching status</title>
    <para>
      Check patching status using the <command>klp status</command> command. To 
      examine installed patches, run <command>klp -v patches</command>.
     </para>
  </section>
  <section xml:id="sec-klp-man-patch-downgrade">
    <title>Downgrading a kernel patch</title>
    <para>
      If the latest live patch is problematic, downgrade it to the previous 
      version. A system with kernel warnings or kernel error traces in the system 
      log may not be suitable for downgrading. If you are unsure whether your 
      system is suitable for a patch downgrade, contact SUSE Technical Support.
    </para>
    <para>
      To downgrade the latest kernel live patch, use the 
      <command>klp downgrade</command> command. This command automatically detects 
      the latest live patch version and installs the previous one.
    </para>
  </section>
</topic>
