<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<topic xml:id="mcpo-installing"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Installing &mcpo;</title>
    <meta name="maintainer" content="tbazant@suse.com" its:translate="no"/>
    <abstract>
      <para>
        &mcp; (Model Context Protocol) is an open-source standard for connecting
        AI applications&mdash;such as &suseai;&mdash;to external systems. These
        external systems can include data sources like databases or local files,
        or tools like calculators or search engines.
      </para>

      <para>
        &mcpo; is the &mcp;-to-OpenAPI proxy server provided by &owui;. It
        solves communication compatibility issues, enables cloud and UI
        integrations, and offers increased security and scalability.
      </para>
    </abstract>
  </info>
  <section xml:id="mcpo-installing-app-details">
    <title>Details about the &mcpo; application</title>
    <para>
      Before deploying &mcpo;, it is important to know more about the supported
      configurations and documentation. The following command provides the
      corresponding details:
    </para>
<screen>helm show values oci://dp.apps.rancher.io/charts/mcpo</screen>
    <para>
      Alternatively, you can also refer to the &mcpo; &helm; chart page on the
      &sappco; site at
      <link xlink:href="https://apps.rancher.io/applications/mcpo"/>. It
      contains &mcpo; dependencies, available versions and the link to pull the
      &mcpo; container image.
    </para>
  </section>
  <section xml:id="mcpo-installing-procedure">
    <title>&mcpo; installation procedure</title>
    <procedure>
      <xi:include href="../snippets/ai-library-requirement.xml"/>
      <step>
        <para>
          Create a <filename>mcpo_custom_overrides.yaml</filename> file to
          override the default values of the &helm; chart. The following file
          defines multiple &mcp; servers in the
          <literal>config.mcpServers</literal> section. These servers will be
          added to the &mcpo; configuration file
          <filename>config.json</filename>.
        </para>
<screen># mcpo_custom_overrides.yaml
global:
  imagePullSecrets:
  - application-collection
config:
  mcpServers:
    memory:
      command: npx
      args:
        - -y
        - "@modelcontextprotocol/server-memory"
    time:
      command: uvx
      args:
        - mcp-server-time 
        - --local-timezone=America/New_York
    fetch:
      command: uvx
      args: 
        - mcp-server-fetch
	weather:
      command: uvx
      args: 
        - --from
        - git+https://github.com/adhikasp/mcp-weather.git 
        - mcp-weather
      env:
        - ACCUWEATHER_API_KEY: your_api_key_here</screen>
      </step>
      <step>
        <para>
          After saving the override file as
          <filename>mcpo_custom_overrides.yaml</filename>, apply its
          configuration with the following command.
        </para>
<screen>&prompt.user;<command>helm upgrade --install \
  mcpo oci://dp.apps.rancher.io/charts/mcpo \
  -n <replaceable>SUSE_AI_NAMESPACE</replaceable> \
  -f <replaceable>mcpo_custom_overrides.yaml</replaceable></command></screen>
      </step>
    </procedure>
    <tip>
      <title>Installing &mcp; servers</title>
      <para>
        You can add new &mcp; servers by including them in the &mcpo;
        configuration file following the
        <link
        xlink:href="https://github.com/modelcontextprotocol/servers">Claude
        Desktop &mcp; format</link> . For detailed information on installing
        &mcp; servers with &mcpo;, refer to the
        <link xlink:href="https://github.com/open-webui/mcpo?tab=readme-ov-file#-quick-usage">
        &mcpo; Quick Usage guide</link>.
      </para>
    </tip>
  </section>
  <section xml:id="mcpo-owui-integration">
    <title>Integrating &mcpo; with &owui;</title>
    <para>
      To integrate &mcpo; with &owui;, follow these steps:
    </para>
    <procedure>
      <itemizedlist>
        <title>Requirements</title>
        <listitem>
          <xi:include href="../snippets/openwebui-requirement-admin-privileges.xml"/>
        </listitem>
      </itemizedlist>
      <step>
        <para>
          In the bottom left of the &owui; window, click your avatar icon to
          open the user menu and select <guimenu>Admin Panel</guimenu>.
        </para>
      </step>
      <step>
        <para>
          Click the <guimenu>Settings</guimenu> tab and select
          <guimenu>Tools</guimenu> from the left menu.
        </para>
      </step>
      <step>
        <para>
          Under <guimenu>Manage Tool Servers</guimenu>, click the
          <quote>plus</quote> icon to add a new connection.
        </para>
      </step>
      <step>
        <para>
          For each &mcp; server:
        </para>
        <itemizedlist>
          <listitem>
            <para>
              Provide the server URL, name and description.
            </para>
          </listitem>
          <listitem>
            <para>
              Set the visibility to <guimenu>Public</guimenu> to make it
              available to all users.
            </para>
          </listitem>
          <listitem>
            <para>
              Check if the connection is successful and confirm with
              <guimenu>Save</guimenu>.
            </para>
          </listitem>
        </itemizedlist>
        <tip>
          <para>
            The general URL format is:
            <replaceable>MCPO_URL</replaceable>/<replaceable>MCP_SERVER_NAME</replaceable>.
            For example, if &mcpo; was deployed as <literal>mcpo</literal> in
            the namespace <literal>suse-ai</literal> with the default port
            configuration, the URL is:
          </para>
<screen>http://mcpo.suse-ai.svc.cluster.local:8000/<replaceable>MCP_SERVER_NAME</replaceable></screen>
        </tip>
      </step>
    </procedure>
    <para>
      After you have configured at least one &mcp; server, you can enable them
      from the &owui; chat input field to make answers more specific. For more
      information, see
      <link xlink:href="https://documentation.suse.com/suse-ai/1.0/html/openwebui-using/index.html#openwebui-input-field-specify-system-prompt"/>.
    </para>
    <tip>
      <title>Enabling &mcp; tools by default</title>
      <para>
        To enable selected &mcp; tools by default for a model, refer to
        <link xlink:href="https://documentation.suse.com/suse-ai/1.0/html/openwebui-using/index.html#owui-enabling-default-mcp-services"/>
      </para>
    </tip>
  </section>
  <section xml:id="mcpo-upgrading" condition="deployment_standard">
    <title>Upgrading &mcpo;</title>
    <para>
      The &mcpo; chart receives application updates and updates of the &helm;
      chart templates. New versions may include changes that require manual
      steps. These steps are listed in the corresponding
      <filename>README</filename> file. All &mcpo; dependencies are updated
      automatically during a &mcpo; upgrade.
    </para>
    <para>
      To upgrade &mcpo;, identify the new version number and run the following
      command below:
    </para>
<screen>&prompt.user;<command>helm upgrade --install \
  mcpo oci://dp.apps.rancher.io/charts/mcpo \
  -n <replaceable>SUSE_AI_NAMESPACE</replaceable> \
  --version <replaceable>VERSION_NUMBER</replaceable> \
  -f <replaceable>mcpo_custom_overrides.yaml</replaceable></command></screen>
    <tip>
      <para>
        If you omit the <option>--version</option> option, &mcpo; gets upgraded
        to the latest available version.
      </para>
    </tip>
  </section>
  <section xml:id="mcpo-uninstalling">
    <title>Uninstalling &mcpo;</title>
    <para>
      To uninstall &mcpo;, run the following command:
    </para>
<screen>&prompt.user;<command>helm uninstall mcpo -n <replaceable>SUSE_AI_NAMESPACE</replaceable></command></screen>
  </section>
</topic>
