<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="networkmanager-nmcli-configure"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Configuring NetworkManager</title><!-- can be changed via merge
in the assembly -->
    <!-- add author's e-mail -->
    <meta name="maintainer" content="shalaka.harne@suse.com" its:translate="no"/>
    <abstract><!-- can be changed via merge in the assembly -->
      <para>
        <replaceable>ADD CONTENT</replaceable></para>
      </abstract>
  </info>
<section><title>Configuring an ethernet connection</title>
  
  <para>You can configure the ethernet connection.</para>
  <procedure><step><para>View the list of connection using the command:</para>
  <screen>nmcli connection show</screen>
<para>The NetworkManager creates profile for each Network Interface Controller (NIC). You must create separate profiles for each network if you want to connect the NIC to networks with different settings.</para>
<para>To create a new connection profile, run the command <command>nmcli connection add con-name <replaceable>connection-name</replaceable> ifname <replaceable>device-name</replaceable> type ethernet</command>.</para>
<para>To rename an existing profile, run the command <command>nmcli connection modify "<replaceable>ExistingConnection</replaceable>" connection.id "<replaceable>NewConnection</replaceable>"</command></para>
</step>
<step><para>View the existing network settings of the new connection profile using the command:</para>
<screen>nmcli connection show NewConnection</screen>
</step>
<step><para>Configure the IPv4 settings:</para>
<substeps>
  <step><para>To use DHCP, run the command:</para>
  <screen>nmcli connection modify <replaceable>NewConnection</replaceable> ipv4.method auto</screen></step>
  <step><para>To configure a static IPv4 address, network mask, default gateway, DNS servers, and search domain, run the command:</para>
    <screen>nmcli connection modify <replaceable>NewConnection</replaceable> ipv4.method manual ipv4.addresses 192.0.2.1/24 ipv4.gateway 192.0.2.254 ipv4.dns 192.0.2.200 ipv4.dns-search example.com</screen>
    </step>
  </substeps>
</step>
<step>
  <para>Configure the IPv6 settings:</para>
  <substeps>
    <step>
      <para>To use stateless address autoconfiguration (SLAAC), run the command:</para>
    <screen>nmcli connection modify <replaceable>NewConnection</replaceable> ipv6.method auto</screen></step>
    <step>
      <para>To configure a static IPv6 address, network mask, default gateway, DNS servers, and search domain, run the command:</para>
      <screen>nmcli connection modify Internal-LAN ipv6.method manual ipv6.addresses 2001:db8:1::fffe/64 ipv6.gateway 2001:db8:1::fffe ipv6.dns 2001:db8:1::ffbb ipv6.dns-search example.com</screen>
      </step>
    </substeps>
  </step>
  <step>
    <para>Configure other settings in the profile using the command:</para>
  <screen>nmcli connection modify <replaceable>Name of the connection</replaceable> <replaceable>setting</replaceable> <replaceable>value</replaceable></screen>
  </step>
  <step><para>Activate the profile using the command:</para>
  <screen>nmcli connection up <replaceable>NewConnection</replaceable></screen>
  </step>
  <step><para>Verify the configurations:</para>
  <substeps><step><para>Verify the IP settings of the NIC:</para>
  <screen>ip address show <replaceable>nameofthehost</replaceable></screen>
    </step>
    <step><para>Verify the default IPv4 gateway:</para>
      <screen>ip route show default</screen>
        </step>
        <step><para>Verify the default IPv6 gateway:</para>
          <screen>ip -6 route show default</screen>
            </step>
            <step><para>View the DNS settings:</para>
              <screen>cat /etc/resolv.conf</screen>
                </step>
  </substeps>
  </step>
</procedure>
</section>
<section><title>Configuring WiFi connection</title>
<para>You can connect to a Wifi using the <command>nmcli</command>. The NetworkManager creates a new connection profile when you connect to a Wifi. You can configure the profile after connecting to the Wifi.</para>
<procedure>
  <step>
    <para>Enable the wifi radio using the command:
      <subscript>nmcli radio wifi on</subscript>
    </para>
  </step>
  <step><para>Connect to wifi using the command:
     </para>
     <screen>nmcli device wifi connect <replaceable>WifiConnectionName</replaceable> <replaceable>password</replaceable> </screen>
<para>To view the list of available Wifi Networks and their SSIDs, run the command <command>nmcli device list</command>.</para>
<note><para>You can configure the connection if your Wifi network requires static IP address.</para>
  <para>Configure iPV4 settings using the command:</para>
<screen>nmcli connection modify <replaceable>WifiConnectionName</replaceable> ipv4.method manual ipv4.addresses <replaceable>IP_Address/subnet mask</replaceable></screen></note>
  <para>Configure iPV6 settings using the command:</para>
  <screen>nmcli connection modify <replaceable>WifiConnectionName</replaceable> ipv6.method manual ipv6.addresses <replaceable>IP_Address/subnet mask</replaceable></screen>
</step>
<step><para>Enable the connection using the command:</para>
<screen>nmcli connection up <replaceable>WifiConnectionName</replaceable></screen>
</step>
<step><para>Verify the connection using the command <command>nmcli connection show --active</command>.</para>
<para>The list of available active connections appears.</para>
</step>
</procedure>
</section>
<section><title>Configuring a network bond</title>
<para>A network bond combines physical and virtual network interfaces and it provides a logical interface. You can create network bonds on ethernet devices, Virtual LANs, and so on.</para>
<para>You must have two or more physical or virtual networks installed on the server.
</para>
<itemizedlist><listitem><para>If you use ethernet devices as network bond, you must install the physical or virtual ethernet devices on the server.</para></listitem>
<listitem><para> If you use network team, network bridge, or VLAN devices as ports for the bond, you can create these network team, bridge, and VLAN while creating network bond or create these before creating network bond.</para></listitem>
</itemizedlist>
<procedure><title>Creating network bond</title>

  <step><para>Create a bond interface using the command:</para>
  <screen>nmcli connection add type bond con-name <replaceable>nwbond</replaceable> ifname <replaceable>nwbond</replaceable> bond.options "mode=active-backup"</screen>
  <para>
   A network bond, <replaceable>nwbond</replaceable> that uses <varname>active-backup</varname> mode is created.
  </para>
  <para>You can run the following command to set Media Independent Interface (MII) monitoring interval.
  </para>
  <screen>nmcli connection add type bond con-name <replaceable>nwbond</replaceable> ifname <replaceable>nwbond</replaceable> bond.options "mode=active-backup, miimon=1000"</screen>
  </step>
  <step><para>To view the list of network interfaces, run the command:</para>
  <screen>nmcli device status</screen>
<para>The list of available network interfaces appear. You can configure the devices that are not configured.</para>
</step>
</procedure>
</section>
</topic>