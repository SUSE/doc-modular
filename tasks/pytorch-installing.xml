<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<topic xml:id="pytorch-installing"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Installing &pytorch;</title>
    <meta name="maintainer" content="tbazant@suse.com" its:translate="no"/>
    <abstract>
      <para>
        &pytorch; is a widely used open-source deep-learning framework that
        supports both CPU and GPU acceleration. When deployed with the &suseaia;
        stack, the &pytorch; &helm; chart lets you inject your own training or
        inference code into the container and run it on &nvidia; GPUs available
        in your cluster.
      </para>
    </abstract>
  </info>
  <section xml:id="pytorch-installing-app-details">
    <title>Details about the &pytorch; application</title>
    <para>
      Before deploying &pytorch;, it is important to know more about the
      supported configurations and documentation. The following command provides
      the corresponding details:
    </para>
<screen>helm show values oci://dp.apps.rancher.io/charts/pytorch</screen>
    <para>
      Alternatively, you can also refer to the
      <link xlink:href="https://apps.rancher.io/applications/pytorch">&pytorch;
      &helm; chart page</link>. It contains &pytorch; dependencies, available
      versions and the link to pull the &pytorch; container image.
    </para>
  </section>
  <section xml:id="pytorch-installing-procedure">
    <title>&pytorch; installation procedure</title>
    <procedure>
      <xi:include href="../snippets/ai-library-requirement.xml"/>
      <step>
        <para>
          Create a <filename>pytorch_custom_overrides.yaml</filename> file to
          override the values of the parent &helm; chart. Find examples of
          &pytorch; override files in <xref linkend="pytorch-helm-overrides"/>
          and a list of all valid options and their values in
          <xref linkend="pytorch-helm-values"/>.
        </para>
      </step>
      <step>
        <para>
          Install the &pytorch; &helm; chart using the
          <filename>pytorch_custom_overrides.yaml</filename> file using the
          following command.
        </para>
<screen>&prompt.user;<command>helm upgrade --install \
  pytorch oci://dp.apps.rancher.io/charts/pytorch \
  -n <replaceable>SUSE_AI_NAMESPACE</replaceable> \
  -f <replaceable>pytorch_custom_overrides.yaml</replaceable></command></screen>
      </step>
    </procedure>
  </section>
  <section xml:id="pytorch-upgrading" condition="deployment_standard">
    <title>Upgrading &pytorch;</title>
    <para>
      You can upgrade &pytorch; to a specific version by running the following
      command:
    </para>
<screen>&prompt.user;<command>helm upgrade \
  pytorch oci://dp.apps.rancher.io/charts/pytorch \
  -n <replaceable>SUSE_AI_NAMESPACE</replaceable> \
  --version <replaceable>VERSION_NUMBER</replaceable> \
  -f <replaceable>pytorch_custom_overrides.yaml</replaceable></command></screen>
    <tip>
      <para>
        If you omit the <option>--version</option> option, &pytorch; gets
        upgraded to the latest available version.
      </para>
    </tip>
  </section>
  <section xml:id="pytorch-uninstalling">
    <title>Uninstalling &pytorch;</title>
    <para>
      To uninstall &pytorch;, run the following command:
    </para>
<screen>&prompt.user;<command>helm uninstall pytorch -n <replaceable>SUSE_AI_NAMESPACE</replaceable></command></screen>
  </section>
</topic>
