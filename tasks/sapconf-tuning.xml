<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>

<topic xml:id="sapconf-tuning"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Installing and enabling &sapconf;</title><!-- can be changed via merge
in the assembly -->
    <!-- add author's e-mail -->
    <meta name="maintainer" content="Dmitri Popov" its:translate="no"/>
    <abstract><!-- can be changed via merge in the assembly -->
      <para>
       Learn how to install, enable, and update &sapconf;.
      </para>
    </abstract>
  </info>
  <section xml:id="task-example-requirements">
    <title>Requirements</title>
    <itemizedlist>
      <listitem>
        <para>
          A system on which you plan to run &sap; workloads. The system must have an active &suse; subscription.
        </para>
      </listitem>
    </itemizedlist>
    </section>
  <section xml:id="task-sapconf-install-configure">
    <title>Installing, enabling, and updating &sapconf;</title>
    <para>
      Before you install &sapconf;, check if it is already installed on your system. To do this, run the <command>which sapconf;</command> command. Proceed with installing &sapconf; if the command returns empty output.
    </para>
    <note>
      <para>
        On &sles4sap; the more advanced tool `saptune` is available and recommended to use. `sapconf` provides only a minimal set of tuning.
      </para>
    </note>
    <procedure>
      <step>
        <para>
          To install &sapconf; run the following command:
        </para>
<screen>&prompt.root;zypper install sapconf</screen>
      </step>
      <step>
        <para>
          Installing the package should automatically start the <literal>sapconf.service</literal> service. If needed, you can start the service manually by running the command below:
        </para>
<screen>&prompt.root;systemctl enable --now sapconf.service</screen>
        <important>
          <para>
        &sapconf; and &saptune; cannot be active at the same time. If &saptune; is already tuning your system, you have to stop and disable <literal>saptune.service</literal> before you can start and enable <literal>sapconf.service</literal>.
          </para>
        </important>
      </step>
      <step>
        <para>
          &sapconf; can be updated as a regular zypper package using the following command:
        </para>
<screen>&prompt.root;zypper update sapconf</screen>
      </step>
      <step>
        <para>
          &sapconf; can be configured by editing the <filename>/etc/sysconfig/sapconf</filename> file. Each parameter has a comment section with detailed explanation and the source of the recommendation (&sapnote;).
        </para>
        <important>
          <para>
            CPU tuning is disabled per default. For &sap; &hana; it is recommended to enable it.
          </para>
        </important>
      </step>
      <step>
        <para>
          To apply the changes, restart the &sapconf; service:
        </para>
<screen>&prompt.root;systemctl restart sapconf.service</screen>
      </step>
    </procedure>
  </section>
  <section xml:id="task-sapconf-sle12">
    <title>Note on &sles; 12</title>
    <para>
      For compatibility reasons, you can choose between the following profile on &slsa; 12:
    </para>
    <itemizedlist>
      <listitem>
        <para>
          hana
        </para>
      </listitem>
      <listitem>
        <para>
          netweaver (default)
        </para>
      </listitem>
      <listitem>
        <para>
          ase
        </para>
      </listitem>
      <listitem>
        <para>
          bobj
        </para>
      </listitem>
    </itemizedlist>

    <para>
      The profile can be changed using the following command:
    </para>
<screen>sapconf <replaceable>PROFILE</replaceable></screen>
 
    <para>
      The profiles <literal>netweaver</literal> and <literal>hana</literal> are identical. They are configured using the configuration file <filename>/etc/sysconfig/sapconf</filename>.
    </para>
    <para>
      The configuration files <filename>/etc/sysconfig/sapnote-1680803</filename> and <filename>/etc/sysconfig/sapnote-bobj</filename> are used for configuring the <literal>ase</literal> and <literal>bobj</literal> respectively.
    </para>

    <important>
      <para>
        Certain system values are hard-coded and not configurable. Check the log <filename>/var/log/sapconf.log</filename> after applying the desired profile.
      </para>
    </important>
    
    <para>
      Profiles are removed starting with &slsa; 15, and &sapconf; no longer distinguishes between &sap; products.
    </para>
  </section>
  <section xml:id="task-sapconf-verification">
    <title>Verification</title>
    <para>
      &sapconf; does not provide any tuning verification functionality. Check the log file <filename>/var/log/sapconf.log</filename> for errors. Additionally, the  <filename>sapconf_check</filename> allows you to check the setup, and it gives troubleshooting recommendations.
    </para>
  </section>
  <section xml:id="task-sapconf-info">
    <title>Further info</title>
    <para>
      For further info, refer to the following man pages.
    </para>

    <itemizedlist>
      <listitem>
        <para>
          <filename>sapconf (7)</filename> describes the &sapconf; tool (read this file first)
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>sapconf (5)</literal> describes the central configuration file <filename>/etc/sysconfig/sapconf</filename>
        </para>
      </listitem>
    </itemizedlist>
    
    <para>
      The following manpages are available in &slsa; 12 only:
    </para>

    <itemizedlist>
      <listitem>
        <para>
          <literal>profile-sapconf-hana (7)</literal> describes the sapconf-hana profile
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>profile-sapconf-netweaver (7)</literal> describes the sapconf-netweaver profile
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>profile-sapconf-ase (7)</literal> describes the sapconf-ase profile
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>profile-sapconf-bobj (7)</literal> describes the sapconf-bobj profile
        </para>
      </listitem>
    </itemizedlist>
    
    <para>
      Also the configuration file <filename>/etc/sysconfig/sapconf</filename> has a comment section for each parameter, describing the background and lists the &sapnote; that provides the recommended the value.
    </para>
  </section>
</topic>
