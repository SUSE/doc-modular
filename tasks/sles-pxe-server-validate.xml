<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refer to README.md for file and id naming conventions -->
<topic xml:id="sles-pxe-server-validate"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Validating the PXE boot server setup</title>
    <meta name="maintainer" content="souvik.sarkar@suse.com" its:translate="no"/>
    <abstract>
      <para>
        This section describes how to verify the functionality of your PXE server setup by checking
        service status, testing network responses, and confirming availability of boot assets over
        TFTP or HTTP.
      </para>
    </abstract>
  </info>
  <section xml:id="sles-pxe-server-validate-intro">
    <title>Introduction</title>
    <para>
      After configuring the PXE server components, it is essential to validate that services are
      active and the required files are accessible to client systems over the network. This helps
      isolate configuration errors before attempting a real PXE boot.
    </para>
  </section>
  <section xml:id="sles-pxe-server-validate-reqs">
    <title>Requirements</title>
    <itemizedlist>
      <listitem>
        <para>
          A client system capable of PXE booting.
        </para>
      </listitem>
      <listitem>
        <para>
          Basic networking utilities such as <literal>curl</literal>, <literal>tftp</literal>, and
          <literal>dig</literal> on the PXE server. You can install them using the following
          command:
        </para>
<screen>&prompt.sudo;<command>zypper install curl tftp bind-utils</command></screen>
      </listitem>
    </itemizedlist>
  </section>
  <section xml:id="sles-pxe-server-validate-steps">
    <title>Validating services and boot file availability</title>
    <para>
      Use the following steps to verify that PXE services are running and correctly configured.
    </para>
    <procedure>
      <step>
        <para>
          Check the status of each required service.
        </para>
<screen>&prompt.sudo;<command>systemctl status nginx tftp.socket dnsmasq kea-dhcp4.service radvd</command></screen>
      </step>
      <step>
        <para>
          Verify that HTTP-delivered files are accessible from another machine or browser.
        </para>
<screen>&prompt.sudo;<command>curl -I http://<replaceable>PXE-SERVER</replaceable>/images/bootx64.efi</command></screen>
<screen>&prompt.sudo;<command>curl -I http://<replaceable>PXE-SERVER</replaceable>/images/grub.cfg</command></screen>
      </step>
      <step>
        <para>
          Verify that TFTP works by requesting a known file (if using TFTP):
        </para>
<screen>&prompt.sudo;<command>tftp <replaceable>PXE-SERVER</replaceable> -c get bootx64.efi</command></screen>
      </step>
      <step>
        <para>
          Ensure the DHCP server is responding on the expected interface using
          <literal>tcpdump</literal> or <literal>journalctl</literal>:
        </para>
<screen>&prompt.sudo;<command>tcpdump -n -i eth0 port 67 or port 68</command></screen>
      </step>
    </procedure>
  </section>
</topic>
