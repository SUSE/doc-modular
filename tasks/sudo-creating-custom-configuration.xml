<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="sudo-creating-custom-configuration"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Creating a custom &sudo; configuration file</title><!-- can be changed via merge
in the assembly -->
    <!-- add author's e-mail -->
    <meta name="maintainer" content="jana.jaeger@suse.com" its:translate="no"/>
    <abstract><!-- can be changed via merge in the assembly -->
      <para>
       Learn how to build a simple custom &sudo; configuration and expand it 
       step-by-step. You will be creating a custom configuration that allows a 
       certain user to run the <command>useradd</command>, <command>usermod</command> 
       and <command>userdel</command> command with &sudo; and their own password
       instead of the &rootuser;'s password. Learn how to create groups and how 
       to use aliases to keep your custom configuration lean and efficient.
      </para>
    </abstract>
  </info>
  <section xml:id="sudo-creating-custom-configuration-bp">
    <title>&sudo; configuration best practices</title>
    <para>
      Before your start, here are a few ground rules for maintaining &sudo; 
      configurations:
    </para>
    <variablelist>
      <varlistentry>
        <term>Always use <command>visudo</command> to edit &sudo; configuration files</term>
        <listitem>
          <para>
            Any changes to the &sudo; configuration should be done using the 
            <command>visudo</command>. <command>visudo</command> is a tailor-made tool 
            that allows you to edit the &sudo; configuration files and that runs basic 
            synthax checks making sure that the configuration remains intact and 
            functional. A faulty &sudo; configuration can result in a user being 
            locked out of their own system.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Always create custom configurations under <filename>/etc/sudoers.d/</filename></term>
        <listitem>
          <para>
            Custom configurations must reside under the 
            <filename>/etc/sudoers.de</filename> to be pulled in by &sudo;. 
            Settings in the custom configuration files take precedence over the 
            ones in the default confiugation in <filename>/etc/sudoers</filename>. 
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Always mind the order in which configurations are read</term>
        <listitem>
          <para>
            To make sure the custom configurations are read in the correct order, prefix them with numbers.
            Use leading zeroes to establish the order in which the files are read. For example,
            <filename>01_myfirstconfig</filename> is parsed before
            <filename>10_myotherconfig</filename>. If a directive has been set 
            in one file that is read before another file that contains 
            conflicting information, the last-read directive is applied. 
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Always use descriptive file names</term>
        <listitem>
          <para>
            Use file names that hint at what the configuration file does. This 
            helps you keep track of what your &sudo; setup is supposed to do.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>

  <section xml:id="sudo-creating-custom-config-single-user">
    <title>Create a user-specific configuration file</title>
    <para>
      Create a &sudo; configuration file that allows &exampleuser; to use the 
      <command>useradd</command> command with their own password instead of the 
      &rootuser; password. 
    </para>
    <procedure>
      <step>
        <para>
          A step.
        </para>
      </step>
      <step>
        <para>
          A second step.
        </para>
      </step>
      <step>
        <para>
          A third step.
        </para>
      </step>
    </procedure>
  </section>
</topic>
