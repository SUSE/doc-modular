<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="vm-configure-boot-virsh"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Configuring boot options of a virtual machine using &virsh;</title>
    <meta name="maintainer" content="tbazant@suse.com" its:translate="no"/>
    <abstract>
      <para>
        &virsh; is a command-line tool that helps you manage and configure &libvirt;-based virtual
        machines (VM).
      </para>
    </abstract>
  </info>
  <para>
    To configure VM boot options using &virsh;, proceed as follows:
  </para>
  <procedure>
    <step>
      <para>
        Identify the VM whose boot options you want to change.
      </para>
<screen>&prompt.sudo;<command>virsh list --all</command>
 Id   Name       State
---------------------------
[...]
 -    sle15sp5   shut off</screen>
    </step>
    <step>
      <para>
        Edit the XML configuration of the VM and search for the <literal>&lt;os/></literal>
        specification.
      </para>
<screen>&prompt.sudo;<command>virsh edit <replaceable>sle15sp5</replaceable></command>
[...]
&lt;os>
  &lt;type arch='x86_64' machine='pc-q35-7.2'>hvm&lt;/type>
  &lt;boot dev='hd'/>
&lt;/os>
[...]</screen>
    </step>
    <step>
      <para>
        Modify the boot configuration to fulfill your needs. For example, to add a bootable ISO
        image as a CD-ROM device to be the first device to boot, update the configuration as
        follows.
      </para>
<screen>
[...]
&lt;os>
  &lt;type arch='x86_64' machine='pc-q35-7.2'>hvm&lt;/type>
  &lt;boot dev='cdrom'/>
  &lt;boot dev='hd'/>
&lt;/os>
[...]
&lt;disk type='file' device='cdrom'>
  &lt;driver name='qemu' type='raw'/>
  &lt;source file='/home/&exampleuser;/downloaded-isos/SLE-15-SP5-Online-x86_64-GM-Media1.iso'/>
  &lt;target dev='sda' bus='sata'/>
  &lt;readonly/>
  &lt;address type='drive' controller='0' bus='0' target='0' unit='0'/>
&lt;/disk>
</screen>
    </step>
    <step>
      <para>
        Save the changes and if the VM is running, power it off.
      </para>
    </step>
    <step>
      <para>
        Start the VM with the boot options updated.
      </para>
<screen>&prompt.sudo;<command>virsh start <replaceable>sle15sp5</replaceable></command></screen>
    </step>
  </procedure>
</topic>
