<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<topic xml:id="vmguest-configure-storage-using-virt-manager"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Configuring &vmguest; storage using &vmm;</title>
    <meta name="maintainer" content="tbazant@suse.com" its:translate="no"/>
    <abstract>
      <xi:include href="../snippets/vmm-short-description.xml"/>
    </abstract>
  </info>
  <para>
    This topic gives you a detailed description of configuration options for storage devices. It
    includes both hard disks and removable media, such as USB or CD-ROM drives. Although the
    procedure describes on adding a new storage hardware, its steps apply to updating an existing
    storage device.
  </para>
  <procedure>
    <xi:include href="../snippets/vmm-step1.xml"/>
    <xi:include href="../snippets/vmm-step2.xml"/>
    <xi:include href="../snippets/vmm-step3.xml"/>
    <step>
      <para>
        Below the left panel, click <guimenu>Add Hardware</guimenu> to open the <guimenu>Add New
        Virtual Hardware</guimenu> window. There, select <guimenu>Storage</guimenu>.
      </para>
      <figure>
        <title>Add a new storage</title>
        <mediaobject>
          <imageobject role="fo">
            <imagedata fileref="libvirt_vmm_storage1.png" width="70%"/>
          </imageobject>
          <imageobject role="html">
            <imagedata fileref="libvirt_vmm_storage1.png" width="70%"/>
          </imageobject>
        </mediaobject>
      </figure>
    </step>
    <step>
      <para>
        To create a <literal>qcow2</literal> disk image in the default location, activate
        <guimenu>Create a disk image for the virtual machine</guimenu> and specify its size in
        gigabytes.
      </para>
      <para>
        To gain more control over the disk image creation, activate <guimenu>Select or create
        custom storage</guimenu> and click <guimenu>Manage</guimenu> to manage storage pools and
        images.
      </para>
      <tip>
        <title>Supported storage formats</title>
        <para>
          &suse; only supports the following storage formats: <literal>raw</literal> and
          <literal>qcow2</literal>.
        </para>
      </tip>
    </step>
    <step>
      <para>
        After you manage to create and specify the disk image file, specify the <guimenu>Device
        type</guimenu>. It can be one of the following options:
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <guimenu>Disk device</guimenu>
          </para>
        </listitem>
        <listitem>
          <para>
            <guimenu>CDROM device</guimenu>: does not allow using <guimenu>Create a disk image for
            the virtual machine</guimenu>.
          </para>
        </listitem>
        <listitem>
          <para>
            <guimenu>Floppy device</guimenu>: does not allow using <guimenu>Create a disk image for
            the virtual machine</guimenu>.
          </para>
        </listitem>
        <listitem>
          <para>
            <guimenu>LUN Passthrough</guimenu>: required to use an existing SCSI storage directly
            without adding it into a storage pool.
          </para>
        </listitem>
      </itemizedlist>
    </step>
    <step>
      <para>
        Select the <guimenu>Bus type</guimenu> for your device. The list of available options
        depends on the device type you selected in the previous step. The types based on
        <guimenu>VirtIO</guimenu> use paravirtualized drivers.
      </para>
    </step>
    <step>
      <para>
        In the <guimenu>Advanced options</guimenu> section, specify if the storage device is
        read-only, shareable with other VMs, and select the preferred <guimenu>Cache
        mode</guimenu>. Find detailed description of cache types in <link
        xlink:href="https://documentation.suse.com/smart/virtualization-cloud/html/virtual-disk-cache-mode-configure/virtual-disk-cache-mode-configure.html"/>
      </para>
    </step>
    <step>
      <para>
        Confirm your settings with <guimenu>Finish</guimenu>. A new storage device appears in the
        left panel.
      </para>
    </step>
  </procedure>
</topic>
