<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article
[
<!ENTITY % entities SYSTEM "generic-entities.ent">
%entities;
]>
<article version="5.0" xml:id="task-configure-ntp-with-yast"
 role="task"
 xmlns="http://docbook.org/ns/docbook"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xml:lang="en">
 <!--metadata
  * product(s): SLES, SLED, SLE-HA (?), SLES-SAP (?), SLE-HPC (?), SLE-RT (?)
  * product version(s): 15 SP3, 15 SP2, 15 SP1
  * topic category/ies: system administration
  * target group(s): system operators, home PC users
  * initially published: ?
  * last modified: ?-->
 <title>&ntp; configuration with &yast;</title>
 <section xml:id="introduction-configure-ntp-with-yast">
  <title>Introduction</title>
  <para>
   You will learn how to configure &ntp; time synchronization on your computer
   using &yast;.
  </para>
 </section>
 <section xml:id="requirements-configure-ntp-with-yast">
  <title>Requirements</title>
  <itemizedlist>
   <listitem>
    <para>
     You have installed your product and your system is up and running.
    </para>
   </listitem>
   <listitem>
    <para>
     You have installed the &yast; &ntp; module included in the
     <package>yast2-ntp-client</package> package.
    </para>
   </listitem>
  </itemizedlist>
 </section>
 <section xml:id="configure-ntp-with-yast">
  <title>Configuring &ntp; with &yast;</title>
  <procedure>
   <step>
    <para>
     <emphasis>Open the &yast; &ntp; module.</emphasis> Start <menuchoice>
     <guimenu>YaST</guimenu> <guimenu>Network Services</guimenu> <guimenu>NTP
     Configuration</guimenu> </menuchoice>.
    </para>
    <figure>
     <title>NTP configuration window</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="ntp_client.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="ntp_client.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
    <para>
     <emphasis>Specify when to start the &ntp; service:</emphasis>
    </para>
    <variablelist>
     <varlistentry>
      <term><guimenu>Only manually</guimenu></term>
      <listitem>
       <para>
        Start the &ntp; service manually.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Synchronize without Daemon</guimenu></term>
      <listitem>
       <para>
        Set the system time periodically without a permanently running &ntp;
        service. You can set the <guimenu>Interval of the Synchronization in
        Minutes</guimenu>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Now and on boot</guimenu></term>
      <listitem>
       <para>
        Start the &ntp; service automatically when the system is booting. This
        setting is recommended.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step>
    <para>
     <emphasis>Specify the type of configuration source.</emphasis> In the
     <guimenu>Configuration Source</guimenu> drop-down box, select either
     <guimenu>Dynamic</guimenu> or <guimenu>Static</guimenu>. Set
     <guimenu>Static</guimenu> if your server uses only a fixed set of (public)
     NTP servers, while <guimenu>Dynamic</guimenu> is better if your internal
     network offers NTP servers via DHCP.
    </para>
   </step>
   <step>
    <para>
     <emphasis>Configure time servers.</emphasis> Time servers for the client
     to query are listed in the lower part of the <guimenu>NTP
     Configuration</guimenu> window. Modify this list as needed by clicking
     <guimenu>Add</guimenu>, <guimenu>Edit</guimenu>, and
     <guimenu>Delete</guimenu>.
    </para>
    <para>
     Click <guimenu>Add</guimenu> to add a new time server:
    </para>
    <figure>
     <title>Adding a time server</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="ntp_client_serveradd.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="ntp_client_serveradd.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <itemizedlist>
     <listitem>
      <para>
       In the <guimenu>Address</guimenu> field, type the URL of the time server
       or pool of time servers with which you want to synchronize the machine
       time. After the URL is complete, click <guimenu>Test</guimenu> to verify
       that it points to a valid time source.
      </para>
     </listitem>
     <listitem>
      <para>
       Activate <guimenu>Quick Initial Sync</guimenu> to speed up the time
       synchronization by sending more requests at the &ntp; service start.
      </para>
     </listitem>
     <listitem>
      <para>
       Activate <guimenu>Start Offline</guimenu> to speed up the boot time on
       systems that start the &ntp; service automatically and may not have an
       Internet connection at boot time. This option is useful, for example,
       for laptops with network connections managed by &nm;.
      </para>
     </listitem>
     <listitem>
      <para>
       Confirm with <guimenu>OK</guimenu>.
      </para>
     </listitem>
    </itemizedlist>
   </step>
  </procedure>
 </section>
 <section xml:id="summary-configure-ntp-with-yast">
  <title>Summary</title>
  <para>
   After having successfully configured NTP time synchronization, the system
   time on your computer will be exact.
  </para>
 </section>
 <section xml:id="troubleshooting-configure-ntp-with-yast">
  <title>Troubleshooting</title>
  <para>
   In case of errors, check the following.
  </para>
  <itemizedlist>
   <listitem>
    <para>
     Verify that your computer is connected to a network and that the network
     is configured correctly:
    </para>
<screen>
&prompt.sudo;systemctl status network.service
● NetworkManager.service - Network Manager
     Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; vendor preset: disabled)
     Active: active (running) since Sat 2021-08-07 20:09:44 CEST; 4 days ago
[...]
</screen>
   </listitem>
   <listitem>
    <para>
     Verify that the time server(s) that you entered as time source exist and
     are reachable over network. For example:
    </para>
<screen>
ping pool.ntp.org
PING pool.ntp.org (85.199.214.101) 56(84) bytes of data.
64 bytes from 85.199.214.101 (85.199.214.101): icmp_seq=1 ttl=37 time=29.9 ms
[...]
</screen>
   </listitem>
   <listitem>
    <para>
     If the &firewalld; service is active on your computer, verify that
     the &ntp; service allowed.
    </para>
   </listitem>
   <listitem>
    <para>
     Verify that the &ntp; service is running:
    </para>
<screen>
&prompt.sudo;systemctl status chronyd.service
● chronyd.service - NTP client/server
     Loaded: loaded (/usr/lib/systemd/system/chronyd.service; enabled; vendor preset: disabled)
     Active: active (running) since Sat 2021-08-07 20:09:44 CEST; 4 days ago
 [...]
</screen>
   </listitem>
  </itemizedlist>
 </section>
 <!--
 <section xml:id="next-configure-ntp-with-yast">
  <title>Next steps</title>
 </section>
 -->
 <section xml:id="related-configure-ntp-with-yast">
  <title>Related topics</title>
  <itemizedlist>
   <listitem>
    <para>
     &ntp; configuration and runtime management on the command line.
    </para>
   </listitem>
   <listitem>
    <para>
     Securing your computer with &firewalld;.
    </para>
   </listitem>
  </itemizedlist>
 </section>
</article>
