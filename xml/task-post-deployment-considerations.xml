<?xml version="1.0" encoding="UTF-8"?>
<!-- This file originates from the project https://github.com/openSUSE/doc-kit -->
<!-- This file can be edited downstream. -->
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>
<article xml:id="task-post-deployment-considerations" xml:lang="en"
 role="task"
 xmlns="http://docbook.org/ns/docbook" version="5.1"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Post-deployment considerations</title>
  <section xml:id="introduction-post-deployment-considerations">
    <title>Introduction</title>
    <para>
      This article describes important information and tasks that you need to
      consider after you successfully deploy the &alp; (&alpshort;).
    </para>
  </section>
  <section xml:id="requirements-post-deployment-considerations">
    <title>Requirements</title>
    <itemizedlist>
      <listitem>
        <para>
          Deployed &alpshort; base OS with full disk encryption.
        </para>
      </listitem>
    </itemizedlist>
  </section>
  <section xml:id="alp-post-deploy-full-disk-encryption">
    <title>Full disk encryption</title>
    <section xml:id="alp-post-deploy-full-disk-encryption-password">
      <title>Change encryption password</title>
      <para>
        During the &alpshort; deployment, you entered a password that is used
        for disk encryption. If you want to change the password, verify that
        you have the <package>fde-tools</package> package installed and install
        it if it is not present on the system:
      </para>
<screen>
&prompt.root;transactional-update pkg install fde-tools
&prompt.root;reboot
</screen>
      <para>
        Change the disk encryption pasword:
      </para>
<screen>&prompt.root;fdectl passwd</screen>
    </section>
    <section xml:id="alp-post-deploy-full-disk-encryption-tpm">
      <title>TPM device</title>
      <para>
        Without a TPM chip, you need to enter the encryption password to
        decrypt the disk on each &alpshort; boot. On systems that have a TPM
        2.0 chip, it is possible to create a secondary key for the encrypted
        file system, and seal this with the TPM device. A key that has been
        sealed in this way cannot be unsealed except by the very same TPM.
      </para>
      <para>
        This allows you to use the full disk encryption without having to type
        the disk password on each reboot. However, the disk password is still
        there and can be used for recovery. For example, after updating the
        &grub; boot loader, or the SHIM loader, the TPM will no longer be able
        to unseal the secondary key correctly, so that &grub; will have to fall
        back to the password.
      </para>
      <para>
        Currently, TPM protection is not enabled by default and requires a
        manual step. When first booting into the &alpshort; system, log in as
        &rootuser;, and run the following command:
      </para>
<screen>&prompt.root;fdectl tpm-enable</screen>
      <para>
        You will be asked for the disk recovery password and
        <command>fdectl</command> creates the secondary key and seal it using
        the TPM device.
      </para>
    </section>
  </section>
  <section xml:id="related-post-deployment-considerations">
    <title>Related topics</title>
    <itemizedlist>
      <listitem>
        <para>
          &alpshort; deployment is described in
          <xref linkend="concept-alp-deployment"/>.
        </para>
      </listitem>
      <listitem>
        <para>
          Installing software packages and patterns is detailed in
          <link xlink:href="https://documentation.suse.com/sles/html/SLES-all/cha-sw-cl.html"/>.
        </para>
      </listitem>
    </itemizedlist>
  </section>
</article>
